

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Toolboxes &mdash; LuxPy 1.6.13 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Color sub-package" href="color.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> LuxPy
          

          
          </a>

          
            
            
              <div class="version">
                1.6.13
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="license.html">License: GPLv3</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="required_packages.html">Imported (required) packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="luxpy_structure.html">Luxpy package structure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">Math sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="spectrum.html">Spectrum sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="color.html">Color sub-package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Toolboxes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#photbiochem">photbiochem/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-calculating-cie-s026-2018-tn003-2015-photobiological-quantities">Module for calculating CIE (S026:2018 &amp; TN003:2015) photobiological quantities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-for-calculation-of-cyanosis-index-as-nzs-1680-2-5-1997">Module for calculation of cyanosis index (AS/NZS 1680.2.5:1997)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-for-blue-light-hazard-calculations">Module for Blue light hazard calculations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#indvcmf">indvcmf/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-individual-observer-lms-cmfs-asano-2016-and-cie-tc1-97">Module for Individual Observer lms-CMFs (Asano, 2016 and CIE TC1-97)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#spdbuild">spdbuild/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-building-and-optimizing-spds">Module for building and optimizing SPDs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-for-building-and-optimizing-spds-2">Module for building and optimizing SPDs (2)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hypspcim">hypspcim/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-hyper-spectral-image-simulation">Module for hyper spectral image simulation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dispcal">dispcal/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-display-characterization">Module for display characterization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2spec">rgb2spec/</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iolidfiles">iolidfiles/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-reading-and-writing-ies-and-ldt-files">Module for reading and writing IES and LDT files.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#spectro">spectro/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#package-for-spectral-measurements">Package for spectral measurements</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LuxPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="luxpy_structure.html">Luxpy package structure</a> &raquo;</li>
        
      <li>Toolboxes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/toolboxes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="toolboxes">
<h1>Toolboxes<a class="headerlink" href="#toolboxes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="photbiochem">
<h2>photbiochem/<a class="headerlink" href="#photbiochem" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">py</dt>
<dd class="field-odd"><ul class="simple">
<li><p>__init__.py</p></li>
<li><p>cie_tn003_2015.py</p></li>
<li><p>ASNZS_1680_2_5_1997_COI.py</p></li>
<li><p>circadian_CS_CLa_lrc.py</p></li>
</ul>
</dd>
<dt class="field-even">namespace</dt>
<dd class="field-even"><p>luxpy.photbiochem</p>
</dd>
</dl>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.photbiochem"></span><div class="section" id="module-for-calculating-cie-s026-2018-tn003-2015-photobiological-quantities">
<h3>Module for calculating CIE (S026:2018 &amp; TN003:2015) photobiological quantities<a class="headerlink" href="#module-for-calculating-cie-s026-2018-tn003-2015-photobiological-quantities" title="Permalink to this headline">¶</a></h3>
<p>(Eelc, Eemc, Eesc, Eer, Eez, and Elc, Emc, Esc, Er, Ez)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 17%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 10%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Photoreceptor</p></th>
<th class="head"><p>Photopigment
(label, α)</p></th>
<th class="head"><p>Spectral efficiency
sα(λ)</p></th>
<th class="head"><p>Quantity
(α-opic irradiance)</p></th>
<th class="head"><p>Q-symbol
(Ee,α)</p></th>
<th class="head"><p>Unit symbol</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>l-cone</p></td>
<td><p>photopsin (lc)</p></td>
<td><p>erythrolabe</p></td>
<td><p>erythropic</p></td>
<td><p>Ee,lc</p></td>
<td><p>W.m−2</p></td>
</tr>
<tr class="row-odd"><td><p>m-cone</p></td>
<td><p>photopsin (mc)</p></td>
<td><p>chlorolabe</p></td>
<td><p>chloropic</p></td>
<td><p>Ee,mc</p></td>
<td><p>W.m−2</p></td>
</tr>
<tr class="row-even"><td><p>s-cone</p></td>
<td><p>photopsin (sc)</p></td>
<td><p>cyanolabe</p></td>
<td><p>cyanopic</p></td>
<td><p>Ee,sc</p></td>
<td><p>W.m−2</p></td>
</tr>
<tr class="row-odd"><td><p>rod</p></td>
<td><p>rhodopsin (r)</p></td>
<td><p>rhodopic</p></td>
<td><p>rhodopic</p></td>
<td><p>Ee,r</p></td>
<td><p>W.m−2</p></td>
</tr>
<tr class="row-even"><td><p>ipRGC</p></td>
<td><p>melanopsin (z)</p></td>
<td><p>melanopic</p></td>
<td><p>melanopic</p></td>
<td><p>Ee,z</p></td>
<td><p>W.m−2</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">CIE recommends that the α-opic irradiance is determined by convolving the spectral</div>
<div class="line">irradiance, Ee,λ(λ) (W⋅m−2), for each wavelength, with the action spectrum, sα(λ), </div>
<div class="line">where sα(λ) is normalized to one at its peak:</div>
<div class="line"><br /></div>
<div class="line-block">
<div class="line">Ee,α = ∫ Ee,λ(λ) sα(λ) dλ </div>
<div class="line"><br /></div>
</div>
<div class="line">where the corresponding units are W⋅m−2 in each case. </div>
<div class="line"><br /></div>
<div class="line">The equivalent luminance is calculated as:</div>
<div class="line"><br /></div>
<div class="line-block">
<div class="line">E,α = Km ⋅ ∫ Ee,λ(λ) sα(λ) dλ ⋅ ∫ V(λ) dλ / ∫ sα(λ) dλ</div>
<div class="line"><br /></div>
</div>
<div class="line">To avoid ambiguity, the weighting function used must be stated, so, for example, </div>
<div class="line">cyanopic refers to the cyanopic irradiance weighted using </div>
<div class="line">the s-cone or ssc(λ) spectral efficiency function.</div>
</div>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">_PHOTORECEPTORS</dt>
<dd class="field-odd"><p>[‘l-cone’, ‘m-cone’,’s-cone’, ‘rod’, ‘iprgc’]</p>
</dd>
<dt class="field-even">_Ee_SYMBOLS</dt>
<dd class="field-even"><p>[‘Ee,lc’,’Ee,mc’, ‘Ee,sc’,’Ee,r’,  ‘Ee,z’]</p>
</dd>
<dt class="field-odd">_E_SYMBOLS</dt>
<dd class="field-odd"><p>[‘E,lc’,’E,mc’, ‘E,sc’,’E,r’,  ‘E,z’]</p>
</dd>
<dt class="field-even">_Q_SYMBOLS</dt>
<dd class="field-even"><p>[‘Q,lc’,’Q,mc’, ‘Q,sc’,’Q,r’,  ‘Q,z’]</p>
</dd>
<dt class="field-odd">_Ee_UNITS</dt>
<dd class="field-odd"><p>[‘W⋅m−2’] * 5</p>
</dd>
<dt class="field-even">_E_UNITS</dt>
<dd class="field-even"><p>[‘lux’] * 5</p>
</dd>
<dt class="field-odd">_Q_UNITS</dt>
<dd class="field-odd"><p>[‘photons/m2/s’] * 5</p>
</dd>
<dt class="field-even">_QUANTITIES</dt>
<dd class="field-even"><div class="line-block">
<div class="line">list with actinic types of irradiance, illuminance</div>
<div class="line">[‘erythropic’, </div>
<div class="line-block">
<div class="line">‘chloropic’,</div>
<div class="line">‘cyanopic’,</div>
<div class="line">‘rhodopic’,</div>
<div class="line">‘melanopic’] </div>
</div>
</div>
</dd>
<dt class="field-odd">_ACTIONSPECTRA</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with default CIE-S026:2018 alpha-actinic action spectra. (stored in file:</div>
<div class="line">‘./data/cie_S026_2018_SI_action_spectra_CIEToolBox_v1.049.dat’)</div>
</div>
</dd>
<dt class="field-even">_ACTIONSPECTRA_CIES026</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with alpha-actinic action spectra. (stored in file:</div>
<div class="line">‘./data/cie_S026_2018_SI_action_spectra_CIEToolBox_v1.049.dat’)</div>
</div>
</dd>
<dt class="field-odd">_ACTIONSPECTRA_CIETN003</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with CIE-TN003:2015 alpha-actinic action spectra. (stored in file:</div>
<div class="line">‘./data/cie_tn003_2015_SI_action_spectra.dat’)</div>
</div>
</dd>
<dt class="field-even">spd_to_aopicE()</dt>
<dd class="field-even"><div class="line-block">
<div class="line">Calculate alpha-opic irradiance (Ee,α) and equivalent </div>
<div class="line">luminance (Eα) values for the l-cone, m-cone, s-cone, </div>
<div class="line">rod and iprgc (α) photoreceptor cells following </div>
<div class="line">CIE S026:2018 (= default actionspectra) or CIE TN003:2015.</div>
</div>
</dd>
<dt class="field-odd">spd_to_aopicEDI()</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Calculate alpha-opic equivalent daylight (D65) illuminance (lx)</div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</div>
</div>
</dd>
<dt class="field-even">spd_to_aopicDER()</dt>
<dd class="field-even"><div class="line-block">
<div class="line">Calculate α-opic Daylight (D65) Efficacy Ratio</div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</div>
</div>
</dd>
<dt class="field-odd">spd_to_aopicELR()</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Calculate α-opic Efficacy of Luminous Radiation</div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</div>
</div>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>References:</dt><dd><p>1. <a class="reference external" href="https://cie.co.at/publications/cie-system-metrology-optical-radiation-iprgc-influenced-responses-light-0">CIE-S026:E2018 (2018). 
CIE System for Metrology of Optical Radiation for ipRGC-Influenced Responses to Light 
(Vienna, Austria).</a>
(<a class="reference external" href="https://files.cie.co.at/CIE%20S%20026%20alpha-opic%20Toolbox%20User%20Guide.pdf">https://files.cie.co.at/CIE%20S%20026%20alpha-opic%20Toolbox%20User%20Guide.pdf</a>)</p>
<p>2. <a class="reference external" href="http://www.cie.co.at/publications/report-first-international-workshop-circadian-and-neurophysiological-photometry-2013">CIE-TN003:2015 (2015). 
Report on the first international workshop on 
circadian and neurophysiological photometry, 2013 
(Vienna, Austria).</a>
(<a class="reference external" href="http://files.cie.co.at/785_CIE_TN_003-2015.pdf">http://files.cie.co.at/785_CIE_TN_003-2015.pdf</a>)</p>
</dd>
</dl>
</div>
<div class="section" id="module-for-calculation-of-cyanosis-index-as-nzs-1680-2-5-1997">
<h3>Module for calculation of cyanosis index (AS/NZS 1680.2.5:1997)<a class="headerlink" href="#module-for-calculation-of-cyanosis-index-as-nzs-1680-2-5-1997" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">_COI_OBS</dt>
<dd class="field-odd"><p>Default CMF set for calculations</p>
</dd>
<dt class="field-even">_COI_CSPACE</dt>
<dd class="field-even"><p>Default color space (CIELAB)</p>
</dd>
<dt class="field-odd">_COI_RFL_BLOOD</dt>
<dd class="field-odd"><p>ndarray with reflectance spectra of 100% and 50% 
oxygenated blood</p>
</dd>
<dt class="field-even">spd_to_COI_ASNZS1680</dt>
<dd class="field-even"><p>Calculate the Cyanosis Observartion Index (COI) 
[ASNZS 1680.2.5-1995]</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>Reference:</dt><dd><p>AS/NZS1680.2.5 (1997). INTERIOR LIGHTING PART 2.5: HOSPITAL AND MEDICAL TASKS.</p>
</dd>
</dl>
</div>
<div class="section" id="module-for-blue-light-hazard-calculations">
<h3>Module for Blue light hazard calculations<a class="headerlink" href="#module-for-blue-light-hazard-calculations" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">_BLH</dt>
<dd class="field-odd"><p>Blue Light Hazard function</p>
</dd>
<dt class="field-even">spd_to_blh_eff()</dt>
<dd class="field-even"><p>Calculate Blue Light Hazard efficacy (K) or efficiency (eta) of radiation.</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>References:</dt><dd><ol class="arabic simple">
<li><p>IEC 62471:2006, 2006, Photobiological safety of lamps and lamp systems.</p></li>
<li><p>IEC TR 62778, 2014, Application of IEC 62471 for the assessment of blue light hazard to light sources and luminaires.</p></li>
</ol>
</dd>
</dl>
<dl class="py function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_aopicE">
<code class="sig-prename descclassname">luxpy.toolboxes.photbiochem.</code><code class="sig-name descname">spd_to_aopicE</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">Ee</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">E</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Q</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">sid_units</span><span class="o">=</span><span class="default_value">'W/m2'</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'Eeas'</span></em>, <em class="sig-param"><span class="n">actionspectra</span><span class="o">=</span><span class="default_value">'CIE-S026'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/alpha_opic_quantities_cie_s026_2018_cie_tn003_2015.html#spd_to_aopicE"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_aopicE" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate alpha-opic irradiance (Ee,α) values (W/m²) for the l-cone, m-cone, 
s-cone, rod and iprgc (α) photoreceptor cells following CIE S026:2018.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">sid</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">numpy.ndarray with retinal spectral irradiance in :sid_units: </div>
<div class="line">(if ‘uW/cm2’, sid will be converted to SI units ‘W/m2’)</div>
</div>
</dd>
<dt class="field-even">Ee</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an irradiance of :Ee:</div>
</div>
</dd>
<dt class="field-odd">E</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an illuminance of :E:</div>
<div class="line">Note that E is calculate using a Km factor corrected to standard air.</div>
</div>
</dd>
<dt class="field-even">Q</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If not None: Normalize :sid: to a quantal energy of :Q:</div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</dd>
<dt class="field-even">sid_units</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘W/m2’, optional</div>
<div class="line">Other option ‘uW/m2’, input units of :sid:</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘Eeas’ or str, optional</div>
<div class="line">Determines values to return. </div>
<div class="line">(to get also get equivalent illuminance Eα set :out: to ‘Eeas,Eas’)</div>
</div>
</dd>
<dt class="field-even">actionspectra</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘CIES026’, optional</div>
<div class="line">Actionspectra to use in calculation </div>
<div class="line">options: </div>
<div class="line">- ‘CIE-S026’: will use action spectra as defined in CIE S026 </div>
<div class="line">- ‘CIE-TN003’: will use action spectra as defined in CIE TN003</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Eeas a numpy.ndarray with the α-opic irradiance</div>
<div class="line">of all spectra in :sid: in SI-units (W/m²). </div>
<div class="line"><br /></div>
<div class="line">(other choice can be set using :out:)</div>
</div>
</dd>
</dl>
</dd>
<dt>References:</dt><dd><p>1. <a class="reference external" href="https://cie.co.at/publications/cie-system-metrology-optical-radiation-iprgc-influenced-responses-light-0">CIE-S026:E2018 (2018). 
CIE System for Metrology of Optical Radiation for ipRGC-Influenced Responses to Light 
(Vienna, Austria).</a>
(<a class="reference external" href="https://files.cie.co.at/CIE%20S%20026%20alpha-opic%20Toolbox%20User%20Guide.pdf">https://files.cie.co.at/CIE%20S%20026%20alpha-opic%20Toolbox%20User%20Guide.pdf</a>)</p>
<p>2. <a class="reference external" href="http://www.cie.co.at/publications/report-first-international-workshop-circadian-and-neurophysiological-photometry-2013">CIE-TN003:2015 (2015). 
Report on the first international workshop on 
circadian and neurophysiological photometry, 2013 
(Vienna, Austria).</a>
(<a class="reference external" href="http://files.cie.co.at/785_CIE_TN_003-2015.pdf">http://files.cie.co.at/785_CIE_TN_003-2015.pdf</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_aopicEDI">
<code class="sig-prename descclassname">luxpy.toolboxes.photbiochem.</code><code class="sig-name descname">spd_to_aopicEDI</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">Ee</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">E</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Q</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">sid_units</span><span class="o">=</span><span class="default_value">'W/m2'</span></em>, <em class="sig-param"><span class="n">actionspectra</span><span class="o">=</span><span class="default_value">'CIE-S026'</span></em>, <em class="sig-param"><span class="n">ref</span><span class="o">=</span><span class="default_value">'D65'</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'a_edi'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/alpha_opic_quantities_cie_s026_2018_cie_tn003_2015.html#spd_to_aopicEDI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_aopicEDI" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate alpha-opic equivalent daylight (D65) illuminance (lux)
for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">sid</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">numpy.ndarray with retinal spectral irradiance in :sid_units: </div>
<div class="line">(if ‘uW/cm2’, sid will be converted to SI units ‘W/m2’)</div>
</div>
</dd>
<dt class="field-even">Ee</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an irradiance of :Ee:</div>
</div>
</dd>
<dt class="field-odd">E</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an illuminance of :E:</div>
<div class="line">Note that E is calculate using a Km factor corrected to standard air.</div>
</div>
</dd>
<dt class="field-even">Q</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If not None: nNormalize :sid: to a quantal energy of :Q:</div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</dd>
<dt class="field-even">sid_units</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘W/m2’, optional</div>
<div class="line">Other option ‘uW/m2’, input units of :sid:</div>
</div>
</dd>
<dt class="field-odd">actionspectra</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘CIES026’, optional</div>
<div class="line">Actionspectra to use in calculation </div>
<div class="line">options: </div>
<div class="line">- ‘CIE-S026’: will use action spectra as defined in CIE S026 </div>
<div class="line">- ‘CIE-TN003’: will use action spectra as defined in CIE TN003</div>
</div>
</dd>
<dt class="field-even">ref</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘D65’, optional</div>
<div class="line">Reference (daylight) spectrum to use. (‘D65’ or ‘E’ or ndarray)</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘Eeas, Eas’ or str, optional</div>
<div class="line">Determines values to return.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with the α-opic Equivalent Daylight Illuminance (lux) with the </div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc photoreceptors</div>
<div class="line">of all spectra in :sid: in SI-units. </div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_aopicDER">
<code class="sig-prename descclassname">luxpy.toolboxes.photbiochem.</code><code class="sig-name descname">spd_to_aopicDER</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">sid_units</span><span class="o">=</span><span class="default_value">'W/m2'</span></em>, <em class="sig-param"><span class="n">actionspectra</span><span class="o">=</span><span class="default_value">'CIE-S026'</span></em>, <em class="sig-param"><span class="n">ref</span><span class="o">=</span><span class="default_value">'D65'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/alpha_opic_quantities_cie_s026_2018_cie_tn003_2015.html#spd_to_aopicDER"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_aopicDER" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate α-opic Daylight (D65) Efficacy Ratio (= α-opic Daylight (D65) Efficiency)
for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">sid</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">numpy.ndarray with retinal spectral irradiance in :sid_units: </div>
<div class="line">(if ‘uW/cm2’, sid will be converted to SI units ‘W/m2’)</div>
</div>
</dd>
<dt class="field-even">cieobs</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</dd>
<dt class="field-odd">sid_units</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘W/m2’, optional</div>
<div class="line">Other option ‘uW/m2’, input units of :sid:</div>
</div>
</dd>
<dt class="field-even">actionspectra</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘CIES026’, optional</div>
<div class="line">Actionspectra to use in calculation </div>
<div class="line">options: </div>
<div class="line">- ‘CIE-S026’: will use action spectra as defined in CIE S026 </div>
<div class="line">- ‘CIE-TN003’: will use action spectra as defined in CIE TN003</div>
</div>
</dd>
<dt class="field-odd">ref</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘D65’, optional</div>
<div class="line">Reference (daylight) spectrum to use. (‘D65’ or ‘E’ or ndarray)</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with the α-opic Daylight Efficacy Ratio with the </div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc photoreceptors</div>
<div class="line">of all spectra in :sid: in SI-units. </div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_aopicELR">
<code class="sig-prename descclassname">luxpy.toolboxes.photbiochem.</code><code class="sig-name descname">spd_to_aopicELR</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">sid_units</span><span class="o">=</span><span class="default_value">'W/m2'</span></em>, <em class="sig-param"><span class="n">actionspectra</span><span class="o">=</span><span class="default_value">'CIE-S026'</span></em>, <em class="sig-param"><span class="n">ref</span><span class="o">=</span><span class="default_value">'D65'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/alpha_opic_quantities_cie_s026_2018_cie_tn003_2015.html#spd_to_aopicELR"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_aopicELR" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate α-opic Efficacy of Luminous Radiation (W/lm)
for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">sid</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">numpy.ndarray with retinal spectral irradiance in :sid_units: </div>
<div class="line">(if ‘uW/cm2’, sid will be converted to SI units ‘W/m2’)</div>
</div>
</dd>
<dt class="field-even">cieobs</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</dd>
<dt class="field-odd">sid_units</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘W/m2’, optional</div>
<div class="line">Other option ‘uW/m2’, input units of :sid:</div>
</div>
</dd>
<dt class="field-even">actionspectra</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘CIES026’, optional</div>
<div class="line">Actionspectra to use in calculation </div>
<div class="line">options: </div>
<div class="line">- ‘CIE-S026’: will use action spectra as defined in CIE S026 </div>
<div class="line">- ‘CIE-TN003’: will use action spectra as defined in CIE TN003</div>
</div>
</dd>
<dt class="field-odd">ref</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘D65’, optional</div>
<div class="line">Reference (daylight) spectrum to use. (‘D65’ or ‘E’ or ndarray)</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with the α-opic Efficacy of Luminous Radiation (W/lm) with the </div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc photoreceptors</div>
<div class="line">of all spectra in :sid: in SI-units. </div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_COI_ASNZS1680">
<code class="sig-prename descclassname">luxpy.toolboxes.photbiochem.</code><code class="sig-name descname">spd_to_COI_ASNZS1680</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">S</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tf</span><span class="o">=</span><span class="default_value">'lab'</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'COI,cct'</span></em>, <em class="sig-param"><span class="n">extrapolate_rfl</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/ASNZS_1680_2_5_1997_COI.html#spd_to_COI_ASNZS1680"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_COI_ASNZS1680" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Cyanosis Observation Index (COI) [ASNZS 1680.2.5-1995].</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">S</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with light source spectrum (first column are wavelengths).</div>
</div>
</dd>
<dt class="field-even">tf</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_COI_CSPACE, optional</div>
<div class="line">Color space in which to calculate the COI.</div>
<div class="line">Default is CIELAB.</div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_COI_CIEOBS, optional</div>
<div class="line">CMF set to use. </div>
<div class="line">Default is ‘1931_2’.</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘COI,cct’ or str, optional</div>
<div class="line">Determines output.</div>
</div>
</dd>
<dt class="field-odd">extrapolate_rfl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">If False: </div>
<div class="line-block">
<div class="line">limit the wavelength range of the source to that of the standard</div>
<div class="line">reflectance spectra for the 50% and 100% oxygenated blood.</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">COI</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with cyanosis indices for input sources.</div>
</div>
</dd>
<dt class="field-even">cct</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with correlated color temperatures.</div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><p>Clause 7.2 of the ASNZS 1680.2.5-1995. standard mentions the properties
demanded of the light source used in region where visual conditions 
suitable to the detection of cyanosis should be provided:</p>
<blockquote>
<div><p>1. The correlated color temperature (CCT) of the source should be from 
3300 to 5300 K.</p>
<ol class="arabic simple" start="2">
<li><p>The cyanosis observation index should not exceed 3.3</p></li>
</ol>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_CS_CLa_lrc">
<code class="sig-prename descclassname">luxpy.toolboxes.photbiochem.</code><code class="sig-name descname">spd_to_CS_CLa_lrc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">El</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">E</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sum_sources</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">interpolate_sources</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/circadian_CS_CLa_lrc.html#spd_to_CS_CLa_lrc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_CS_CLa_lrc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Circadian Stimulus (CS) and Circadian Light [LRC: Rea et al 2012].</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">El</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray, optional</div>
<div class="line">Defaults to D65</div>
<div class="line">light source spectral irradiance distribution</div>
</div>
</dd>
<dt class="field-even">E</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, float or ndarray, optional</div>
<div class="line">Illuminance of light sources.</div>
<div class="line">If None: El is used as is, otherwise El is renormalized to have</div>
<div class="line">an illuminance equal to E.</div>
</div>
</dd>
<dt class="field-odd">sum_sources</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line-block">
<div class="line">- False: calculate CS and CLa for all sources in El array.</div>
<div class="line">- True: sum sources in El to a single source and perform calc.</div>
</div>
</div>
</dd>
<dt class="field-even">interpolate_sources</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line-block">
<div class="line">- True: El is interpolated to wavelength range of efficiency </div>
<div class="line-block">
<div class="line">functions (as in LRC calculator). </div>
</div>
<div class="line">- False: interpolate efficiency functions to source range. </div>
<div class="line-block">
<div class="line">Source interpolation is not recommended due to possible</div>
<div class="line">errors for peaky spectra. </div>
<div class="line">(see CIE15-2004, “Colorimetry”).</div>
</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">CS</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with Circadian stimulus values</div>
</div>
</dd>
<dt class="field-even">CLa</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with Circadian Light values</div>
</div>
</dd>
</dl>
</dd>
<dt>Notes:</dt><dd><p>1. The original 2012 (E.q. 1) had set the peak wavelength of the 
melanopsin at 480 nm. Rea et al. later published a corrigendum with 
updated model parameters for k, a_{b-y} and a_rod. The comparison table
between showing values calculated for a number of sources with the old
and updated parameters were very close (~1 unit voor CLa).</p>
<p>2. In that corrrection paper they did not mention a change in the
factor (1622) that multiplies the (sum of) the integral(s) in Eq. 1. 
HOWEVER, the excel calculator released in 2017 and the online 
calculator show that factor to have a value of 1547.9. The change in
values due to the new factor is much larger than their the updated 
mentioned in note 1!</p>
<p>3. For reasons of consistency the calculator uses the latest model 
parameters, as could be read from the excel calculator. They values 
adopted are: multiplier 1547.9, k = 0.2616, a_{b-y} = 0.7 and 
a_rod = 3.3.</p>
<p>4. The parameter values to convert CLa to CS were also taken from the 
2017 excel calculator.</p>
</dd>
</dl>
<p>References:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><a class="reference external" href="http://www.lrc.rpi.edu/cscalculator/">LRC Online Circadian stimulus calculator</a></p></li>
<li><p><a class="reference external" href="http://www.lrc.rpi.edu/resources/CSCalculator_2017_10_03_Mac.xlsm">LRC Excel based Circadian stimulus calculator.</a></p></li>
</ol>
<p>3. <a class="reference external" href="https://doi.org/10.1177/1477153511430474">Rea MS, Figueiro MG, Bierman A, and Hamner R (2012). 
Modelling the spectral sensitivity of the human circadian system. 
Light. Res. Technol. 44, 386–396.</a></p>
<p>4. <a class="reference external" href="https://doi.org/10.1177/1477153512467607">Rea MS, Figueiro MG, Bierman A, and Hamner R (2012). 
Erratum: Modeling the spectral sensitivity of the human circadian system 
(Lighting Research and Technology (2012) 44:4 (386-396)). 
Light. Res. Technol. 44, 516.</a></p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_blh_eff">
<code class="sig-prename descclassname">luxpy.toolboxes.photbiochem.</code><code class="sig-name descname">spd_to_blh_eff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spd</span></em>, <em class="sig-param"><span class="n">efficacy</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">scr</span><span class="o">=</span><span class="default_value">'dict'</span></em>, <em class="sig-param"><span class="n">K</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/blue_light_hazard_IEC62471_IECTR62778.html#spd_to_blh_eff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_blh_eff" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Blue Light Hazard efficacy (K) or efficiency (eta) of radiation.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">S</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectral data</div>
</div>
</dd>
<dt class="field-even">cieobs</dt>
<dd class="field-even"><div class="line-block">
<div class="line">str, optional</div>
<div class="line">Sets the type of Vlambda function to obtain.</div>
</div>
</dd>
<dt class="field-odd">scr</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘dict’ or array, optional</div>
<div class="line">- ‘dict’: get from ybar from _CMF</div>
<div class="line">- ‘array’: ndarray in :cieobs:</div>
<div class="line">Determines whether to load cmfs from file (./data/cmfs/) </div>
<div class="line">or from dict defined in .cmf.py</div>
<div class="line">Vlambda is obtained by collecting Ybar.</div>
</div>
</dd>
<dt class="field-even">K</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line-block">
<div class="line">e.g.  K  = 683 lm/W for ‘1931_2’ (relative == False) </div>
<div class="line">or K = 100/sum(spd*dl)        (relative == True)</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">eff</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with blue light hazard efficacy or efficiency of radiation values.</div>
</div>
</dd>
</dl>
</dd>
<dt>References:</dt><dd><ol class="arabic simple">
<li><p>IEC 62471:2006, 2006, Photobiological safety of lamps and lamp systems.</p></li>
<li><p>IEC TR 62778, 2014, Application of IEC 62471 for the assessment of blue light hazard to light sources and luminaires.</p></li>
</ol>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="indvcmf">
<h2>indvcmf/<a class="headerlink" href="#indvcmf" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">py</dt>
<dd class="field-odd"><ul class="simple">
<li><p>__init__.py</p></li>
<li><p>individual_observer_cmf_model.py</p></li>
</ul>
</dd>
<dt class="field-even">namespace</dt>
<dd class="field-even"><p>luxpy.indvcmf</p>
</dd>
</dl>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.indvcmf"></span><div class="section" id="module-for-individual-observer-lms-cmfs-asano-2016-and-cie-tc1-97">
<h3>Module for Individual Observer lms-CMFs (Asano, 2016 and CIE TC1-97)<a class="headerlink" href="#module-for-individual-observer-lms-cmfs-asano-2016-and-cie-tc1-97" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">_DATA_PATH</dt>
<dd class="field-odd"><p>path to data files</p>
</dd>
<dt class="field-even">_DATA</dt>
<dd class="field-even"><p>Dict with required data</p>
</dd>
<dt class="field-odd">_DSRC_STD_DEF</dt>
<dd class="field-odd"><p>default data source for stdev of physiological data (‘matlab’, ‘germany’)</p>
</dd>
<dt class="field-even">_DSRC_LMS_ODENS_DEF</dt>
<dd class="field-even"><p>default data source for lms absorbances and optical densities (‘asano’, ‘cietc197’)</p>
</dd>
<dt class="field-odd">_LMS_TO_XYZ_METHOD</dt>
<dd class="field-odd"><p>default method to calculate lms to xyz conversion matrix (‘asano’, ‘cietc197’)</p>
</dd>
<dt class="field-even">_WL_CRIT</dt>
<dd class="field-even"><p>critical wavelength above which interpolation of S-cone data fails.</p>
</dd>
<dt class="field-odd">_WL</dt>
<dd class="field-odd"><p>default wavelengths of spectral data in INDVCMF_DATA.</p>
</dd>
<dt class="field-even">load_database()</dt>
<dd class="field-even"><p>Load a database with parameters and data required by the Asano model.</p>
</dd>
<dt class="field-odd">init()</dt>
<dd class="field-odd"><p>Initialize: load database required for Asano Individual Observer Model 
into the default _DATA dict and set some options for rounding, 
sign. figs and chopping small value to zero; for source data to use for 
spectral data for LMS absorp. and optical densities, …</p>
</dd>
<dt class="field-even">query_state()</dt>
<dd class="field-even"><p>print current settings for global variables.</p>
</dd>
<dt class="field-odd">compute_cmfs()</dt>
<dd class="field-odd"><p>Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and 
in physiological parameters (Use of Asano optical data and model; 
or of CIE TC1-91 data and ‘variability’-extended model possible).</p>
</dd>
<dt class="field-even">cie2006cmfsEx()</dt>
<dd class="field-even"><p>Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and 
in physiological parameters. (Use of Asano optical data and model; 
or of CIE TC1-91 data and ‘variability’-extended model possible)</p>
</dd>
<dt class="field-odd">getMonteCarloParam()</dt>
<dd class="field-odd"><p>Get dict with normally-distributed physiological 
factors for a population of observers.</p>
</dd>
<dt class="field-even">getUSCensusAgeDist()</dt>
<dd class="field-even"><p>Get US Census Age Distribution</p>
</dd>
<dt class="field-odd">genMonteCarloObs()</dt>
<dd class="field-odd"><p>Monte-Carlo generation of individual observer 
color matching functions (cone fundamentals) for a
certain age and field size.</p>
</dd>
<dt class="field-even">getCatObs()</dt>
<dd class="field-even"><p>Generate cone fundamentals for categorical observers.</p>
</dd>
<dt class="field-odd">get_lms_to_xyz_matrix()</dt>
<dd class="field-odd"><p>Calculate lms to xyz conversion matrix for a specific field 
size determined as a weighted combination of the 2° and 10° matrices.</p>
</dd>
<dt class="field-even">lmsb_to_xyzb()</dt>
<dd class="field-even"><p>Convert from LMS cone fundamentals to XYZ CMFs using conversion
matrix determined as a weighted combination of the 2° and 10° matrices.</p>
</dd>
<dt class="field-odd">add_to_cmf_dict()</dt>
<dd class="field-odd"><p>Add set of cmfs to _CMF dict.</p>
</dd>
<dt class="field-even">plot_cmfs()</dt>
<dd class="field-even"><p>Plot cmf set.</p>
</dd>
</dl>
</div></blockquote>
<div class="section" id="references">
<h4>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>1. <a class="reference external" href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L (2016). 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="https://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE TC1-36 (2006). 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
<p>5. <a class="reference external" href="https://github.com/ifarup/ciefunctions">CIE TC1-97 cmf functions python code developed by Ivar Farup and Jan Hendrik Wold.</a></p>
</div></blockquote>
</div>
<div class="section" id="notes">
<h4>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>1. Port of Matlab code from: 
<a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php</a>
(Accessed April 20, 2018)  
2. Adjusted/extended following CIE TC1-97 Python code (and data):
github.com/ifarup/ciefunctions (Copyright (C) 2012-2017 Ivar Farup and Jan Henrik Wold)     
(Accessed Dec 18, 2019)</p>
</div></blockquote>
<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.load_database">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">load_database</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dsrc_std</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dsrc_lms_odens</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#load_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.load_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Load database required for Asano Individual Observer Model.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Wavelength range to interpolate data to.</div>
<div class="line">None defaults to the wavelength range associated with data in :dsrc_lms_odens:</div>
</div>
</dd>
<dt class="field-even">path</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Path where data files are stored (If None: look in ./data/ folder under toolbox path)</div>
</div>
</dd>
<dt class="field-odd">dsrc_std</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘matlab’ code, or ‘germany’) for stdev data on physiological factors.</div>
<div class="line">None defaults to string in _DSRC_STD_DEF</div>
</div>
</dd>
<dt class="field-even">dsrc_lms_odens</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘asano’, ‘cietc197’) for LMS absorbance and optical density data.</div>
<div class="line">None defaults to string in _DSRC_LMS_ODENS_DEF</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">data</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dict with data for:</div>
<div class="line">- ‘LMSa’: LMS absorbances </div>
<div class="line">- ‘rmd’: relative macular pigment density </div>
<div class="line">- ‘docul’: ocular media optical density </div>
<div class="line">- ‘USCensus2010population’: data (age and numbers) on a 2010 US Census </div>
<div class="line">- ‘CatObsPfctr’: dict with iteratively derived Categorical Observer physiological stdevs.</div>
<div class="line">- ‘M2d’: Asano 2° lms to xyz conversion matrix </div>
<div class="line">- ‘M10d’: Asano 10° lms to xyz conversion matrix </div>
<div class="line">- standard deviations on physiological parameters: ‘od_lens’, ‘od_macula’, ‘od_L’, ‘od_M’, ‘od_S’, ‘shft_L’, ‘shft_M’, ‘shft_S’</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.init">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dsrc_std</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dsrc_lms_odens</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lms_to_xyz_method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">use_sign_figs</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_my_round</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_chop</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize: load database required for Asano Individual Observer Model 
into the default _DATA dict and set some options for rounding, 
sign. figs and chopping small value to zero; for source data to use for 
spectral data for LMS absorp. and optical desnities, …</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Wavelength range to interpolate data to.</div>
<div class="line">None defaults to the wavelength range associated with data in :dsrc_lms_odens:</div>
</div>
</dd>
<dt class="field-even">dsrc_std</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘matlab’ code, or ‘germany’) for stdev data on physiological factors.</div>
<div class="line">None defaults to string in _DSRC_STD_DEF</div>
</div>
</dd>
<dt class="field-odd">dsrc_lms_odens</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘asano’, ‘cietc197’) for LMS absorbance and optical density data.</div>
<div class="line">None defaults to string in _DSRC_LMS_ODENS_DEF</div>
</div>
</dd>
<dt class="field-even">lms_to_xyz_method</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</dd>
<dt class="field-odd">use_my_round</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">If True: use my_rounding() conform CIE TC1-91 Python code ‘ciefunctions’. (slows down code)</div>
<div class="line">by setting _USE_MY_ROUND.</div>
</div>
</dd>
<dt class="field-even">use_sign_figs</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">If True: use sign_figs() conform CIE TC1-91 Python code ‘ciefunctions’. (slows down code)</div>
<div class="line">by setting _USE_SIGN_FIGS.</div>
</div>
</dd>
<dt class="field-odd">use_chop</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">If True: use chop() conform CIE TC1-91 Python code ‘ciefunctions’. (slows down code)</div>
<div class="line">by setting _USE_CHOP.</div>
</div>
</dd>
<dt class="field-even">path</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Path where data files are stored (If None: look in ./data/ folder under toolbox path)</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If None: only set global variables, do not output _DATA.copy()</div>
</div>
</dd>
<dt class="field-even">verbosity</dt>
<dd class="field-even"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Print new state of global settings.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">data</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">if out is not None: return a dict with dict with data for:</div>
<div class="line">- ‘LMSa’: LMS absorbances </div>
<div class="line">- ‘rmd’: relative macular pigment density </div>
<div class="line">- ‘docul’: ocular media optical density </div>
<div class="line">- ‘USCensus2010population’: data (age and numbers) on a 2010 US Census </div>
<div class="line">- ‘CatObsPfctr’: dict with iteratively derived Categorical Observer physiological stdevs.</div>
<div class="line">- ‘M2d’: Asano 2° lms to xyz conversion matrix </div>
<div class="line">- ‘M10d’: Asano 10° lms to xyz conversion matrix </div>
<div class="line">- standard deviations on physiological parameters: ‘od_lens’, ‘od_macula’, ‘od_L’, ‘od_M’, ‘od_S’, ‘shft_L’, ‘shft_M’, ‘shft_S’</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.query_state">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">query_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#query_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.query_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Print current settings for ‘global variables’.</p>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.cie2006cmfsEx">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">cie2006cmfsEx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">age</span><span class="o">=</span><span class="default_value">32</span></em>, <em class="sig-param"><span class="n">fieldsize</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">var_od_lens</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">var_od_macula</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">var_od_L</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">var_od_M</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">var_od_S</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">var_shft_L</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">var_shft_M</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">var_shft_S</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">norm_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'lms'</span></em>, <em class="sig-param"><span class="n">base</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">strategy_2</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">odata0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lms_to_xyz_method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allow_negative_values</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">normalize_lms_to_xyz_matrix</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#cie2006cmfsEx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.cie2006cmfsEx" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and in physiological parameters.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">age</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">32 or float or int, optional</div>
<div class="line">Observer age</div>
</div>
</dd>
<dt class="field-even">fieldsize</dt>
<dd class="field-even"><div class="line-block">
<div class="line">10, optional</div>
<div class="line">Field size of stimulus in degrees (between 2° and 10°).</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line">None: output original _WL </div>
</div>
</dd>
<dt class="field-even">var_od_lens</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of lens.</div>
</div>
</dd>
<dt class="field-odd">var_od_macula</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of macula.</div>
</div>
</dd>
<dt class="field-even">var_od_L</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of L-cone.</div>
</div>
</dd>
<dt class="field-odd">var_od_M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of M-cone.</div>
</div>
</dd>
<dt class="field-even">var_od_S</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of S-cone.</div>
</div>
</dd>
<dt class="field-odd">var_shft_L</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak wavelength shift [nm] of L-cone. </div>
</div>
</dd>
<dt class="field-even">var_shft_L</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak wavelength shift [nm] of M-cone.  </div>
</div>
</dd>
<dt class="field-odd">var_shft_S</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak wavelength shift [nm] of S-cone. </div>
</div>
</dd>
<dt class="field-even">norm_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</dd>
<dt class="field-even">base</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</dd>
<dt class="field-odd">strategy_2</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</dd>
<dt class="field-even">odata0</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</dd>
<dt class="field-odd">lms_to_xyz_method</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</dd>
<dt class="field-even">allow_negative_values</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</dd>
<dt class="field-odd">normalize_lms_to_xyz_matrix</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">Normalize that EEW is always at [100,100,100] in XYZ and LMS system.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">- ‘LMS’ [or ‘XYZ’]: ndarray with individual observer equal area-normalized </div>
<div class="line-block">
<div class="line">cone fundamentals. Wavelength have been added.</div>
<div class="line"><br /></div>
</div>
<div class="line">[- ‘M’: lms to xyz conversion matrix</div>
<div class="line-block">
<div class="line">-  ‘trans_lens’: ndarray with lens transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘trans_macula’: ndarray with macula transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘sens_photopig’ : ndarray with photopigment sens. </div>
<div class="line-block">
<div class="line">(no interpolation)]</div>
</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>References:</dt><dd><p>1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L, (2016), 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE TC1-36, (2006), 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
<p>5. <a class="reference external" href="http://github.com/ifarup/ciefunctions">CIE TC1-97 Python code for cone fundamentals and XYZ cmf calculations 
(by Ivar Farup and Jan Henrik Wold, (c) 2012-2017)</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.getMonteCarloParam">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">getMonteCarloParam</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n_obs</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">stdDevAllParam</span><span class="o">=</span><span class="default_value">{'dsrc': 'matlab', 'od_L': 17.9, 'od_M': 17.9, 'od_S': 14.7, 'od_lens': 19.1, 'od_macula': 37.2, 'shft_L': 4.0, 'shft_M': 3.0, 'shft_S': 2.5}</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#getMonteCarloParam"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.getMonteCarloParam" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dict with normally-distributed physiological factors 
for a population of observers.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">n_obs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Number of individual observers in population.</div>
</div>
</dd>
<dt class="field-even">stdDevAllParam</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_DATA[‘stdev’], optional</div>
<div class="line">Dict with parameters for:</div>
<div class="line-block">
<div class="line">[‘od_lens’, ‘od_macula’, </div>
<div class="line-block">
<div class="line">‘od_L’, ‘od_M’, ‘od_S’, </div>
<div class="line">‘shft_L’, ‘shft_M’, ‘shft_S’]</div>
</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dict with n_obs randomly drawn parameters.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.genMonteCarloObs">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">genMonteCarloObs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n_obs</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">fieldsize</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">list_Age</span><span class="o">=</span><span class="default_value">[32]</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">norm_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'lms'</span></em>, <em class="sig-param"><span class="n">base</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">strategy_2</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">odata0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lms_to_xyz_method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allow_negative_values</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#genMonteCarloObs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.genMonteCarloObs" title="Permalink to this definition">¶</a></dt>
<dd><p>Monte-Carlo generation of individual observer cone fundamentals.</p>
<dl>
<dt>Args: </dt><dd><dl class="field-list">
<dt class="field-odd">n_obs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Number of observer CMFs to generate.</div>
</div>
</dd>
<dt class="field-even">list_Age</dt>
<dd class="field-even"><div class="line-block">
<div class="line">list of observer ages or str, optional</div>
<div class="line">Defaults to 32 (cfr. CIE2006 CMFs)</div>
<div class="line">If ‘us_census’: use US population census of 2010 </div>
<div class="line">to generate list_Age.</div>
</div>
</dd>
<dt class="field-odd">fieldsize</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">fieldsize in degrees (between 2° and 10°), optional</div>
<div class="line">Defaults to 10°.</div>
</div>
</dd>
<dt class="field-even">wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line">None: output original _WL </div>
</div>
</dd>
<dt class="field-odd">norm_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</dd>
<dt class="field-odd">base</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</dd>
<dt class="field-even">strategy_2</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</dd>
<dt class="field-odd">odata0</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</dd>
<dt class="field-even">lms_to_xyz_method</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</dd>
<dt class="field-odd">allow_negative_values</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">LMS [,var_age, vAll] </div>
<div class="line-block">
<div class="line">- LMS: ndarray with population LMS functions.</div>
<div class="line">- var_age: ndarray with population observer ages.</div>
<div class="line">- vAll: dict with population physiological factors (see .keys()) </div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>References:</dt><dd><p>1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y., Fairchild M.D., and Blondé L., (2016), 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE TC1-36, (2006), 
Fundamental Chromaticity Diagram with Physiological Axes - Part I. 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.getCatObs">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">getCatObs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n_cat</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">fieldsize</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">norm_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'lms'</span></em>, <em class="sig-param"><span class="n">base</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">strategy_2</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">odata0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lms_to_xyz_method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allow_negative_values</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#getCatObs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.getCatObs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate cone fundamentals for categorical observers.</p>
<dl>
<dt>Args: </dt><dd><dl class="field-list">
<dt class="field-odd">n_cat</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">10, optional</div>
<div class="line">Number of observer CMFs to generate.</div>
</div>
</dd>
<dt class="field-even">fieldsize</dt>
<dd class="field-even"><div class="line-block">
<div class="line">fieldsize in degrees (between 2° and 10°), optional</div>
<div class="line">Defaults to 10°.</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘LMS’ or str, optional</div>
<div class="line">Determines output.</div>
</div>
</dd>
<dt class="field-even">wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line-block">
<div class="line">None: output original _WL </div>
</div>
</div>
</dd>
<dt class="field-odd">norm_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</dd>
<dt class="field-odd">base</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</dd>
<dt class="field-even">strategy_2</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</dd>
<dt class="field-odd">odata0</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</dd>
<dt class="field-even">lms_to_xyz_method</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</dd>
<dt class="field-odd">allow_negative_values</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">LMS [,var_age, vAll] </div>
<div class="line-block">
<div class="line">- LMS: ndarray with population LMS functions.</div>
<div class="line">- var_age: ndarray with population observer ages.</div>
<div class="line">- vAll: dict with population physiological factors (see .keys()) </div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Notes:</dt><dd><p>1. Categorical observers are observer functions that would represent 
color-normal populations. They are finite and discrete as opposed to 
observer functions generated from the individual colorimetric observer 
model. Thus, they would offer more convenient and practical approaches
for the personalized color imaging workflow and color matching analyses.
Categorical observers were derived in two steps. 
At the first step, 10000 observer functions were generated from the 
individual colorimetric observer model using Monte Carlo simulation. 
At the second step, the cluster analysis, a modified k-medoids 
algorithm, was applied to the 10000 observers minimizing the squared 
Euclidean distance in cone fundamentals space, and categorical 
observers were derived iteratively. Since the proposed categorical 
observers are defined by their physiological parameters and ages, their
CMFs can be derived for any target field size.
2. Categorical observers were ordered by the importance; 
the first categorical observer vas the average observer equivalent to 
CIEPO06 with 38 year-old for a given field size, followed by the second
most important categorical observer, the third, and so on.</p>
<ol class="arabic simple" start="3">
<li><p>see: <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php</a></p></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.compute_cmfs">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">compute_cmfs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fieldsize</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">age</span><span class="o">=</span><span class="default_value">32</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">var_od_lens</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">var_od_macula</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">var_shft_LMS</span><span class="o">=</span><span class="default_value">[0, 0, 0]</span></em>, <em class="sig-param"><span class="n">var_od_LMS</span><span class="o">=</span><span class="default_value">[0, 0, 0]</span></em>, <em class="sig-param"><span class="n">norm_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'lms'</span></em>, <em class="sig-param"><span class="n">base</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">strategy_2</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">odata0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lms_to_xyz_method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allow_negative_values</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">normalize_lms_to_xyz_matrix</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#compute_cmfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.compute_cmfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and in physiological parameters.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">age</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">32 or float or int, optional</div>
<div class="line">Observer age</div>
</div>
</dd>
<dt class="field-even">fieldsize</dt>
<dd class="field-even"><div class="line-block">
<div class="line">10, optional</div>
<div class="line">Field size of stimulus in degrees (between 2° and 10°).</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line">None: output original _WL</div>
</div>
</dd>
<dt class="field-even">var_od_lens</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Variation of optical density of lens.</div>
</div>
</dd>
<dt class="field-odd">var_od_macula</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Variation of optical density of macula.</div>
</div>
</dd>
<dt class="field-even">var_shft_LMS</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[0, 0, 0] optional</div>
<div class="line">Variation (shift) of LMS peak absorptance.</div>
</div>
</dd>
<dt class="field-odd">var_od_LMS</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0, 0, 0] optional</div>
<div class="line">Variation of LMS optical densities.</div>
</div>
</dd>
<dt class="field-even">norm_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</dd>
<dt class="field-even">base</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</dd>
<dt class="field-odd">strategy_2</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</dd>
<dt class="field-even">odata0</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</dd>
<dt class="field-odd">lms_to_xyz_method</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</dd>
<dt class="field-even">allow_negative_values</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</dd>
<dt class="field-odd">normalize_lms_to_xyz_matrix</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">Normalize that EEW is always at [100,100,100] in XYZ and LMS system.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">- ‘LMS’ [or ‘XYZ’]: ndarray with individual observer equal area-normalized </div>
<div class="line-block">
<div class="line">cone fundamentals. Wavelength have been added.</div>
<div class="line"><br /></div>
</div>
<div class="line">[- ‘M’: lms to xyz conversion matrix</div>
<div class="line-block">
<div class="line">-  ‘trans_lens’: ndarray with lens transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘trans_macula’: ndarray with macula transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘sens_photopig’ : ndarray with photopigment sens. </div>
<div class="line-block">
<div class="line">(no interpolation)]</div>
</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>References:</dt><dd><p>1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L, (2016), 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE, TC1-36, (2006). 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
<p>5. <a class="reference external" href="http://github.com/ifarup/ciefunctions">CIE TC1-97 Python code for cone fundamentals and XYZ cmf calculations 
(by Ivar Farup and Jan Henrik Wold, (c) 2012-2017)</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.add_to_cmf_dict">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">add_to_cmf_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bar</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'indv'</span></em>, <em class="sig-param"><span class="n">K</span><span class="o">=</span><span class="default_value">683</span></em>, <em class="sig-param"><span class="n">M</span><span class="o">=</span><span class="default_value">array([[1.0, 0.0, 0.0], [0.0, 1.0, 0.0], [0.0, 0.0, 1.0]])</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#add_to_cmf_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.add_to_cmf_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Add set of cmfs to _CMF dict.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">bar</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Set of CMFs. None: initializes to empty ndarray.</div>
</div>
</dd>
<dt class="field-even">cieobs</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘indv’ or str, optional</div>
<div class="line">Name of CMF set.</div>
</div>
</dd>
<dt class="field-odd">K</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">683 (lm/W), optional</div>
<div class="line">Conversion factor from radiometric to photometric quantity.</div>
</div>
</dd>
<dt class="field-even">M</dt>
<dd class="field-even"><div class="line-block">
<div class="line">np.eye, optional</div>
<div class="line">Matrix for lms to xyz conversion.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.indvcmf.plot_cmfs">
<code class="sig-prename descclassname">luxpy.toolboxes.indvcmf.</code><code class="sig-name descname">plot_cmfs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmf</span></em>, <em class="sig-param"><span class="n">axh</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#plot_cmfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.plot_cmfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot cmf set.</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="spdbuild">
<h2>spdbuild/<a class="headerlink" href="#spdbuild" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">py</dt>
<dd class="field-odd"><ul class="simple">
<li><p>__init__.py</p></li>
<li><p>spdbuilder.py</p></li>
<li><p>spdbuilder2020.py</p></li>
<li><p>spdoptimzer2020.py</p></li>
</ul>
</dd>
<dt class="field-even">namespace</dt>
<dd class="field-even"><p>luxpy.spdbuild/</p>
</dd>
</dl>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.spdbuild"></span><div class="section" id="module-for-building-and-optimizing-spds">
<h3>Module for building and optimizing SPDs<a class="headerlink" href="#module-for-building-and-optimizing-spds" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>spdbuilder.py</p>
</div></blockquote>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">gaussian_spd()</dt>
<dd class="field-odd"><p>Generate Gaussian spectrum.</p>
</dd>
<dt class="field-even">butterworth_spd()</dt>
<dd class="field-even"><p>Generate Butterworth based spectrum.</p>
</dd>
<dt class="field-odd">lorentzian2_spd()</dt>
<dd class="field-odd"><p>Generate 2nd order Lorentzian based spectrum.</p>
</dd>
<dt class="field-even">roundedtriangle_spd()</dt>
<dd class="field-even"><p>Generate a rounded triangle based spectrum.</p>
</dd>
<dt class="field-odd">mono_led_spd()</dt>
<dd class="field-odd"><p>Generate monochromatic LED spectrum based on a Gaussian 
or butterworth profile or according to Ohno (Opt. Eng. 2005).</p>
</dd>
<dt class="field-even">spd_builder()</dt>
<dd class="field-even"><p>Build spectrum based on Gaussians, monochromatic 
and/or phophor LED spectra.</p>
</dd>
<dt class="field-odd">color3mixer()</dt>
<dd class="field-odd"><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing 3 light sources.</p>
</dd>
<dt class="field-even">colormixer()</dt>
<dd class="field-even"><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing N light sources.</p>
</dd>
<dt class="field-odd">colormixer_pinv()</dt>
<dd class="field-odd"><p>Additive color mixer of N primaries using using Moore-Penrose pseudo-inverse matrix.</p>
</dd>
<dt class="field-even">spd_builder()</dt>
<dd class="field-even"><p>Build spectrum based on Gaussians, monochromatic 
and/or phophor LED-type spectra.</p>
</dd>
<dt class="field-odd">get_w_summed_spd()</dt>
<dd class="field-odd"><p>Calculate weighted sum of spds.</p>
</dd>
<dt class="field-even">fitnessfcn()</dt>
<dd class="field-even"><p>Fitness function that calculates closeness of solution x to 
target values for specified objective functions.</p>
</dd>
<dt class="field-odd">spd_constructor_2()</dt>
<dd class="field-odd"><p>Construct spd from spectral model parameters 
using pairs of intermediate sources.</p>
</dd>
<dt class="field-even">spd_constructor_3()</dt>
<dd class="field-even"><p>Construct spd from spectral model parameters 
using trio’s of intermediate sources.</p>
</dd>
<dt class="field-odd">spd_optimizer_2_3()</dt>
<dd class="field-odd"><p>Optimizes the weights (fluxes) of a set of component 
spectra by combining pairs (2) or trio’s (3) of 
components to intermediate sources until only 3 remain.
Color3mixer can then be called to calculate required 
fluxes to obtain target chromaticity and fluxes are 
then back-calculated.</p>
</dd>
<dt class="field-even">get_optim_pars_dict()</dt>
<dd class="field-even"><p>Setup dict with optimization parameters.</p>
</dd>
<dt class="field-odd">initialize_spd_model_pars()</dt>
<dd class="field-odd"><p>Initialize spd_model_pars (for spd_constructor)
based on type of component_data.</p>
</dd>
<dt class="field-even">initialize_spd_optim_pars()</dt>
<dd class="field-even"><p>Initialize spd_optim_pars (x0, lb, ub for use
with math.minimizebnd) based on type 
of component_data.</p>
</dd>
<dt class="field-odd">spd_optimizer()</dt>
<dd class="field-odd"><p>Generate a spectrum with specified white point and optimized
for certain objective functions from a set of component 
spectra or component spectrum model parameters.</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="module-for-building-and-optimizing-spds-2">
<h3>Module for building and optimizing SPDs (2)<a class="headerlink" href="#module-for-building-and-optimizing-spds-2" title="Permalink to this headline">¶</a></h3>
<p>This module implements a class based spectral optimizer. It differs from 
the spdoptimizer function in spdbuild.py, in that it can use several 
different minimization algorithms, as well as a user defined method. 
It is also written such that the user can easily write his own
primary constructor function. It supports the ‘3mixer’ algorithm 
(but no ‘2mixer’) and a ‘no-mixer’ algorithm (chromaticity as part of the list
of objectives) for calculating the mixing contributions of the primaries.</p>
<div class="section" id="id15">
<h4>Functions<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">gaussian_prim_constructor()</dt>
<dd class="field-odd"><p>constructs a gaussian based primary set.</p>
</dd>
<dt class="field-even">_setup_wlr()</dt>
<dd class="field-even"><p>Initialize the wavelength range for use with PrimConstructor.</p>
</dd>
<dt class="field-odd">_extract_prim_optimization_parameters()</dt>
<dd class="field-odd"><p>Extract the primary parameters from the optimization vector x and the pdefs dict for use with PrimConstructor.</p>
</dd>
<dt class="field-even">_stack_wlr_spd()</dt>
<dd class="field-even"><p>Stack the wavelength range ‘on top’ of the spd values for use with PrimConstructor.</p>
</dd>
<dt class="field-odd">PrimConstructor</dt>
<dd class="field-odd"><p>class for primary (spectral) construction</p>
</dd>
<dt class="field-even">Minimizer</dt>
<dd class="field-even"><p>class for minimization of fitness of each of the objective functions</p>
</dd>
<dt class="field-odd">ObjFcns</dt>
<dd class="field-odd"><p>class to specify one or more objective functions for minimization</p>
</dd>
<dt class="field-even">SpectralOptimizer</dt>
<dd class="field-even"><p>class for spectral optimization (initialization and run)</p>
</dd>
<dt class="field-odd">spd_optimizer2()</dt>
<dd class="field-odd"><p>Generate a spectrum with specified white point and optimized
for certain objective functions from a set of component 
spectra or component spectrum model parameters 
(functional wrapper around SpectralOptimizer class).</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id16">
<h4>Notes<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li><p>See examples below (in spdoptimizer2020.’__main__’) for use.</p></li>
</ol>
</div></blockquote>
<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.gaussian_spd">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">gaussian_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">peakwl</span><span class="o">=</span><span class="default_value">530</span></em>, <em class="sig-param"><span class="n">fwhm</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">with_wl</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#gaussian_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.gaussian_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Gaussian spectrum.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">peakw</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</dd>
<dt class="field-even">fwhm</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian.</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</dd>
<dt class="field-even">with_wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectra. </div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><div class="line-block">
<div class="line">Gaussian:</div>
<div class="line-block">
<div class="line">g = exp(-0.5*((wl - peakwl)/sig)**2)</div>
</div>
<div class="line">with sig = fwhm/(2*(2*np.log(2))**0.5) </div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.butterworth_spd">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">butterworth_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">peakwl</span><span class="o">=</span><span class="default_value">530</span></em>, <em class="sig-param"><span class="n">fwhm</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">bw_order</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">with_wl</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#butterworth_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.butterworth_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Butterworth based spectrum.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">peakw</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</dd>
<dt class="field-even">fwhm</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of butterworth.</div>
</div>
</dd>
<dt class="field-odd">bw_order</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Order of the butterworth function.</div>
</div>
</dd>
<dt class="field-even">wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</dd>
<dt class="field-odd">with_wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectra.    </div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><div class="line-block">
<div class="line">Butterworth :</div>
<div class="line-block">
<div class="line">bw = 1 / (1 + ((2*(wl - peakwl)/fwhm)**2))</div>
</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.lorentzian2_spd">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">lorentzian2_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">peakwl</span><span class="o">=</span><span class="default_value">530</span></em>, <em class="sig-param"><span class="n">fwhm</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">with_wl</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#lorentzian2_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.lorentzian2_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 2nd order Lorentzian spectrum.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">peakw</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</dd>
<dt class="field-even">fwhm</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of lorentzian.</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</dd>
<dt class="field-even">with_wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectra. </div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><div class="line-block">
<div class="line">Lorentzian (2nd order):</div>
<div class="line-block">
<div class="line">lz = (1 + ((n*(wl - peakwl)/fwhm)**2))**(-2)</div>
<div class="line-block">
<div class="line">with n = 2*(2**0.5-1)**0.5</div>
</div>
</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.roundedtriangle_spd">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">roundedtriangle_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">peakwl</span><span class="o">=</span><span class="default_value">530</span></em>, <em class="sig-param"><span class="n">fwhm</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">rounding</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">with_wl</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">min_</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">max_</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">fw</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">rw</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#roundedtriangle_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.roundedtriangle_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate rounded triangle spectrum.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">peakw</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</dd>
<dt class="field-even">fwhm</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of rounded triangle.</div>
</div>
</dd>
<dt class="field-odd">rounding</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Amount of rounding of triangle corners (top, bottom-left, bottom-right)</div>
</div>
</dd>
<dt class="field-even">wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</dd>
<dt class="field-odd">with_wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</dd>
<dt class="field-even"><a href="#id21"><span class="problematic" id="id22">min_</span></a>, <a href="#id23"><span class="problematic" id="id24">max_</span></a></dt>
<dd class="field-even"><div class="line-block">
<div class="line">0.0, 1.0, optional</div>
<div class="line">Minimum and maximum of spd.</div>
</div>
</dd>
<dt class="field-odd">fw</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">100, optional</div>
<div class="line">front width of triangle.</div>
<div class="line">Only used when fwhm is set to None.</div>
</div>
</dd>
<dt class="field-even">rw</dt>
<dd class="field-even"><div class="line-block">
<div class="line">100, optional</div>
<div class="line">rear width of triangle.</div>
<div class="line">Only used when fwhm is set to None.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectra. </div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.mono_led_spd">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">mono_led_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">peakwl</span><span class="o">=</span><span class="default_value">530</span></em>, <em class="sig-param"><span class="n">fwhm</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">with_wl</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">strength_shoulder</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">bw_order</span><span class="o">=</span><span class="default_value">- 1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#mono_led_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.mono_led_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate monochromatic LED spectrum based on a Gaussian or or Lorentzian or butterworth
profile or according to Ohno (Opt. Eng. 2005).</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">peakw</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</dd>
<dt class="field-even">fwhm</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate led.</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional </div>
<div class="line-block">
<div class="line">Wavelength range.</div>
</div>
</div>
</dd>
<dt class="field-even">with_wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</dd>
<dt class="field-odd">strength_shoulder</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">2, optional</div>
<div class="line">Determines the strength of the spectrum shoulders of the mono led.</div>
<div class="line">A value of 0 reduces to a pure Gaussian model (if bw_order &gt;= -1).</div>
</div>
</dd>
<dt class="field-even">bw_order</dt>
<dd class="field-even"><div class="line-block">
<div class="line">-1, optional</div>
<div class="line">Order of Butterworth function.</div>
<div class="line">If -1 or 0: spd profile is Ohno’s gaussian based</div>
<div class="line-block">
<div class="line">(to obtain pure Gaussian: set strength_shoulder = 0).</div>
</div>
<div class="line">If -2: spd profile is Lorentzian,</div>
<div class="line">else (&gt;0): Butterworth.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectra.   </div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><div class="line-block">
<div class="line">Gaussian:</div>
<div class="line-block">
<div class="line">g = exp(-0.5*((wl - peakwl)/sig)**2)</div>
</div>
<div class="line">with sig = fwhm/(2*(2*np.log(2))**0.5) </div>
<div class="line"><br /></div>
<div class="line">Lorentzian (2nd order):</div>
<div class="line-block">
<div class="line">lz = (1 + ((n*(wl - peakwl)/fwhm)**2))**(-2)</div>
<div class="line-block">
<div class="line">with n = 2*(2**0.5-1)**0.5</div>
<div class="line"><br /></div>
</div>
</div>
<div class="line">Butterworth :</div>
<div class="line-block">
<div class="line">bw = 1 / (1 + ((2*(wl - peakwl)/fwhm)**2))</div>
<div class="line"><br /></div>
</div>
<div class="line">Ohno’s model:</div>
<div class="line-block">
<div class="line">ohno = (g + strength_shoulder*g**5)/(1+strength_shoulder)</div>
<div class="line"><br /></div>
<div class="line">mono_led_spd = ohno*((bw_order &gt;= -1) &amp; (bw_order &lt;= 0)).T + bw*(bw_order &gt; 0).T + lz*((bw_order &gt;=-2) &amp; (bw_order &lt; -1)).T</div>
</div>
</div>
</dd>
<dt>Reference:</dt><dd><p>1. <a class="reference external" href="https://ws680.nist.gov/publication/get_pdf.cfm?pub_id=841839">Ohno Y (2005). 
Spectral design considerations for white LED color rendering. 
Opt. Eng. 44, 111302.</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.phosphor_led_spd">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">phosphor_led_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">peakwl</span><span class="o">=</span><span class="default_value">450</span></em>, <em class="sig-param"><span class="n">fwhm</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">bw_order</span><span class="o">=</span><span class="default_value">- 1</span></em>, <em class="sig-param"><span class="n">with_wl</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">strength_shoulder</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">strength_ph</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">peakwl_ph1</span><span class="o">=</span><span class="default_value">530</span></em>, <em class="sig-param"><span class="n">fwhm_ph1</span><span class="o">=</span><span class="default_value">80</span></em>, <em class="sig-param"><span class="n">strength_ph1</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">peakwl_ph2</span><span class="o">=</span><span class="default_value">560</span></em>, <em class="sig-param"><span class="n">fwhm_ph2</span><span class="o">=</span><span class="default_value">80</span></em>, <em class="sig-param"><span class="n">strength_ph2</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">use_piecewise_fcn</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'spd'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#phosphor_led_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.phosphor_led_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate phosphor LED spectrum with up to 2 phosphors based on Smet (Opt. Expr. 2011).</p>
<div class="line-block">
<div class="line">Model:</div>
<div class="line-block">
<div class="line">1) If strength_ph2 is not None:</div>
<div class="line-block">
<div class="line-block">
<div class="line">phosphor_spd = (strength_ph1*mono_led_spd(peakwl_ph1, …, strength_shoulder = 1) </div>
<div class="line-block">
<div class="line">+ strength_ph2)*mono_led_spd(peakwl_ph2, …, strength_shoulder = 1)) </div>
<div class="line-block">
<div class="line">/ (strength_ph1 + strength_ph2)</div>
</div>
</div>
</div>
<div class="line">else:</div>
<div class="line-block">
<div class="line">phosphor_spd = (strength_ph1*mono_led_spd(peakwl_ph1, …, strength_shoulder = 1) </div>
<div class="line-block">
<div class="line">+ (1-strength_ph1)*mono_led_spd(peakwl_ph2, …, strength_shoulder = 1)) </div>
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="line">2) S = (mono_led_spd() + strength_ph*(phosphor_spd/phosphor_spd.max()))/(1 + strength_ph)</div>
<div class="line"><br /></div>
<div class="line">3) piecewise_fcn = S for wl &lt; peakwl and 1 for wl &gt;= peakwl</div>
<div class="line"><br /></div>
<div class="line">4) phosphor_led_spd = S*piecewise_fcn </div>
</div>
</div>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">peakw</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelengths of the monochromatic led.</div>
</div>
</dd>
<dt class="field-even">fwhm</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of mono_led spectrum.</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</dd>
<dt class="field-even">bw_order</dt>
<dd class="field-even"><div class="line-block">
<div class="line">-1, optional</div>
<div class="line">Order of Butterworth function.</div>
<div class="line">If -1 or 0: spd profile is Ohno’s gaussian based</div>
<div class="line-block">
<div class="line">(to obtain pure Gaussian: set strength_shoulder = 0).</div>
</div>
<div class="line">If -2: spd profile is Lorentzian,</div>
<div class="line">else (&gt;0): Butterworth.</div>
<div class="line">Note that this only applies to the monochromatic led  spds and not </div>
<div class="line">the phosphors spds (these are always gaussian based).</div>
</div>
</dd>
<dt class="field-odd">with_wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</dd>
<dt class="field-even">strength_shoulder</dt>
<dd class="field-even"><div class="line-block">
<div class="line">2, optiona l</div>
<div class="line">Determines the strength of the spectrum shoulders of the mono led.</div>
</div>
</dd>
<dt class="field-odd">strength_ph</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Total contribution of phosphors in mixture.</div>
</div>
</dd>
<dt class="field-even">peakwl_ph1</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the first phosphor.</div>
</div>
</dd>
<dt class="field-odd">fwhm_ph1</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate first phosphor.</div>
</div>
</dd>
<dt class="field-even">strength_ph1</dt>
<dd class="field-even"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Strength of first phosphor in phosphor mixture. </div>
<div class="line">If :strength_ph2: is None: value should be in the [0,1] range.</div>
</div>
</dd>
<dt class="field-odd">peakwl_ph2</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the second phosphor.</div>
</div>
</dd>
<dt class="field-even">fwhm_ph2</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate second phosphor.</div>
</div>
</dd>
<dt class="field-odd">strength_ph2</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Strength of second phosphor in phosphor mixture. </div>
<div class="line">If None: strength is calculated as (1-:strength_ph1:)</div>
<div class="line-block">
<div class="line-block">
<div class="line">:target: np2d([100,1/3,1/3]), optional</div>
</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</div>
</dd>
<dt class="field-even">verbosity</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: plots spectrum components (mono_led, ph1, ph2, …)</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘spd’, optional</div>
<div class="line">Specifies output.</div>
</div>
</dd>
<dt class="field-even">use_piecewise_fcn</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">True: uses piece-wise function as in Smet et al. 2011. Can give </div>
<div class="line">non_smooth spectra optimized from components to which it is applied. </div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">spd, component_spds</div>
<div class="line">ndarrays with spectra (and component spds used to build the </div>
<div class="line">final spectra) </div>
</div>
</dd>
</dl>
</dd>
<dt>References:</dt><dd><p>1. <a class="reference external" href="https://ws680.nist.gov/publication/get_pdf.cfm?pub_id=841839">Ohno Y (2005). 
Spectral design considerations for white LED color rendering. 
Opt. Eng. 44, 111302.</a></p>
<p>2. <a class="reference external" href="https://www.osapublishing.org/vjbo/fulltext.cfm?uri=oe-19-7-6903&amp;id=211315">Smet K, Ryckaert WR, Pointer MR, Deconinck G, and Hanselaer P (2011). 
Optimal colour quality of LED clusters based on memory colours. 
Opt. Express 19, 6903–6912.</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.spd_builder">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">spd_builder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flux</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">component_spds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">peakwl</span><span class="o">=</span><span class="default_value">450</span></em>, <em class="sig-param"><span class="n">fwhm</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">bw_order</span><span class="o">=</span><span class="default_value">- 1</span></em>, <em class="sig-param"><span class="n">pair_strengths</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">with_wl</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">strength_shoulder</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">strength_ph</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">peakwl_ph1</span><span class="o">=</span><span class="default_value">530</span></em>, <em class="sig-param"><span class="n">fwhm_ph1</span><span class="o">=</span><span class="default_value">80</span></em>, <em class="sig-param"><span class="n">strength_ph1</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">peakwl_ph2</span><span class="o">=</span><span class="default_value">560</span></em>, <em class="sig-param"><span class="n">fwhm_ph2</span><span class="o">=</span><span class="default_value">80</span></em>, <em class="sig-param"><span class="n">strength_ph2</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">target</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tar_type</span><span class="o">=</span><span class="default_value">'Yuv'</span></em>, <em class="sig-param"><span class="n">cspace_bwtf</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">use_piecewise_fcn</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'spd'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Build spectrum based on Gaussian, monochromatic and/or phophor type spectra.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">flux</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Fluxes of each of the component spectra.</div>
<div class="line">None outputs the individual component spectra.</div>
</div>
</dd>
<dt class="field-even">component_spds</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None or ndarray, optional</div>
<div class="line">If None: calculate component spds from input args.</div>
</div>
</dd>
<dt class="field-odd">peakw</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelengths of the monochromatic led.</div>
</div>
</dd>
<dt class="field-even">fwhm</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional (but must be same shape as peakw!)</div>
<div class="line">Full-Width-Half-Maximum of gaussian.</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelength range.</div>
</div>
</dd>
<dt class="field-even">bw_order</dt>
<dd class="field-even"><div class="line-block">
<div class="line">-1, optional</div>
<div class="line">Order of Butterworth function.</div>
<div class="line">If -1 or 0: spd profile is Ohno’s gaussian based</div>
<div class="line-block">
<div class="line">(to obtain pure Gaussian: set strength_shoulder = 0).</div>
</div>
<div class="line">If -2: spd profile is Lorentzian,</div>
<div class="line">else (&gt;0): Butterworth.</div>
<div class="line">Note that this only applies to the monochromatic led  spds and not </div>
<div class="line">the phosphors spds (these are always gaussian based).</div>
</div>
</dd>
<dt class="field-odd">pair_strengths</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with pair_strengths of mono_led spds, optional</div>
<div class="line">If None: will be randomly selected, possibly resulting in </div>
<div class="line">unphysical (out-of-gamut) solution.</div>
</div>
</dd>
<dt class="field-even">with_wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</dd>
<dt class="field-odd">strength_shoulder</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">2, optiona l</div>
<div class="line">Determines the strength of the spectrum shoulders of the mono led.</div>
</div>
</dd>
<dt class="field-even">strength_ph</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Total contribution of phosphors in mixture.</div>
</div>
</dd>
<dt class="field-odd">peakwl_ph1</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the first phosphor.</div>
</div>
</dd>
<dt class="field-even">fwhm_ph1</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate first phosphor.</div>
</div>
</dd>
<dt class="field-odd">strength_ph1</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Strength of first phosphor in phosphor mixture. </div>
<div class="line">If :strength_ph2: is None: value should be in the [0,1] range.</div>
</div>
</dd>
<dt class="field-even">peakwl_ph2</dt>
<dd class="field-even"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the second phosphor.</div>
</div>
</dd>
<dt class="field-odd">fwhm_ph2</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate second phosphor.</div>
</div>
</dd>
<dt class="field-even">strength_ph2</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Strength of second phosphor in phosphor mixture. </div>
<div class="line">If None: strength is calculated as (1-:strength_ph1:)</div>
<div class="line-block">
<div class="line-block">
<div class="line">:target: np2d([100,1/3,1/3]), optional</div>
</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</div>
</dd>
<dt class="field-odd">verbosity</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: plots spectrum components (mono_led, ph1, ph2, …)</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘spd’, optional</div>
<div class="line">Specifies output.</div>
</div>
</dd>
<dt class="field-odd">use_piecewise_fcn</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">True: uses piece-wise function as in Smet et al. 2011. Can give </div>
<div class="line">non_smooth spectra optimized from components to which it is</div>
<div class="line">applied. </div>
</div>
</dd>
<dt class="field-even">target</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
<div class="line">If None: don’t override phosphor strengths, else calculate strength</div>
<div class="line-block">
<div class="line">to obtain :target: using color3mixer().</div>
</div>
<div class="line">If not None AND strength_ph is None or 0: components are </div>
<div class="line">monochromatic and colormixer is used to optimize fluxes to </div>
<div class="line">obtain target chromaticity (N can be &gt; 3 components)</div>
</div>
</dd>
<dt class="field-odd">tar_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘Yxy’ or str, optional</div>
<div class="line">Specifies the input type in :target: (e.g. ‘Yxy’ or ‘cct’)</div>
</div>
</dd>
<dt class="field-even">cieobs</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values.</div>
</div>
</dd>
<dt class="field-odd">cspace_bwtf</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">{}, optional</div>
<div class="line">Backward (…_to_xyz) transform parameters </div>
<div class="line">(see colortf()) to go from :tar_type: to ‘Yxy’)</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectra.  </div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><p>1. Target-optimization is only for phophor_leds with three components 
(blue pump, ph1 and ph2) spanning a sufficiently large gamut.</p>
</dd>
<dt>References:</dt><dd><p>1. <a class="reference external" href="https://ws680.nist.gov/publication/get_pdf.cfm?pub_id=841839">Ohno Y (2005). 
Spectral design considerations for white LED color rendering. 
Opt. Eng. 44, 111302.</a></p>
<p>2. <a class="reference external" href="https://www.osapublishing.org/vjbo/fulltext.cfm?uri=oe-19-7-6903&amp;id=211315">Smet K, Ryckaert WR, Pointer MR, Deconinck G, and Hanselaer P (2011). 
Optimal colour quality of LED clusters based on memory colours. 
Opt. Express 19, 6903–6912.</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.get_w_summed_spd">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">get_w_summed_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">w</span></em>, <em class="sig-param"><span class="n">spds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#get_w_summed_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.get_w_summed_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate weighted sum of spds.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">w</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with weigths (e.g. fluxes)</div>
</div>
</dd>
<dt class="field-even">spds</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with component spds.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with weighted sum.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.fitnessfcn">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">fitnessfcn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">spd_constructor</span></em>, <em class="sig-param"><span class="n">spd_constructor_pars</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">F_rss</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">decimals</span><span class="o">=</span><span class="default_value">[3]</span></em>, <em class="sig-param"><span class="n">obj_fcn</span><span class="o">=</span><span class="default_value">[None]</span></em>, <em class="sig-param"><span class="n">obj_fcn_pars</span><span class="o">=</span><span class="default_value">[{}]</span></em>, <em class="sig-param"><span class="n">obj_fcn_weights</span><span class="o">=</span><span class="default_value">[1]</span></em>, <em class="sig-param"><span class="n">obj_tar_vals</span><span class="o">=</span><span class="default_value">[0]</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'F'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#fitnessfcn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.fitnessfcn" title="Permalink to this definition">¶</a></dt>
<dd><p>Fitness function that calculates closeness of solution x to target values 
for specified objective functions.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">x</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with parameter values</div>
</div>
</dd>
<dt class="field-even">spd_constructor</dt>
<dd class="field-even"><div class="line-block">
<div class="line">function handle to a function that constructs the spd
from parameter values in :x:.</div>
</div>
</dd>
<dt class="field-odd">spd_constructor_pars</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional,</div>
<div class="line">Parameters required by :spd_constructor:</div>
</div>
</dd>
<dt class="field-even">F_rss</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Take Root-Sum-of-Squares of ‘closeness’ values between target and </div>
<div class="line">objective function values.</div>
</div>
</dd>
<dt class="field-odd">decimals</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">3, optional</div>
<div class="line">List of rounding decimals of objective function values.</div>
</div>
</dd>
<dt class="field-even">obj_fcn</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[None] or list, optional</div>
<div class="line">List of function handles to objective function.</div>
</div>
</dd>
<dt class="field-odd">obj_fcn_weights</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">List of weigths for each obj. fcn</div>
</div>
</dd>
<dt class="field-even">obj_fcn_pars</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[None] or list, optional</div>
<div class="line">List of parameter dicts for each obj. fcn.</div>
</div>
</dd>
<dt class="field-odd">obj_tar_vals</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0] or list, optional</div>
<div class="line">List of target values for each objective function.</div>
</div>
</dd>
<dt class="field-even">verbosity</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘F’, optional</div>
<div class="line">Determines output.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">F</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">float or ndarray with fitness value for current solution :x:.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.spd_constructor_2">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">spd_constructor_2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">constructor_pars</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_constructor_2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_constructor_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct spd from model parameters using pairs of intermediate sources.</p>
<div class="line-block">
<div class="line">Pairs (odd,even) of components are selected and combined using </div>
<div class="line-block">
<div class="line">‘pair_strength’. This process is continued until only 3 intermediate </div>
<div class="line">(combined) sources remain. Color3mixer is then used to calculate the </div>
<div class="line">fluxes for the remaining 3 sources, after which the fluxes of all </div>
<div class="line">components are back-calculated.</div>
</div>
</div>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">x</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">vector of optimization parameters.</div>
</div>
</dd>
<dt class="field-even">constructor_pars</dt>
<dd class="field-even"><div class="line-block">
<div class="line">dict with model parameters. </div>
<div class="line">Key ‘list’ determines which parameters are in :x: and key ‘len’</div>
<div class="line">(Specifies the number of variables representing each parameter).</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">spd, M, spds</div>
<div class="line">ndarrays with spectrum corresponding to x, M the fluxes of </div>
<div class="line">the spectral components of spd and spds the spectral components </div>
<div class="line">themselves.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.color3mixer">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">color3mixer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Yxyt</span></em>, <em class="sig-param"><span class="n">Yxy1</span></em>, <em class="sig-param"><span class="n">Yxy2</span></em>, <em class="sig-param"><span class="n">Yxy3</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#color3mixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.color3mixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing 3 light sources.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">Yxyt</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with target Yxy chromaticities.</div>
</div>
</dd>
<dt class="field-even">Yxy1</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 1.</div>
</div>
</dd>
<dt class="field-odd">Yxy2</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 2.</div>
</div>
</dd>
<dt class="field-even">Yxy3</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 3.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with fluxes.</div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><p>Yxyt, Yxy1, … can contain multiple rows, referring to single mixture.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.colormixer">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">colormixer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Yxyt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Yxyi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">pair_strengths</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">source_order</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#colormixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.colormixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing N light sources.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">Yxyt</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with target Yxy chromaticities.</div>
<div class="line">Defaults to equi-energy white.</div>
</div>
</dd>
<dt class="field-even">Yxyi</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with Yxy chromaticities of light sources i = 1 to n.</div>
</div>
</dd>
<dt class="field-odd">n</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of source components to randomly generate when Yxyi is None.</div>
</div>
</dd>
<dt class="field-even">pair_strengths</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with light source pair strengths.  </div>
</div>
</dd>
<dt class="field-odd">source_order</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with order of source components.</div>
<div class="line">If None: use np.arange(n)</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with fluxes.</div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><dl class="field-list">
<dt class="field-odd">Algorithm</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">1. Loop over all source components and create intermediate sources</div>
<div class="line-block">
<div class="line">from all (even,odd)-pairs using the relative strengths </div>
<div class="line-block">
<div class="line">of the pair (specified in pair_strengths). </div>
</div>
</div>
<div class="line">2. Collect any remaining sources.</div>
<div class="line">3. Combine with new intermediate source components</div>
<div class="line">4. Repeat 1-3 until there are only 3 source components left. </div>
<div class="line">5. Use color3mixer to calculate the required fluxes of the 3 final</div>
<div class="line-block">
<div class="line">intermediate components to obtain the target chromaticity. </div>
</div>
<div class="line">6. Backward calculate the fluxes of all original source components</div>
<div class="line-block">
<div class="line">from the 3 final intermediate fluxes.</div>
</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.colormixer_pinv">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">colormixer_pinv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xyzt</span></em>, <em class="sig-param"><span class="n">xyzi</span></em>, <em class="sig-param"><span class="n">input_fmt</span><span class="o">=</span><span class="default_value">'xyz'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#colormixer_pinv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.colormixer_pinv" title="Permalink to this definition">¶</a></dt>
<dd><p>Additive color mixer of N primaries using using Moore-Penrose pseudo-inverse matrix.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">xyzt</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with target XYZ tristimulus values or Yxy chromaticity coordinates.</div>
</div>
</dd>
<dt class="field-even">xyzi</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with XYZ tristimulus values or Yxy chromaticity coordinates of light sources i = 1 to n.</div>
</div>
</dd>
<dt class="field-odd">input_fmt</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘xyz’, optional</div>
<div class="line">Format specifier of :xyzt: and :xyzi: input arguments.</div>
<div class="line">- options: ‘xyz’, ‘Yxy’</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">w</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with fluxes (weights) of each of the primaries in the mixture.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.spd_constructor_3">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">spd_constructor_3</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">constructor_pars</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_constructor_3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_constructor_3" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct spd from model parameters using trio’s of intermediate sources.</p>
<div class="line-block">
<div class="line">The triangle/trio method creates for all possible combinations of 3 primary</div>
<div class="line">component spectra a spectrum that results in the target chromaticity </div>
<div class="line">using color3mixer() and then optimizes the weights of each of the latter </div>
<div class="line">spectra such that adding them (additive mixing) results in obj_vals as </div>
<div class="line">close as possible to the target values.</div>
</div>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">x</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">vector of optimization parameters.</div>
</div>
</dd>
<dt class="field-even">constructor_pars</dt>
<dd class="field-even"><div class="line-block">
<div class="line">dict with model parameters. </div>
<div class="line">Key ‘list’ determines which parameters are in :x: and key ‘len’</div>
<div class="line">(specifies the number of variables representing each parameter).</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">spd, M, spds</div>
<div class="line">ndarrays with spectrum corresponding to x, M the fluxes of </div>
<div class="line">the spectral components of spd and spds the spectral components </div>
<div class="line">themselves.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.spd_optimizer_2_3">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">spd_optimizer_2_3</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">optimizer_type</span><span class="o">=</span><span class="default_value">'2mixer'</span></em>, <em class="sig-param"><span class="n">spd_constructor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">spd_model_pars</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">component_data</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">N_components</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">allow_nongaussianbased_mono_spds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">Yxy_target</span><span class="o">=</span><span class="default_value">array([[100.0, 0.33333, 0.33333]])</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">obj_fcn</span><span class="o">=</span><span class="default_value">[None]</span></em>, <em class="sig-param"><span class="n">obj_fcn_pars</span><span class="o">=</span><span class="default_value">[{}]</span></em>, <em class="sig-param"><span class="n">obj_fcn_weights</span><span class="o">=</span><span class="default_value">[1]</span></em>, <em class="sig-param"><span class="n">obj_tar_vals</span><span class="o">=</span><span class="default_value">[0]</span></em>, <em class="sig-param"><span class="n">decimals</span><span class="o">=</span><span class="default_value">[5]</span></em>, <em class="sig-param"><span class="n">minimize_method</span><span class="o">=</span><span class="default_value">'Nelder-Mead'</span></em>, <em class="sig-param"><span class="n">minimize_opts</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">F_rss</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_optimizer_2_3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_optimizer_2_3" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Optimizes the weights (fluxes) of a set of component spectra by combining </div>
<div class="line">pairs (2) or trio’s (3) of components to intermediate sources until only 3</div>
<div class="line">remain. Color3mixer can then be called to calculate required fluxes to</div>
<div class="line">obtain target chromaticity and fluxes are then back-calculated.</div>
</div>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">optimizer_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘2mixer’ or ‘3mixer’ or ‘user’, optional</div>
<div class="line">Specifies whether to optimize spectral model parameters by </div>
<div class="line">combining pairs or trio’s of comonponents.</div>
</div>
</dd>
<dt class="field-even">spd_constructor</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Function handle to user defined spd_constructor function.</div>
<div class="line-block">
<div class="line">Input: fcn(x, constructor_pars = {}, kwargs)</div>
<div class="line">Output: spd,M,spds</div>
<div class="line-block">
<div class="line">nd array with:</div>
<div class="line-block">
<div class="line-block">
<div class="line">- spd: spectrum resulting from x</div>
</div>
<div class="line">- M: fluxes of all component spds</div>
<div class="line-block">
<div class="line">- spds: component spds (in [N+1,wl] format)</div>
</div>
</div>
</div>
</div>
<div class="line">(See e.g. spd_constructor_2 or spd_constructor_3)</div>
</div>
</dd>
<dt class="field-odd">spd_model_pars</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dict with model parameters required by spd_constructor</div>
<div class="line">and with optimization parameters required by minimize (x0, lb, ub).                .</div>
<div class="line">Only used when :optimizer_type: == ‘user’.</div>
</div>
</dd>
<dt class="field-even">component_data</dt>
<dd class="field-even"><div class="line-block">
<div class="line">4, optional</div>
<div class="line">Component spectra data: </div>
<div class="line">If int: specifies number of components used in optimization </div>
<div class="line-block">
<div class="line">(peakwl, fwhm and pair_strengths will be optimized).</div>
</div>
<div class="line">If dict: generate components based on parameters (peakwl, fwhm, </div>
<div class="line-block">
<div class="line-block">
<div class="line">pair_strengths, etc.) in dict. </div>
</div>
<div class="line">(keys with None values will be optimized)</div>
</div>
<div class="line">If ndarray: optimize pair_strengths of component spectra.</div>
</div>
</dd>
<dt class="field-odd">N_components</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used </div>
<div class="line">when :component_data: is dict and user wants to override dict. </div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</dd>
<dt class="field-even">allow_nongaussianbased_mono_spds</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">False: use pure Gaussian based monochrom. spds.</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not </div>
<div class="line">ndarray with spectral data.</div>
</div>
</dd>
<dt class="field-even">Yxy_target</dt>
<dd class="field-even"><div class="line-block">
<div class="line">np2d([100,1/3,1/3]), optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values if not provided </div>
<div class="line">in :Yxyi:.</div>
</div>
</dd>
<dt class="field-even">F_rss</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Take Root-Sum-of-Squares of ‘closeness’ values between target and </div>
<div class="line">objective function values.</div>
</div>
</dd>
<dt class="field-odd">decimals</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">5, optional</div>
<div class="line">Rounding decimals of objective function values.</div>
</div>
</dd>
<dt class="field-even">obj_fcn</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Function handles to objective function.</div>
</div>
</dd>
<dt class="field-odd">obj_fcn_weights</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">Weigths for each obj. fcn</div>
</div>
</dd>
<dt class="field-even">obj_fcn_pars</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Parameter dicts for each obj. fcn.</div>
</div>
</dd>
<dt class="field-odd">obj_tar_vals</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Target values for each objective function.</div>
</div>
</dd>
<dt class="field-even">minimize_method</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘Nelder-Mead’, optional</div>
<div class="line">Optimization method used by minimize function.</div>
</div>
</dd>
<dt class="field-odd">minimize_opts</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Dict with minimization options. </div>
<div class="line">None defaults to: {‘xtol’: 1e-5, ‘disp’: True, ‘maxiter’: 1000*Nc,</div>
<div class="line-block">
<div class="line">‘maxfev’ : 1000*Nc,’fatol’: 0.01}</div>
</div>
</div>
</dd>
<dt class="field-even">verbosity</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">M, spd_opt, obj_vals</div>
<div class="line-block">
<div class="line">- ‘M’: ndarray with fluxes for each component spectrum.</div>
<div class="line">- ‘spd_opt’: optimized spectrum.</div>
<div class="line">- ‘obj_vals’: values of the obj. fcns for the optimized spectrum.</div>
</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.get_optim_pars_dict">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">get_optim_pars_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span><span class="o">=</span><span class="default_value">array([[100.0, 0.33333, 0.33333]])</span></em>, <em class="sig-param"><span class="n">tar_type</span><span class="o">=</span><span class="default_value">'Yxy'</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">optimizer_type</span><span class="o">=</span><span class="default_value">'2mixer'</span></em>, <em class="sig-param"><span class="n">spd_constructor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">spd_model_pars</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cspace</span><span class="o">=</span><span class="default_value">'Yuv'</span></em>, <em class="sig-param"><span class="n">cspace_bwtf</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">cspace_fwtf</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">component_spds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">N_components</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">obj_fcn</span><span class="o">=</span><span class="default_value">[None]</span></em>, <em class="sig-param"><span class="n">obj_fcn_pars</span><span class="o">=</span><span class="default_value">[{}]</span></em>, <em class="sig-param"><span class="n">obj_fcn_weights</span><span class="o">=</span><span class="default_value">[1]</span></em>, <em class="sig-param"><span class="n">obj_tar_vals</span><span class="o">=</span><span class="default_value">[0]</span></em>, <em class="sig-param"><span class="n">decimals</span><span class="o">=</span><span class="default_value">[5]</span></em>, <em class="sig-param"><span class="n">minimize_method</span><span class="o">=</span><span class="default_value">'Nelder-Mead'</span></em>, <em class="sig-param"><span class="n">minimize_opts</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">F_rss</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">peakwl</span><span class="o">=</span><span class="default_value">[450, 530, 610]</span></em>, <em class="sig-param"><span class="n">fwhm</span><span class="o">=</span><span class="default_value">[20, 20, 20]</span></em>, <em class="sig-param"><span class="n">allow_nongaussianbased_mono_spds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">bw_order</span><span class="o">=</span><span class="default_value">[- 1]</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">with_wl</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">strength_shoulder</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">strength_ph</span><span class="o">=</span><span class="default_value">[0]</span></em>, <em class="sig-param"><span class="n">use_piecewise_fcn</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">peakwl_ph1</span><span class="o">=</span><span class="default_value">[530]</span></em>, <em class="sig-param"><span class="n">fwhm_ph1</span><span class="o">=</span><span class="default_value">[80]</span></em>, <em class="sig-param"><span class="n">strength_ph1</span><span class="o">=</span><span class="default_value">[1]</span></em>, <em class="sig-param"><span class="n">peakwl_ph2</span><span class="o">=</span><span class="default_value">[560]</span></em>, <em class="sig-param"><span class="n">fwhm_ph2</span><span class="o">=</span><span class="default_value">[80]</span></em>, <em class="sig-param"><span class="n">strength_ph2</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">pair_strengths</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">triangle_strengths</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">peakwl_min</span><span class="o">=</span><span class="default_value">[400]</span></em>, <em class="sig-param"><span class="n">peakwl_max</span><span class="o">=</span><span class="default_value">[700]</span></em>, <em class="sig-param"><span class="n">fwhm_min</span><span class="o">=</span><span class="default_value">[5]</span></em>, <em class="sig-param"><span class="n">fwhm_max</span><span class="o">=</span><span class="default_value">[600]</span></em>, <em class="sig-param"><span class="n">bw_order_min</span><span class="o">=</span><span class="default_value">[- 2]</span></em>, <em class="sig-param"><span class="n">bw_order_max</span><span class="o">=</span><span class="default_value">[100]</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#get_optim_pars_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.get_optim_pars_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup dict with optimization parameters.</p>
<dl>
<dt>Args:</dt><dd><p>See  ?spd_optimizer for more info.</p>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">opts</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dict with keys and values of the function’s keywords and values.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.initialize_spd_model_pars">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">initialize_spd_model_pars</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">component_data</span></em>, <em class="sig-param"><span class="n">N_components</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allow_nongaussianbased_mono_spds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">optimizer_type</span><span class="o">=</span><span class="default_value">'2mixer'</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#initialize_spd_model_pars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.initialize_spd_model_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize spd_model_pars dict (for spd_constructor) based on type of component_data.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">component_data</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Component spectra data: </div>
<div class="line">If int: specifies number of components used in optimization </div>
<div class="line-block">
<div class="line">(peakwl, fwhm and pair_strengths will be optimized).</div>
</div>
<div class="line">If dict: generate components based on parameters (peakwl, fwhm, </div>
<div class="line-block">
<div class="line-block">
<div class="line">pair_strengths, etc.) in dict. </div>
</div>
<div class="line">(keys with None values will be optimized)</div>
</div>
<div class="line">If ndarray: optimize pair_strengths of component spectra.</div>
</div>
</dd>
<dt class="field-even">N_components</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used </div>
<div class="line">when :component_data: is dict and user wants to override dict. </div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</dd>
<dt class="field-odd">allow_nongaussianbased_mono_spds</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line-block">
<div class="line">- False: use Gaussian based monochrom. spds.</div>
<div class="line">- True: also allow butterworth and lorentzian type monochrom. spds while optimizing.</div>
</div>
</div>
</dd>
<dt class="field-even">optimizer_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘2mixer’, optional</div>
<div class="line">Type of spectral optimization routine.</div>
<div class="line">(other options: ‘3mixer’, ‘search’)</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not an</div>
<div class="line">ndarray with spectral data.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">spd_model_pars</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dict with spectrum-model parameters</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.initialize_spd_optim_pars">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">initialize_spd_optim_pars</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">component_data</span></em>, <em class="sig-param"><span class="n">N_components</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allow_nongaussianbased_mono_spds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">optimizer_type</span><span class="o">=</span><span class="default_value">'2mixer'</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">spd_model_pars</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#initialize_spd_optim_pars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.initialize_spd_optim_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize spd_optim_pars dict based on type of component_data.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">component_data</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Component spectra data: </div>
<div class="line">If int: specifies number of components used in optimization </div>
<div class="line-block">
<div class="line">(peakwl, fwhm and pair_strengths will be optimized).</div>
</div>
<div class="line">If dict: generate components based on parameters (peakwl, fwhm, </div>
<div class="line-block">
<div class="line-block">
<div class="line">pair_strengths, etc.) in dict. </div>
</div>
<div class="line">(keys with None values will be optimized)</div>
</div>
<div class="line">If ndarray: optimize pair_strengths of component spectra.</div>
</div>
</dd>
<dt class="field-even">N_components</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used </div>
<div class="line">when :component_data: is dict and user wants to override dict. </div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</dd>
<dt class="field-odd">allow_nongaussianbased_mono_spds</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">False: use Gaussian based monochrom. spds.</div>
</div>
</dd>
<dt class="field-even">optimizer_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘2mixer’, optional</div>
<div class="line">Type of spectral optimization routine.</div>
<div class="line">(other options: ‘3mixer’, ‘search’)</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not an</div>
<div class="line">ndarray with spectral data.</div>
</div>
</dd>
<dt class="field-even">spd_model_pars</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If None, initialize based on type of component_data.</div>
<div class="line">else: initialize on pre-defined spd_model_pars dict.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">spd_optim_pars</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dict with optimization parameters (x0, ub, lb)</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.get_primary_fluxratios">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">get_primary_fluxratios</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">res</span></em>, <em class="sig-param"><span class="n">primaries</span></em>, <em class="sig-param"><span class="n">Ytarget</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">ptype</span><span class="o">=</span><span class="default_value">'pu'</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'M,Sopt'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#get_primary_fluxratios"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.get_primary_fluxratios" title="Permalink to this definition">¶</a></dt>
<dd><p>Get flux ratios of primaries.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">res</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dict or ndarray with optimized fluxes for component spds normalized to max = 1.</div>
<div class="line">(output of spd_optimizer)</div>
</div>
</dd>
<dt class="field-even">primaries</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with primary spectra.</div>
</div>
</dd>
<dt class="field-odd">Ytarget</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">M will be scaled to result in a photo-/radio-metric power of Ytarget</div>
</div>
</dd>
<dt class="field-even">ptype</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘pu’ or ‘ru’, optional</div>
<div class="line">Type of power:</div>
<div class="line">-‘pu’: photometric units</div>
<div class="line">-‘ru’: radiometric units</div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set/Vlambda to use in calculation of power.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with flux ratios.</div>
</div>
</dd>
<dt class="field-even">Sopt</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with optimized scaled spectrum.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.spd_optimizer">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">spd_optimizer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span><span class="o">=</span><span class="default_value">array([[100.0, 0.33333, 0.33333]])</span></em>, <em class="sig-param"><span class="n">tar_type</span><span class="o">=</span><span class="default_value">'Yxy'</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">optimizer_type</span><span class="o">=</span><span class="default_value">'2mixer'</span></em>, <em class="sig-param"><span class="n">spd_constructor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">spd_model_pars</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cspace</span><span class="o">=</span><span class="default_value">'Yuv'</span></em>, <em class="sig-param"><span class="n">cspace_bwtf</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">cspace_fwtf</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">component_spds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">N_components</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">obj_fcn</span><span class="o">=</span><span class="default_value">[None]</span></em>, <em class="sig-param"><span class="n">obj_fcn_pars</span><span class="o">=</span><span class="default_value">[{}]</span></em>, <em class="sig-param"><span class="n">obj_fcn_weights</span><span class="o">=</span><span class="default_value">[1]</span></em>, <em class="sig-param"><span class="n">obj_tar_vals</span><span class="o">=</span><span class="default_value">[0]</span></em>, <em class="sig-param"><span class="n">decimals</span><span class="o">=</span><span class="default_value">[5]</span></em>, <em class="sig-param"><span class="n">minimize_method</span><span class="o">=</span><span class="default_value">'Nelder-Mead'</span></em>, <em class="sig-param"><span class="n">minimize_opts</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">F_rss</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">peakwl</span><span class="o">=</span><span class="default_value">[450, 530, 610]</span></em>, <em class="sig-param"><span class="n">fwhm</span><span class="o">=</span><span class="default_value">[20, 20, 20]</span></em>, <em class="sig-param"><span class="n">allow_nongaussianbased_mono_spds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">bw_order</span><span class="o">=</span><span class="default_value">[- 1]</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">with_wl</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">strength_shoulder</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">strength_ph</span><span class="o">=</span><span class="default_value">[0]</span></em>, <em class="sig-param"><span class="n">use_piecewise_fcn</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">peakwl_ph1</span><span class="o">=</span><span class="default_value">[530]</span></em>, <em class="sig-param"><span class="n">fwhm_ph1</span><span class="o">=</span><span class="default_value">[80]</span></em>, <em class="sig-param"><span class="n">strength_ph1</span><span class="o">=</span><span class="default_value">[1]</span></em>, <em class="sig-param"><span class="n">peakwl_ph2</span><span class="o">=</span><span class="default_value">[560]</span></em>, <em class="sig-param"><span class="n">fwhm_ph2</span><span class="o">=</span><span class="default_value">[80]</span></em>, <em class="sig-param"><span class="n">strength_ph2</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">pair_strengths</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">peakwl_min</span><span class="o">=</span><span class="default_value">[400]</span></em>, <em class="sig-param"><span class="n">peakwl_max</span><span class="o">=</span><span class="default_value">[700]</span></em>, <em class="sig-param"><span class="n">fwhm_min</span><span class="o">=</span><span class="default_value">[5]</span></em>, <em class="sig-param"><span class="n">fwhm_max</span><span class="o">=</span><span class="default_value">[600]</span></em>, <em class="sig-param"><span class="n">bw_order_min</span><span class="o">=</span><span class="default_value">- 2</span></em>, <em class="sig-param"><span class="n">bw_order_max</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'spds,M'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_optimizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_optimizer" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Generate a spectrum with specified white point and optimized for certain </div>
<div class="line">objective functions from a set of component spectra or component spectrum </div>
<div class="line">model parameters.</div>
</div>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">target</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">np2d([100,1/3,1/3]), optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</dd>
<dt class="field-even">tar_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘Yxy’ or str, optional</div>
<div class="line">Specifies the input type in :target: (e.g. ‘Yxy’ or ‘cct’)</div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values, if not provided </div>
<div class="line">in :Yxyi:.</div>
</div>
</dd>
<dt class="field-even">optimizer_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘2mixer’,  optional</div>
<div class="line">Specifies type of chromaticity optimization </div>
<div class="line">(‘3mixer’ or ‘2mixer’ or ‘search’)</div>
<div class="line">For help on ‘2mixer’ and ‘3mixer’ algorithms, see notes below.</div>
</div>
</dd>
<dt class="field-odd">spd_constructor</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Function handle to user defined spd_constructor function.</div>
<div class="line-block">
<div class="line">Input: fcn(x, constructor_pars = {}, kwargs)</div>
<div class="line">Output: spd,M,spds</div>
<div class="line-block">
<div class="line">nd array with:</div>
<div class="line-block">
<div class="line">- spd: spectrum resulting from x</div>
<div class="line">- M: fluxes of all component spds</div>
<div class="line">- spds: component spds (in [N+1,wl] format)</div>
</div>
</div>
</div>
<div class="line">(See e.g. spd_constructor_2 or spd_constructor_3)</div>
</div>
</dd>
<dt class="field-even">spd_model_pars</dt>
<dd class="field-even"><div class="line-block">
<div class="line">dict with model parameters required by spd_constructor</div>
<div class="line">and with optimization parameters required by minimize (x0, lb, ub).                .</div>
<div class="line">Only used when :optimizer_type: == ‘user’.</div>
</div>
</dd>
<dt class="field-odd">cspace</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘Yuv’, optional</div>
<div class="line">Color space for ‘search’-type optimization. </div>
</div>
</dd>
<dt class="field-even">cspace_bwtf</dt>
<dd class="field-even"><div class="line-block">
<div class="line">{}, optional</div>
<div class="line">Backward (cspace_to_xyz) transform parameters </div>
<div class="line">(see colortf()) to go from :tar_type: to ‘Yxy’).</div>
</div>
</dd>
<dt class="field-odd">cspace_fwtf</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">{}, optional</div>
<div class="line">Forward (xyz_to_cspace) transform parameters </div>
<div class="line">(see colortf()) to go from xyz to :cspace:).</div>
</div>
</dd>
<dt class="field-even">component_spds</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray of component spectra.</div>
<div class="line">If None: they are built from input args.</div>
</div>
</dd>
<dt class="field-odd">N_components</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used </div>
<div class="line">when :component_data: is dict and user wants to override dict value</div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</dd>
<dt class="field-even">allow_nongaussianbased_mono_spds</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">False: use Ohno monochromatic led spectra based on Gaussian spds.</div>
<div class="line">True: also use Butterworth and Lorentzian spds.</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not an</div>
<div class="line">ndarray with spectral data.</div>
</div>
</dd>
<dt class="field-even">F_rss</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Take Root-Sum-of-Squares of ‘closeness’ values between target and </div>
<div class="line">objective function values.</div>
</div>
</dd>
<dt class="field-odd">decimals</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">5, optional</div>
<div class="line">Rounding decimals of objective function values.</div>
</div>
</dd>
<dt class="field-even">obj_fcn</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Function handles to objective function.</div>
</div>
</dd>
<dt class="field-odd">obj_fcn_weights</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">Weigths for each obj. fcn</div>
</div>
</dd>
<dt class="field-even">obj_fcn_pars</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Parameter dicts for each obj. fcn.</div>
</div>
</dd>
<dt class="field-odd">obj_tar_vals</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Target values for each objective function.</div>
</div>
</dd>
<dt class="field-even">minimize_method</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘Nelder-Mead’, optional</div>
<div class="line">Optimization method used by minimize function.</div>
</div>
</dd>
<dt class="field-odd">minimize_opts</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Dict with minimization options. </div>
<div class="line-block">
<div class="line">None defaults to: {‘xtol’: 1e-5, ‘disp’: True, ‘maxiter’: 1000*Nc,</div>
<div class="line-block">
<div class="line">‘maxfev’ : 1000*Nc,’fatol’: 0.01}</div>
</div>
</div>
</div>
</dd>
<dt class="field-even">verbosity</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘spds,M’, optional</div>
<div class="line">Determines output of function.</div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><p>peakwl:, :fwhm:, … : see ?spd_builder for more info.</p>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">spds, M</div>
<div class="line-block">
<div class="line">- ‘spds’: optimized spectrum.</div>
<div class="line">- ‘M’: ndarray with fluxes for each component spectrum.</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Notes:</dt><dd><dl class="field-list simple">
<dt class="field-odd">Optimization algorithms</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>1. ‘2mixer’:
Pairs (odd,even) of components are selected and combined using 
‘pair_strength’. This process is continued until only 3 (combined)
intermediate sources remain. Color3mixer is then used to calculate 
the fluxes for the remaining 3 sources, after which the fluxes of 
all components are back-calculated.</p>
<p>2. ‘3mixer’:
The triangle/trio method creates for all possible combinations of 
3 primary component spectra a spectrum that results in the target 
chromaticity using color3mixer() and then optimizes the weights of
each of the latter spectra such that adding them (additive mixing) 
results in obj_vals as close as possible to the target values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="luxpy.toolboxes.spdbuild.PrimConstructor">
<em class="property">class </em><code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">PrimConstructor</code><span class="sig-paren">(</span><em class="sig-param">f=&lt;function gaussian_prim_constructor&gt;, ptypes=['peakwl', 'fwhm'], pdefs={}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#PrimConstructor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.PrimConstructor" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.PrimConstructor.get_spd">
<code class="sig-name descname">get_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nprim</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wlr</span><span class="o">=</span><span class="default_value">[360, 830, 1]</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#PrimConstructor.get_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.PrimConstructor.get_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ndarray with spds for prims.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">nprim</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If not None: generate nprim random prims (based fixed pars and bounds in pdefs) </div>
<div class="line">else: values for all pars should be defined in pdefs! </div>
<div class="line-block">
<div class="line">(nprims is determined by number of elements in pdefs[ptypes[0]])</div>
</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="luxpy.toolboxes.spdbuild.Minimizer">
<em class="property">class </em><code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">Minimizer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'Nelder-Mead'</span></em>, <em class="sig-param"><span class="n">opts</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">x0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">pareto</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">display</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#Minimizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.Minimizer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.Minimizer._set_defopts_and_pareto">
<code class="sig-name descname">_set_defopts_and_pareto</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pareto</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">x0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">display</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#Minimizer._set_defopts_and_pareto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.Minimizer._set_defopts_and_pareto" title="Permalink to this definition">¶</a></dt>
<dd><p>Set default options if not provided, as well as pareto (False: output Root-Sum-Squares of Fi in _fitnessfcn).</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.Minimizer.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fitness_fcn</span></em>, <em class="sig-param"><span class="n">npars</span></em>, <em class="sig-param"><span class="n">fitness_args_dict</span></em>, <em class="sig-param"><span class="n">bounds</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#Minimizer.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.Minimizer.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Run minimizer on fitness function with specified fitness_args_dict input arguments and bounds.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns">
<em class="property">class </em><code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">ObjFcns</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fp</span><span class="o">=</span><span class="default_value">[{}]</span></em>, <em class="sig-param"><span class="n">fw</span><span class="o">=</span><span class="default_value">[1]</span></em>, <em class="sig-param"><span class="n">ft</span><span class="o">=</span><span class="default_value">[0]</span></em>, <em class="sig-param"><span class="n">ft_tol</span><span class="o">=</span><span class="default_value">[0]</span></em>, <em class="sig-param"><span class="n">decimals</span><span class="o">=</span><span class="default_value">[5]</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns._equalize_sizes">
<code class="sig-name descname">_equalize_sizes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns._equalize_sizes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns._equalize_sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Equalize structure of x to that of self.f for ease of looping of the objective functions in the fitness function</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns._calculate_fj">
<code class="sig-name descname">_calculate_fj</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spdi</span></em>, <em class="sig-param"><span class="n">j</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns._calculate_fj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns._calculate_fj" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate objective function j for input spd.</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns._get_normalization_factors">
<code class="sig-name descname">_get_normalization_factors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns._get_normalization_factors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns._get_normalization_factors" title="Permalink to this definition">¶</a></dt>
<dd><p>Set normalization factor for F-calculation</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns._get_fj_output_str">
<code class="sig-name descname">_get_fj_output_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">j</span></em>, <em class="sig-param"><span class="n">obj_vals_ij</span></em>, <em class="sig-param"><span class="n">F_ij</span><span class="o">=</span><span class="default_value">nan</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns._get_fj_output_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns._get_fj_output_str" title="Permalink to this definition">¶</a></dt>
<dd><p>get output string for objective function fj</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer">
<em class="property">class </em><code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">SpectralOptimizer</code><span class="sig-paren">(</span><em class="sig-param">target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), tar_type='Yxy', cspace_bwtf={}, nprim=4, wlr=[360, 830, 1], cieobs='1931_2', out='spds,primss,Ms,results', optimizer_type='3mixer', triangle_strengths_bnds=None, prim_constructor=&lt;luxpy.toolboxes.spdbuild.spdoptimizer2020.PrimConstructor object&gt;, prims=None, obj_fcn=&lt;luxpy.toolboxes.spdbuild.spdoptimizer2020.ObjFcns object&gt;, minimizer=&lt;luxpy.toolboxes.spdbuild.spdoptimizer2020.Minimizer object&gt;, verbosity=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_nprim_prims">
<code class="sig-name descname">_update_nprim_prims</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nprim</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prims</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_nprim_prims"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_nprim_prims" title="Permalink to this definition">¶</a></dt>
<dd><p>Update prims (and nprim).</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_target">
<code class="sig-name descname">_update_target</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tar_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cspace_bwtf</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_target"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Update target chromaticity.</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_prim_pars_bnds">
<code class="sig-name descname">_update_prim_pars_bnds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nprim</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_prim_pars_bnds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_prim_pars_bnds" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set fixed and free parameters, as well as bnds on latter for an nprim primary mixture.</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_triangle_strengths_bnds">
<code class="sig-name descname">_update_triangle_strengths_bnds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nprim</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">triangle_strengths_bnds</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_triangle_strengths_bnds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_triangle_strengths_bnds" title="Permalink to this definition">¶</a></dt>
<dd><p>Update bounds of triangle_strengths for for an nprim primary mixture.</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_bnds">
<code class="sig-name descname">_update_bnds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nprim</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">triangle_strengths_bnds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">prim_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_bnds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_bnds" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all bounds (triangle_strengths and those of free parameters of primary constructor) for an nprim primary mixture..</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nprim</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prims</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">target</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tar_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cspace_bwtf</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">triangle_strengths_bnds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">prim_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates all that is needed when one of the input arguments is changed.</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._spd_constructor_tri">
<code class="sig-name descname">_spd_constructor_tri</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._spd_constructor_tri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._spd_constructor_tri" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a mixture spectrum composed of n primaries using the 3mixer algorithm.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">x</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">optimization parameters, first n!/(n-3)!*3! are the strengths of</div>
<div class="line">the triangles in the ‘3mixer’ algorithm.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">spd, prims, M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">- spd: spectrum resulting from x</div>
<div class="line">- spds: primary spds</div>
<div class="line">- M: fluxes of all primaries</div>
</div>
</dd>
</dl>
</dd>
<dt>Notes:</dt><dd><p>1. ‘3mixer’ - optimization algorithm: The triangle/trio method creates 
for all possible combinations of 3 primary component spectra a spectrum
that results in the target chromaticity using color3mixer() and then 
optimizes the weights of each of the latter spectra such that adding 
them (additive mixing) results in obj_vals as close as possible to 
the target values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._spd_constructor_nomixer">
<code class="sig-name descname">_spd_constructor_nomixer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._spd_constructor_nomixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._spd_constructor_nomixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a mixture spectrum composed of n primaries using no mixer algorithm (just simple weighted sum of primaries).</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">x</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">optimization parameters, first n are the strengths of individual primaries.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">spd, prims, M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">- spd: spectrum resulting from x</div>
<div class="line">- spds: primary spds</div>
<div class="line">- M: fluxes of all primaries</div>
</div>
</dd>
</dl>
</dd>
<dt>Notes:</dt><dd><ol class="arabic simple">
<li><p>‘no-mixer’ - simple weighted sum of primaries.</p></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._fitness_fcn">
<code class="sig-name descname">_fitness_fcn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'F'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._fitness_fcn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._fitness_fcn" title="Permalink to this definition">¶</a></dt>
<dd><p>Fitness function that calculates closeness of solution x to target values for specified objective functions.</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start optimization of _fitnessfcn for n primaries using the initialized minimizer and the selected optimizer_type.</p>
<p>Returns variables specified in :out:</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild._extract_prim_optimization_parameters">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">_extract_prim_optimization_parameters</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">nprims</span></em>, <em class="sig-param"><span class="n">prim_constructor_parameter_types</span></em>, <em class="sig-param"><span class="n">prim_constructor_parameter_defs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_extract_prim_optimization_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._extract_prim_optimization_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the primary parameters from the optimization vector x and the prim_constructor_parameter_defs dict, for use with PrimConstructor..</p>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild._stack_wlr_spd">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">_stack_wlr_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wlr</span></em>, <em class="sig-param"><span class="n">spd</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_stack_wlr_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._stack_wlr_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Stack the wavelength range on top of the spd values for use with PrimConstructor.</p>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild._setup_wlr">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">_setup_wlr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wlr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_setup_wlr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._setup_wlr" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup the wavelength range for use with PrimConstructor.</p>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.spd_optimizer2">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">spd_optimizer2</code><span class="sig-paren">(</span><em class="sig-param">target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), tar_type='Yxy', cspace_bwtf={}, n=4, wlr=[360, 830, 1], prims=None, cieobs='1931_2', out='spds,primss,Ms,results', optimizer_type='3mixer', prim_constructor=&lt;function gaussian_prim_constructor&gt;, prim_constructor_parameter_types=['peakwl', 'fwhm'], prim_constructor_parameter_defs={}, obj_fcn=None, obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], obj_tar_tols=[0], decimals=[5], triangle_strengths_bnds=None, minimize_method='Nelder-Mead', minimize_opts={}, x0=None, pareto=False, display=False, verbosity=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#spd_optimizer2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_optimizer2" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Generate a spectrum with specified white point and optimized for certain objective </div>
<div class="line">functions from a set of primary spectra or primary spectrum model parameters.</div>
</div>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">target</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">np2d([100,1/3,1/3]), optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</dd>
<dt class="field-even">tar_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘Yxy’ or str, optional</div>
<div class="line">Specifies the input type in :target: (e.g. ‘Yxy’ or ‘cct’)</div>
</div>
</dd>
<dt class="field-odd">cspace_bwtf</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">{}, optional</div>
<div class="line">Backward (cspace_to_xyz) transform parameters </div>
<div class="line">(see colortf()) to go from :tar_type: to ‘Yxy’).</div>
</div>
</dd>
<dt class="field-even">n</dt>
<dd class="field-even"><div class="line-block">
<div class="line">4, optional</div>
<div class="line">Number of primaries in light mixture.</div>
</div>
</dd>
<dt class="field-odd">wl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[360,830,1], optional</div>
<div class="line">Wavelengths used in optimization when :prims: is not an
ndarray with spectral data.</div>
</div>
</dd>
<dt class="field-even">cieobs</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values, if not provided </div>
<div class="line">in :Yxyi:.</div>
</div>
</dd>
<dt class="field-odd">optimizer_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘3mixer’,  optional</div>
<div class="line">Specifies type of chromaticity optimization </div>
<div class="line">For help on ‘3mixer’ algorithm, see notes below.</div>
</div>
</dd>
<dt class="field-even">prims</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray of predefined primary spectra.</div>
<div class="line">If None: they are built from optimization parameters using the </div>
<div class="line">function in :prim_constructor:</div>
</div>
</dd>
<dt class="field-odd">prim_constructor</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">function that constructs the primaries from the optimization parameters</div>
<div class="line">Should have the form: </div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">prim_constructor(x,</span> <span class="pre">n,</span> <span class="pre">wl,</span> <span class="pre">prim_constructor_parameter_types,</span> <span class="pre">**prim_constructor_parameter_defs)</span></code></div>
</div>
</div>
</dd>
<dt class="field-even">prim_constructor_parameter_types</dt>
<dd class="field-even"><div class="line-block">
<div class="line">gaussian_prim_parameter_types [‘peakwl’, ‘fwhm’], optional</div>
<div class="line">List with strings of the parameters used by prim_constructor() to</div>
<div class="line">calculate the primary spd. All parameters listed and that do not</div>
<div class="line">have default values (one for each prim!!!) in prim_constructor_parameters_defs </div>
<div class="line">will be optimized.</div>
</div>
</dd>
<dt class="field-odd">prim_constructor_parameters_defs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">{}, optional</div>
<div class="line">Dict with constructor parameters required by prim_constructor and/or </div>
<div class="line">default values for parameters that are not being optimized.</div>
<div class="line">For example: {‘fwhm’:  30} will keep fwhm fixed and not optimize it.</div>
</div>
</dd>
<dt class="field-even">obj_fcn</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Function handles to objective function.</div>
</div>
</dd>
<dt class="field-odd">obj_fcn_weights</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">Weigths for each obj. fcn</div>
</div>
</dd>
<dt class="field-even">obj_fcn_pars</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[{}] or list, optional</div>
<div class="line">Parameter dicts for each obj. fcn.</div>
</div>
</dd>
<dt class="field-odd">obj_tar_vals</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Target values for each objective function.</div>
</div>
</dd>
<dt class="field-even">obj_tar_tols</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Tolerance of objective function values with target values.</div>
</div>
</dd>
<dt class="field-odd">decimals</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[5], optional</div>
<div class="line">Rounding decimals of objective function values.</div>
</div>
</dd>
<dt class="field-even">minimize_method</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘Nelder-Mead’, optional</div>
<div class="line">Optimization method used by minimize function.</div>
<div class="line">options: </div>
<div class="line-block">
<div class="line">- ‘Nelder-Mead’: Nelder-Mead simplex local optimization </div>
<div class="line-block">
<div class="line">using the luxpy.math.minimizebnd wrapper</div>
<div class="line">with method set to ‘Nelder-Mead’.</div>
</div>
<div class="line">- ‘demo’ :  Differential Evolutionary Multiobjective Optimizatizer</div>
<div class="line-block">
<div class="line">(using math.DEMO.demo_opt)</div>
</div>
<div class="line">- ‘particleswarm’: Pseudo-global optimizer using particle swarms</div>
<div class="line-block">
<div class="line">(from pyswarm wrapper module luxpy.math.pyswarms_particleswarm)</div>
</div>
<div class="line">- ‘nsga_ii’: Pareto multiobjective optimizer using the NSGA-II genetic algorithm</div>
<div class="line-block">
<div class="line">(from pymoo wrapper module luxpy.math.pymoo_nsga_ii)</div>
</div>
<div class="line">- A user-defined minimization function (see _start_optimization_tri? for </div>
<div class="line-block">
<div class="line">info on the requirements of this function)</div>
</div>
</div>
</div>
</dd>
<dt class="field-odd">minimize_opts</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Dict with minimization options. </div>
<div class="line">None defaults to the options depending on choice of minimize_method</div>
<div class="line-block">
<div class="line">- ‘Nelder-Mead’   : {‘xtol’: 1e-5, ‘disp’: True, ‘maxiter’: 1000*Nc,</div>
<div class="line-block">
<div class="line">‘maxfev’ : 1000*Nc,’fatol’: 0.01}</div>
</div>
<div class="line">- ‘demo’ :          {‘F’: 0.5, ‘CR’: 0.3, ‘kmax’: 300, ‘mu’: 100, ‘display’: True}</div>
<div class="line">- ‘particleswarm’ : {‘iters’: 100, ‘n_particles’: 10, ‘ftol’: -np.inf,</div>
<div class="line-block">
<div class="line">‘ps_opts’ : {‘c1’: 0.5, ‘c2’: 0.3, ‘w’:0.9}}</div>
</div>
<div class="line">- ‘nsga_ii’ : {‘n_gen’ : 40, ‘n_pop’ : 400, ‘n_offsprings’ : None,</div>
<div class="line-block">
<div class="line">‘termination’ : (‘n_gen’ , 40), ‘seed’ : 1,</div>
<div class="line">‘ga_opts’ : {‘sampling’  : (“real_random”,{}),</div>
<div class="line-block">
<div class="line">‘crossover’ : (“real_sbx”, {‘prob’ : 0.9, ‘eta’ : 15}),</div>
<div class="line">‘mutation’  : (“real_pm”,  {‘eta’ : 20})}}</div>
</div>
</div>
<div class="line">- dict with options for user-defined minimization method.</div>
</div>
</div>
</dd>
<dt class="field-even">triangle_strength_bnds</dt>
<dd class="field-even"><div class="line-block">
<div class="line">(None,None)</div>
<div class="line">Specifies lower- and upper-bounds for the strengths of each of the primary</div>
<div class="line">combinations that will be made during the optimization using ‘3mixer’.</div>
</div>
</dd>
<dt class="field-odd">x0</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If None: a random starting value will be generated for the Nelder-Mead</div>
<div class="line">minimization algorithm, else the user defined starting value will be used.</div>
<div class="line">Note that it should only contain a value for each peakwl and/or fwhm that</div>
<div class="line">is set to be optimized. The triangle_strengths are added automatically.</div>
</div>
</dd>
<dt class="field-even">pareto</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">Specifies whether the output of the fitnessfcn should be the Root-Sum-of-Squares </div>
<div class="line">of all weighted objective function values or not. Individual function values are</div>
<div class="line">required by true multi-objective optimizers (i.e. pareto == True).</div>
</div>
</dd>
<dt class="field-odd">display</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Turn native display options of minimizers on (True) or off (False).</div>
</div>
</dd>
<dt class="field-even">verbosity</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</dd>
<dt class="field-odd">out</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘spds,primss,Ms,results’, optional</div>
<div class="line">Determines output of function (see :returns:).</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">spds, primss,Ms,results</div>
<div class="line">- ‘spds’: optimized spectrum (or spectra: for demo, particleswarm and nsga_ii minimization methods)</div>
<div class="line">- ‘primss’: primary spectra of each optimized spectrum</div>
<div class="line">- ‘Ms’ : ndarrays with fluxes of each primary</div>
<div class="line">- ‘results’: dict with optimization results</div>
</div>
</dd>
</dl>
</dd>
</dl>
<p>Notes on the optimization algorithms:</p>
<blockquote>
<div><p>1. ‘3mixer’: The triangle/trio method creates for all possible 
combinations of 3 primary component spectra a spectrum that results in 
the target chromaticity using color3mixer() and then optimizes the 
weights of each of the latter spectra such that adding them 
(additive mixing) results in obj_vals as close as possible to the 
target values.</p>
<p>2. ‘2mixer’: APRIL 2020, NOT YET IMPLEMENTED!!
Pairs (odd,even) of components are selected and combined using 
‘pair_strength’. This process is continued until only 3 (combined)
intermediate sources remain. Color3mixer is then used to calculate 
the fluxes for the remaining 3 sources, after which the fluxes of 
all components are back-calculated.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild.gaussian_prim_constructor">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">gaussian_prim_constructor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">nprims</span></em>, <em class="sig-param"><span class="n">wlr</span></em>, <em class="sig-param"><span class="n">ptypes</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">pdefs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#gaussian_prim_constructor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.gaussian_prim_constructor" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a set of nprim gaussian primaries with wavelengths wlr using the input in x and in kwargs.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">x</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray (M x nprim) with optimization parameters.</div>
</div>
</dd>
<dt class="field-even">nprim</dt>
<dd class="field-even"><div class="line-block">
<div class="line">number of primaries</div>
</div>
</dd>
<dt class="field-odd">wlr</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">wavelength range for which to construct a spectrum</div>
</div>
</dd>
<dt class="field-even">prim_constructor</dt>
<dd class="field-even"><div class="line-block">
<div class="line">function that constructs the primaries from the optimization parameters</div>
<div class="line">Should have the form: </div>
<div class="line-block">
<div class="line">prim_constructor(x, n, wl, ptypes, pdefs)</div>
</div>
</div>
</dd>
<dt class="field-odd">ptypes</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">gaussian_prim_parameter_types [‘peakwl’, ‘fwhm’], optional</div>
<div class="line">List with strings of the parameters used by PrimConstructor()) to</div>
<div class="line">calculate the primary spd. All parameters listed and that do not</div>
<div class="line">have default values (one for each prim!!!) in pdefs will be optimized.</div>
</div>
</dd>
<dt class="field-even">pdefs</dt>
<dd class="field-even"><div class="line-block">
<div class="line">Dict with constructor parameters required by PrimConstructor and/or </div>
<div class="line">default values for parameters that are not being optimized.</div>
<div class="line">For example: {‘fwhm’:  [30]} will keep fwhm fixed and not optimize it.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">spd</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectrum of nprim primaries (1st row = wavelengths)</div>
</div>
</dd>
</dl>
</dd>
<dt>Example on how to create constructor:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">`def</span> <span class="pre">gaussian_prim_constructor(x,</span> <span class="pre">nprims,</span> <span class="pre">wlr,</span> <span class="pre">ptypes,</span> <span class="pre">**pdefs):`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Extract</span> <span class="pre">the</span> <span class="pre">primary</span> <span class="pre">parameters</span> <span class="pre">from</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">pdefs:`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">pars</span> <span class="pre">=</span> <span class="pre">_extract_prim_optimization_parameters(x,</span> <span class="pre">nprims,</span> <span class="pre">ptypes,</span> <span class="pre">pdefs)`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Setup</span> <span class="pre">wavelengths:`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">wlr</span> <span class="pre">=</span> <span class="pre">_setup_wlr(wlr)`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Conversion</span> <span class="pre">factor</span> <span class="pre">for</span> <span class="pre">FWHM</span> <span class="pre">to</span> <span class="pre">sigma</span> <span class="pre">of</span> <span class="pre">Gaussian:`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">fwhm_to_sig</span> <span class="pre">=</span> <span class="pre">1/(2*(2*np.log(2))**0.5)</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Create</span> <span class="pre">spectral</span> <span class="pre">profile</span> <span class="pre">function:</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">spd</span> <span class="pre">=</span> <span class="pre">np.exp(-0.5*((pars['peakwl']-wlr)/(pars['fwhm']*fwhm_to_sig))**2)`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Stack</span> <span class="pre">wlr</span> <span class="pre">and</span> <span class="pre">spd</span> <span class="pre">together:</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">return</span> <span class="pre">_stack_wlr_spd(wlr,spd)`</span></code> </div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild._triangle_mixer">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">_triangle_mixer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Yxy_target</span></em>, <em class="sig-param"><span class="n">Yxyi</span></em>, <em class="sig-param"><span class="n">triangle_strengths</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_triangle_mixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._triangle_mixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the fluxes of each of the primaries to realize the target chromaticity Yxy_target given the triangle_strengths.</p>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spdbuild._color3mixer">
<code class="sig-prename descclassname">luxpy.toolboxes.spdbuild.</code><code class="sig-name descname">_color3mixer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Yxyt</span></em>, <em class="sig-param"><span class="n">Yxy1</span></em>, <em class="sig-param"><span class="n">Yxy2</span></em>, <em class="sig-param"><span class="n">Yxy3</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_color3mixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._color3mixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing 3 light sources.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">Yxyt</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with target Yxy chromaticities.</div>
</div>
</dd>
<dt class="field-even">Yxy1</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 1.</div>
</div>
</dd>
<dt class="field-odd">Yxy2</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 2.</div>
</div>
</dd>
<dt class="field-even">Yxy3</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 3.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with fluxes.</div>
</div>
</dd>
</dl>
</dd>
<dt>Note:</dt><dd><p>Yxyt, Yxy1, … can contain multiple rows, referring to single mixture.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="hypspcim">
<h2>hypspcim/<a class="headerlink" href="#hypspcim" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">py</dt>
<dd class="field-odd"><ul class="simple">
<li><p>__init__.py</p></li>
<li><p>hyperspectral_img_simulator.py</p></li>
</ul>
</dd>
<dt class="field-even">namespace</dt>
<dd class="field-even"><p>luxpy.hypspcim</p>
</dd>
</dl>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.hypspcim"></span><div class="section" id="module-for-hyper-spectral-image-simulation">
<h3>Module for hyper spectral image simulation<a class="headerlink" href="#module-for-hyper-spectral-image-simulation" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">_HYPSPCIM_PATH</dt>
<dd class="field-odd"><p>path to module</p>
</dd>
<dt class="field-even">_HYPSPCIM_DEFAULT_IMAGE</dt>
<dd class="field-even"><p>path + filename to default image</p>
</dd>
<dt class="field-odd">xyz_to_rfl()</dt>
<dd class="field-odd"><p>approximate spectral reflectance of xyz based on k nearest 
neighbour interpolation of samples from a standard reflectance 
set.</p>
</dd>
<dt class="field-even">render_image()</dt>
<dd class="field-even"><p>Render image under specified light source spd.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt id="luxpy.toolboxes.hypspcim.render_image">
<code class="sig-prename descclassname">luxpy.toolboxes.hypspcim.</code><code class="sig-name descname">render_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">img</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">spd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rfl</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'img_hyp'</span></em>, <em class="sig-param"><span class="n">refspd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">D</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">cspace</span><span class="o">=</span><span class="default_value">'xyz'</span></em>, <em class="sig-param"><span class="n">cspace_tf</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">CSF</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">interp_type</span><span class="o">=</span><span class="default_value">'nd'</span></em>, <em class="sig-param"><span class="n">k_neighbours</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">show</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">show_ref_img</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">stack_test_ref</span><span class="o">=</span><span class="default_value">12</span></em>, <em class="sig-param"><span class="n">write_to_file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">csf_based_rgb_rounding</span><span class="o">=</span><span class="default_value">6</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#render_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.render_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Render image under specified light source spd.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">img</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None or str or ndarray with float (max = 1) rgb image.</div>
<div class="line">None load a default image.</div>
</div>
</dd>
<dt class="field-even">spd</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray, optional</div>
<div class="line">Light source spectrum for rendering</div>
<div class="line">If None: use CIE illuminant F4</div>
</div>
</dd>
<dt class="field-odd">rfl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray, optional</div>
<div class="line">Reflectance set for color coordinate to rfl mapping.</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘img_hyp’ or str, optional</div>
<div class="line-block">
<div class="line">(other option: ‘img_ren’: rendered image under :spd:)</div>
</div>
</div>
</dd>
<dt class="field-odd">refspd</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Reference spectrum for color coordinate to rfl mapping.</div>
<div class="line">None defaults to D65 (srgb has a D65 white point)</div>
</div>
</dd>
<dt class="field-even">D</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Degree of (von Kries) adaptation from spd to refspd. </div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set for calculation of xyz from spectral data.</div>
</div>
</dd>
<dt class="field-even">cspace</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘xyz’,  optional</div>
<div class="line">Color space for color coordinate to rfl mapping.</div>
<div class="line">Tip: Use linear space (e.g. ‘xyz’, ‘Yuv’,…) for (interp_type == ‘nd’),</div>
<div class="line-block">
<div class="line">and perceptually uniform space (e.g. ‘ipt’) for (interp_type == ‘nearest’)</div>
</div>
</div>
</dd>
<dt class="field-odd">cspace_tf</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">{}, optional</div>
<div class="line">Dict with parameters for xyz_to_cspace and cspace_to_xyz transform.</div>
</div>
</dd>
<dt class="field-even">CSF</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">RGB camera response functions.</div>
<div class="line">If None: input :xyz: contains raw rgb values. Override :cspace:</div>
<div class="line">argument and perform estimation directly in raw rgb space!!!</div>
</div>
</dd>
<dt class="field-odd">interp_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘nd’, optional</div>
<div class="line">Options:</div>
<div class="line">- ‘nd’: perform n-dimensional linear interpolation using Delaunay triangulation.</div>
<div class="line">- ‘nearest’: perform nearest neighbour interpolation. </div>
</div>
</dd>
<dt class="field-even">k_neighbours</dt>
<dd class="field-even"><div class="line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of nearest neighbours for reflectance spectrum interpolation.</div>
<div class="line">Neighbours are found using scipy.spatial.cKDTree</div>
</div>
</dd>
<dt class="field-odd">show</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line-block">
<div class="line">Show images.</div>
</div>
</div>
</dd>
<dt class="field-even">verbosity</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: make a plot of the color coordinates of original and 
rendered image pixels.</div>
</div>
</dd>
<dt class="field-odd">show_ref_img</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">True: shows rendered image under reference spd. False: shows</div>
<div class="line-block">
<div class="line">original image.</div>
</div>
</div>
</dd>
<dt class="field-even">write_to_file</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">None: do nothing, else: write to filename(+path) in :write_to_file:</div>
</div>
</dd>
<dt class="field-odd">stack_test_ref</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">12, optional</div>
<div class="line-block">
<div class="line">- 12: left (test), right (ref) format for show and imwrite</div>
<div class="line">- 21: top (test), bottom (ref)</div>
<div class="line">- 1: only show/write test</div>
<div class="line">- 2: only show/write ref</div>
<div class="line">- 0: show both, write test</div>
</div>
</div>
</dd>
<dt class="field-even">csf_based_rgb_rounding</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_ROUNDING, optional</div>
<div class="line">Int representing the number of decimals to round the RGB values (obtained from not-None CSF input) to before applying the search algorithm.</div>
<div class="line">Smaller values increase the search speed, but could cause fatal error that causes python kernel to die. If this happens increase the rounding int value.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">img_hyp, img_ren, </div>
<div class="line">ndarrays with float hyperspectral image and rendered images </div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.hypspcim.xyz_to_rfl">
<code class="sig-prename descclassname">luxpy.toolboxes.hypspcim.</code><code class="sig-name descname">xyz_to_rfl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xyz</span></em>, <em class="sig-param"><span class="n">CSF</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rfl</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'rfl_est'</span></em>, <em class="sig-param"><span class="n">refspd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">D</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">cspace</span><span class="o">=</span><span class="default_value">'xyz'</span></em>, <em class="sig-param"><span class="n">cspace_tf</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">interp_type</span><span class="o">=</span><span class="default_value">'nd'</span></em>, <em class="sig-param"><span class="n">k_neighbours</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">csf_based_rgb_rounding</span><span class="o">=</span><span class="default_value">6</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#xyz_to_rfl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.xyz_to_rfl" title="Permalink to this definition">¶</a></dt>
<dd><p>Approximate spectral reflectance of xyz values based on nd-dimensional linear interpolation 
or k nearest neighbour interpolation of samples from a standard reflectance set.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">xyz</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with xyz values of target points.</div>
</div>
</dd>
<dt class="field-even">CSF</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">RGB camera response functions.</div>
<div class="line">If None: input :xyz: contains raw rgb (float) values. Override :cspace:</div>
<div class="line">argument and perform estimation directly in raw rgb space!!!</div>
</div>
</dd>
<dt class="field-odd">rfl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray, optional</div>
<div class="line">Reflectance set for color coordinate to rfl mapping.</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘rfl_est’ or str, optional</div>
</div>
</dd>
<dt class="field-odd">refspd</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Refer ence spectrum for color coordinate to rfl mapping.</div>
<div class="line">None defaults to D65.</div>
</div>
</dd>
<dt class="field-even">cieobs</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set used for calculation of xyz from spectral data.</div>
</div>
</dd>
<dt class="field-odd">cspace</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘xyz’,  optional</div>
<div class="line">Color space for color coordinate to rfl mapping.</div>
<div class="line">Tip: Use linear space (e.g. ‘xyz’, ‘Yuv’,…) for (interp_type == ‘nd’),</div>
<div class="line-block">
<div class="line">and perceptually uniform space (e.g. ‘ipt’) for (interp_type == ‘nearest’)</div>
</div>
</div>
</dd>
<dt class="field-even">cspace_tf</dt>
<dd class="field-even"><div class="line-block">
<div class="line">{}, optional</div>
<div class="line">Dict with parameters for xyz_to_cspace and cspace_to_xyz transform.</div>
</div>
</dd>
<dt class="field-odd">interp_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘nd’, optional</div>
<div class="line">Options:</div>
<div class="line">- ‘nd’: perform n-dimensional linear interpolation using Delaunay triangulation.</div>
<div class="line">- ‘nearest’: perform nearest neighbour interpolation. </div>
</div>
</dd>
<dt class="field-even">k_neighbours</dt>
<dd class="field-even"><div class="line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of nearest neighbours for reflectance spectrum interpolation.</div>
<div class="line">Neighbours are found using scipy.spatial.cKDTree</div>
</div>
</dd>
<dt class="field-odd">verbosity</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: make a plot of the color coordinates of original and </div>
<div class="line">rendered image pixels.</div>
</div>
</dd>
<dt class="field-even">csf_based_rgb_rounding</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_ROUNDING, optional</div>
<div class="line">Int representing the number of decimals to round the RGB values (obtained from not-None CSF input) to before applying the search algorithm.</div>
<div class="line">Smaller values increase the search speed, but could cause fatal error that causes python kernel to die. If this happens increase the rounding int value.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">:rfl_est:</div>
<div class="line">ndarrays with estimated reflectance spectra.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.hypspcim.get_superresolution_hsi">
<code class="sig-prename descclassname">luxpy.toolboxes.hypspcim.</code><code class="sig-name descname">get_superresolution_hsi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lrhsi</span></em>, <em class="sig-param"><span class="n">hrci</span></em>, <em class="sig-param"><span class="n">CSF</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[380, 780, 1]</span></em>, <em class="sig-param"><span class="n">csf_based_rgb_rounding</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">interp_type</span><span class="o">=</span><span class="default_value">'nd'</span></em>, <em class="sig-param"><span class="n">k_neighbours</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#get_superresolution_hsi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.get_superresolution_hsi" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a HighResolution HyperSpectral Image (super-resolution HSI) based on a LowResolution HSI and a HighResolution Color Image.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">lrhsi</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with float (max = 1) LowResolution HSI [m,m,L].</div>
</div>
</dd>
<dt class="field-even">hrci</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with float (max = 1) HighResolution HSI [M,N,3].</div>
</div>
</dd>
<dt class="field-odd">CSF</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with camera sensitivity functions </div>
<div class="line">If None: use Nikon D700</div>
</div>
</dd>
<dt class="field-even">wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[380,780,1], optional</div>
<div class="line">Wavelength range and spacing or ndarray with wavelengths of HSI image.</div>
</div>
</dd>
<dt class="field-odd">interp_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘nd’, optional</div>
<div class="line">Options:</div>
<div class="line">- ‘nd’: perform n-dimensional linear interpolation using Delaunay triangulation.</div>
<div class="line">- ‘nearest’: perform nearest neighbour interpolation. </div>
</div>
</dd>
<dt class="field-even">k_neighbours</dt>
<dd class="field-even"><div class="line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of nearest neighbours for reflectance spectrum interpolation.</div>
<div class="line">Neighbours are found using scipy.spatial.cKDTree</div>
</div>
</dd>
<dt class="field-odd">verbosity</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Verbosity level for sub-call to render_image().</div>
<div class="line">If &gt; 0: make a plot of the color coordinates of original and </div>
<div class="line">rendered image pixels.</div>
</div>
</dd>
<dt class="field-even">csf_based_rgb_rounding</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_ROUNDING, optional</div>
<div class="line">Int representing the number of decimals to round the RGB values (obtained from not-None CSF input) to before applying the search algorithm.</div>
<div class="line">Smaller values increase the search speed, but could cause fatal error that causes python kernel to die. If this happens increase the rounding int value.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">hrhsi</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with HighResolution HSI [M,N,L].</div>
</div>
</dd>
</dl>
</dd>
<dt>Procedure:</dt><dd><div class="line-block">
<div class="line">Call render_image(hrci, rfl = lrhsi_2, CSF = …) to estimate a hyperspectral image</div>
<div class="line">from the high-resolution color image hrci with the reflectance spectra </div>
<div class="line">in the low-resolution hyper-spectral image as database for the estimation.</div>
<div class="line">Estimation is done in raw RGB space with the lrhsi converted using the</div>
<div class="line">camera sensitivity functions in CSF.</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.hypspcim.hsi_to_rgb">
<code class="sig-prename descclassname">luxpy.toolboxes.hypspcim.</code><code class="sig-name descname">hsi_to_rgb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hsi</span></em>, <em class="sig-param"><span class="n">spd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cieobs</span><span class="o">=</span><span class="default_value">'1931_2'</span></em>, <em class="sig-param"><span class="n">srgb</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">linear_rgb</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">CSF</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">normalize_to_white</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">[380, 780, 1]</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#hsi_to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.hsi_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert HyperSpectral Image to rgb.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">hsi</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with hyperspectral image [M,N,L]</div>
</div>
</dd>
<dt class="field-even">spd</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with illumination spectrum</div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set to convert spectral data to xyz tristimulus values.</div>
</div>
</dd>
<dt class="field-even">srgb</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">If False: Use xyz_to_srgb(spd_to_xyz(…)) to convert to srgb values</div>
<div class="line">If True: use camera sensitivity functions.</div>
</div>
</dd>
<dt class="field-odd">linear_rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">If False: use gamma = 2.4 in xyz_to_srgb, if False: use gamma = 1 and set :use_linear_part: to False.</div>
</div>
</dd>
<dt class="field-even">CSF</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with camera sensitivity functions </div>
<div class="line">If None: use Nikon D700</div>
</div>
</dd>
<dt class="field-odd">normalize_to_white</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">If True &amp; CSF is not None: white-balance output rgb to a perfect white diffuser.</div>
</div>
</dd>
<dt class="field-even">wl</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[380,780,1], optional</div>
<div class="line">Wavelength range and spacing or ndarray with wavelengths of HSI image.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with rgb image [M,N,3]</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.hypspcim.rfl_to_rgb">
<code class="sig-prename descclassname">luxpy.toolboxes.hypspcim.</code><code class="sig-name descname">rfl_to_rgb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rfl</span></em>, <em class="sig-param"><span class="n">spd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">CSF</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wl</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">normalize_to_white</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#rfl_to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.rfl_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert spectral reflectance functions (illuminated by spd) to Camera Sensitivity Functions.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">rfl</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectral reflectance functions (1st row is wavelengths if wl is None).</div>
</div>
</dd>
<dt class="field-even">spd</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with illumination spectrum</div>
</div>
</dd>
<dt class="field-odd">CSF</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with camera sensitivity functions </div>
<div class="line">If None: use Nikon D700</div>
</div>
</dd>
<dt class="field-even">normalize_to_white</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">If True: white-balance output rgb to a perfect white diffuser.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with rgb values for each spectral reflectance functions</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="dispcal">
<h2>dispcal/<a class="headerlink" href="#dispcal" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">py</dt>
<dd class="field-odd"><ul class="simple">
<li><p>__init__.py</p></li>
<li><p>displaycalibration.py</p></li>
</ul>
</dd>
<dt class="field-even">namespace</dt>
<dd class="field-even"><p>luxpy.dispcal</p>
</dd>
</dl>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.dispcal"></span><div class="section" id="module-for-display-characterization">
<h3>Module for display characterization<a class="headerlink" href="#module-for-display-characterization" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">_PATH_DATA</dt>
<dd class="field-odd"><p>path to package data folder</p>
</dd>
<dt class="field-even">_RGB</dt>
<dd class="field-even"><p>set of RGB values that work quite well for display characterization</p>
</dd>
<dt class="field-odd">_XYZ</dt>
<dd class="field-odd"><p>example set of measured XYZ values corresponding to the RGB values in _RGB</p>
</dd>
<dt class="field-even">calibrate()</dt>
<dd class="field-even"><p>Calculate TR parameters/lut and conversion matrices</p>
</dd>
<dt class="field-odd">calibration_performance()</dt>
<dd class="field-odd"><p>Check calibration performance (cfr. individual and average color differences for each stimulus).</p>
</dd>
<dt class="field-even">rgb_to_xyz()</dt>
<dd class="field-even"><p>Convert input rgb to xyz</p>
</dd>
<dt class="field-odd">xyz_to_rgb()</dt>
<dd class="field-odd"><p>Convert input xyz to rgb</p>
</dd>
<dt class="field-even">DisplayCalibration()</dt>
<dd class="field-even"><p>Calculate TR parameters/lut and conversion matrices and store in object.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt id="luxpy.toolboxes.dispcal.calibrate">
<code class="sig-prename descclassname">luxpy.toolboxes.dispcal.</code><code class="sig-name descname">calibrate</code><span class="sig-paren">(</span><em class="sig-param">rgbcal</em>, <em class="sig-param">xyzcal</em>, <em class="sig-param">L_type='lms'</em>, <em class="sig-param">tr_type='lut'</em>, <em class="sig-param">cieobs='1931_2'</em>, <em class="sig-param">nbit=8</em>, <em class="sig-param">cspace='lab'</em>, <em class="sig-param">avg=&lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">ensure_increasing_lut_at_low_rgb=0.2</em>, <em class="sig-param">verbosity=1</em>, <em class="sig-param">sep='</em>, <em class="sig-param">'</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#calibrate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate TR parameters/lut and conversion matrices.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">rgbcal</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">rgcal must contain at least the following type of settings:</div>
<div class="line">- pure R,G,B: e.g. for pure R: (R != 0) &amp; (G==0) &amp; (B == 0)</div>
<div class="line">- white(s): R = G = B = 2**nbit-1</div>
<div class="line">- gray(s): R = G = B</div>
<div class="line">- black(s): R = G = B = 0</div>
<div class="line">- binary colors: cyan (G = B, R = 0), yellow (G = R, B = 0), magenta (R = B, G = 0)</div>
</div>
</dd>
<dt class="field-even">xyzcal</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray [Nx3] or string with filename of measured XYZ values for </div>
<div class="line">the RGB settings in rgbcal.</div>
</div>
</dd>
<dt class="field-odd">L_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘lms’, optional</div>
<div class="line">Type of response to use in the derivation of the Tone-Response curves.</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lms’: use cone fundamental responses: L vs R, M vs G and S vs B </div>
<div class="line-block">
<div class="line">(reduces noise and generally leads to more accurate characterization) </div>
</div>
<div class="line">- ‘Y’: use the luminance signal: Y vs R, Y vs G, Y vs B</div>
</div>
</div>
</dd>
<dt class="field-even">tr_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘lut’, optional</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Derive/specify Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Derive/specify Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘1931_2’, optional</div>
<div class="line">CIE CMF set used to determine the XYZ tristimulus values</div>
<div class="line">(needed when L_type == ‘lms’: determines the conversion matrix to</div>
<div class="line">convert xyz to lms values)</div>
</div>
</dd>
<dt class="field-even">nbit</dt>
<dd class="field-even"><div class="line-block">
<div class="line">8, optional</div>
<div class="line">RGB values in nbit format (e.g. 8, 16, …)</div>
</div>
</dd>
<dt class="field-odd">cspace</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">color space or chromaticity diagram to calculate color differences in</div>
<div class="line">when optimizing the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</dd>
<dt class="field-even">avg</dt>
<dd class="field-even"><div class="line-block">
<div class="line">lambda x: ((x**2).mean()**0.5), optional</div>
<div class="line">Function used to average the color differences of the individual RGB settings</div>
<div class="line">in the optimization of the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</dd>
<dt class="field-odd">ensure_increasing_lut_at_low_rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0.2 or float (max = 1.0) or None, optional</div>
<div class="line">Ensure an increasing lut by setting all values below the RGB with the maximum</div>
<div class="line">zero-crossing of np.diff(lut) and RGB/RGB.max() values of :ensure_increasing_lut_at_low_rgb:</div>
<div class="line">(values of 0.2 are a good rule of thumb value)</div>
<div class="line">Non-strictly increasing lut values can be caused at low RGB values due</div>
<div class="line">to noise and low measurement signal. </div>
<div class="line">If None: don’t force lut, but keep as is.</div>
</div>
</dd>
<dt class="field-even">verbosity</dt>
<dd class="field-even"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">&gt; 0: print and plot optimization results</div>
</div>
</dd>
<dt class="field-odd">sep</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgbcal and xyzcal data</div>
</div>
</dd>
<dt class="field-even">header</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgbcal and xyzcal data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</dd>
<dt class="field-even">N</dt>
<dd class="field-even"><div class="line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</dd>
<dt class="field-odd">tr</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</dd>
<dt class="field-even">xyz_black</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</dd>
<dt class="field-odd">xyz_white</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with tristimlus values of white</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.dispcal.calibration_performance">
<code class="sig-prename descclassname">luxpy.toolboxes.dispcal.</code><code class="sig-name descname">calibration_performance</code><span class="sig-paren">(</span><em class="sig-param">rgb</em>, <em class="sig-param">xyztarget</em>, <em class="sig-param">M</em>, <em class="sig-param">N</em>, <em class="sig-param">tr</em>, <em class="sig-param">xyz_black</em>, <em class="sig-param">xyz_white</em>, <em class="sig-param">tr_type='lut'</em>, <em class="sig-param">cspace='lab'</em>, <em class="sig-param">avg=&lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">rgb_is_xyz=False</em>, <em class="sig-param">is_verification_data=False</em>, <em class="sig-param">nbit=8</em>, <em class="sig-param">verbosity=1</em>, <em class="sig-param">sep='</em>, <em class="sig-param">'</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#calibration_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.calibration_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check calibration performance. Calculate DE for each stimulus.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">(or xyz values if argument rgb_to_xyz == True!)</div>
</div>
</dd>
<dt class="field-even">xyztarget</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray [Nx3] or string with filename of target XYZ values corresponding </div>
<div class="line">to the RGB settings (or the measured XYZ values, if argument rgb_to_xyz == True).</div>
</div>
</dd>
<dt class="field-odd">M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</dd>
<dt class="field-even">N</dt>
<dd class="field-even"><div class="line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</dd>
<dt class="field-odd">tr</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</dd>
<dt class="field-even">xyz_black</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</dd>
<dt class="field-odd">xyz_white</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with tristimlus values of white</div>
</div>
</dd>
<dt class="field-even">tr_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘lut’, optional</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Derive/specify Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Derive/specify Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</dd>
<dt class="field-odd">cspace</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">color space or chromaticity diagram to calculate color differences in.</div>
</div>
</dd>
<dt class="field-even">avg</dt>
<dd class="field-even"><div class="line-block">
<div class="line">lambda x: ((x**2).mean()**0.5), optional</div>
<div class="line">Function used to average the color differences of the individual RGB settings</div>
<div class="line">in the optimization of the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</dd>
<dt class="field-odd">rgb_is_xyz</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">If True: the data in argument rgb are actually measured XYZ tristimulus values</div>
<div class="line-block">
<div class="line">and are directly compared to the target xyz.</div>
</div>
</div>
</dd>
<dt class="field-even">is_verification_data</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">If False: the data is assumed to be corresponding to RGB value settings used </div>
<div class="line-block">
<div class="line">in the calibration (i.e. containing whites, blacks, grays, pure and binary mixtures)</div>
</div>
<div class="line">If True: no assumptions on content of rgb, so use this settings when</div>
<div class="line-block">
<div class="line">checking the performance for a set of measured and target xyz data</div>
<div class="line">different than the ones used in the actual calibration measurements. </div>
</div>
</div>
</dd>
<dt class="field-odd">nbit</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">8, optional</div>
<div class="line">RGB values in nbit format (e.g. 8, 16, …)</div>
</div>
</dd>
<dt class="field-even">verbosity</dt>
<dd class="field-even"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">&gt; 0: print and plot optimization results</div>
</div>
</dd>
<dt class="field-odd">sep</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgbcal and xyzcal data</div>
</div>
</dd>
<dt class="field-even">header</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgbcal and xyzcal data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">M</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</dd>
<dt class="field-even">N</dt>
<dd class="field-even"><div class="line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</dd>
<dt class="field-odd">tr</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</dd>
<dt class="field-even">xyz_black</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</dd>
<dt class="field-odd">xyz_white</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with tristimlus values of white</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.dispcal.rgb_to_xyz">
<code class="sig-prename descclassname">luxpy.toolboxes.dispcal.</code><code class="sig-name descname">rgb_to_xyz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rgb</span></em>, <em class="sig-param"><span class="n">M</span></em>, <em class="sig-param"><span class="n">tr</span></em>, <em class="sig-param"><span class="n">xyz_black</span></em>, <em class="sig-param"><span class="n">tr_type</span><span class="o">=</span><span class="default_value">'lut'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#rgb_to_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.rgb_to_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert input rgb to xyz.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray [Nx3] with RGB values </div>
</div>
</dd>
<dt class="field-even">M</dt>
<dd class="field-even"><div class="line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</dd>
<dt class="field-odd">tr</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</dd>
<dt class="field-even">xyz_black</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</dd>
<dt class="field-odd">tr_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘lut’, optional</div>
<div class="line">Type of Tone Response in tr input argument</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">xyz</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray [Nx3] of XYZ tristimulus values</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.dispcal.xyz_to_rgb">
<code class="sig-prename descclassname">luxpy.toolboxes.dispcal.</code><code class="sig-name descname">xyz_to_rgb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xyz</span></em>, <em class="sig-param"><span class="n">N</span></em>, <em class="sig-param"><span class="n">tr</span></em>, <em class="sig-param"><span class="n">xyz_black</span></em>, <em class="sig-param"><span class="n">tr_type</span><span class="o">=</span><span class="default_value">'lut'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#xyz_to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.xyz_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert xyz to input rgb.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">xyz</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray [Nx3] with XYZ tristimulus values </div>
</div>
</dd>
<dt class="field-even">N</dt>
<dd class="field-even"><div class="line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</dd>
<dt class="field-odd">tr</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</dd>
<dt class="field-even">xyz_black</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</dd>
<dt class="field-odd">tr_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘lut’, optional</div>
<div class="line">Type of Tone Response in tr input argument</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray [Nx3] of display RGB values</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration">
<em class="property">class </em><code class="sig-prename descclassname">luxpy.toolboxes.dispcal.</code><code class="sig-name descname">DisplayCalibration</code><span class="sig-paren">(</span><em class="sig-param">rgbcal</em>, <em class="sig-param">xyzcal=None</em>, <em class="sig-param">L_type='lms'</em>, <em class="sig-param">cieobs='1931_2'</em>, <em class="sig-param">tr_type='lut'</em>, <em class="sig-param">nbit=8</em>, <em class="sig-param">cspace='lab'</em>, <em class="sig-param">avg=&lt;function DisplayCalibration.&lt;lambda&gt;&gt;</em>, <em class="sig-param">ensure_increasing_lut_at_low_rgb=0.2</em>, <em class="sig-param">verbosity=1</em>, <em class="sig-param">sep='</em>, <em class="sig-param">'</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for display_calibration.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">rgbcal</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">rgcal must contain at least the following type of settings:</div>
<div class="line">- pure R,G,B: e.g. for pure R: (R != 0) &amp; (G==0) &amp; (B == 0)</div>
<div class="line">- white(s): R = G = B = 2**nbit-1</div>
<div class="line">- gray(s): R = G = B</div>
<div class="line">- black(s): R = G = B = 0</div>
<div class="line">- binary colors: cyan (G = B, R = 0), yellow (G = R, B = 0), magenta (R = B, G = 0)</div>
</div>
</dd>
<dt class="field-even">xyzcal</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">ndarray [Nx3] or string with filename of measured XYZ values for </div>
<div class="line">the RGB settings in rgbcal.</div>
<div class="line">if None: rgbcal is [Nx6] ndarray containing rgb (columns 0-2) and xyz data (columns 3-5)</div>
</div>
</dd>
<dt class="field-odd">L_type</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘lms’, optional</div>
<div class="line">Type of response to use in the derivation of the Tone-Response curves.</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lms’: use cone fundamental responses: L vs R, M vs G and S vs B </div>
<div class="line-block">
<div class="line">(reduces noise and generally leads to more accurate characterization) </div>
</div>
<div class="line">- ‘Y’: use the luminance signal: Y vs R, Y vs G, Y vs B</div>
</div>
</div>
</dd>
<dt class="field-even">tr_type</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘lut’, optional</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Derive/specify Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Derive/specify Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</dd>
<dt class="field-odd">cieobs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘1931_2’, optional</div>
<div class="line">CIE CMF set used to determine the XYZ tristimulus values</div>
<div class="line">(needed when L_type == ‘lms’: determines the conversion matrix to</div>
<div class="line">convert xyz to lms values)</div>
</div>
</dd>
<dt class="field-even">nbit</dt>
<dd class="field-even"><div class="line-block">
<div class="line">8, optional</div>
<div class="line">RGB values in nbit format (e.g. 8, 16, …)</div>
</div>
</dd>
<dt class="field-odd">cspace</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">color space or chromaticity diagram to calculate color differences in</div>
<div class="line">when optimizing the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</dd>
<dt class="field-even">avg</dt>
<dd class="field-even"><div class="line-block">
<div class="line">lambda x: ((x**2).mean()**0.5), optional</div>
<div class="line">Function used to average the color differences of the individual RGB settings</div>
<div class="line">in the optimization of the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</dd>
<dt class="field-odd">verbosity</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">&gt; 0: print and plot optimization results</div>
</div>
</dd>
<dt class="field-even">sep</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgbcal and xyzcal data</div>
</div>
</dd>
<dt class="field-odd">header</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgbcal and xyzcal data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</dd>
</dl>
</dd>
<dt>Return:</dt><dd><dl class="field-list">
<dt class="field-odd">calobject</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">attributes are: </div>
<div class="line-block">
<div class="line">- M: linear rgb to xyz conversion matrix</div>
<div class="line">- N: xyz to linear rgb conversion matrix</div>
<div class="line">- TR: Tone Response function parameters or lut</div>
<div class="line">- xyz_black: ndarray with XYZ tristimulus values of black</div>
<div class="line">- xyz_white: ndarray with tristimlus values of white</div>
</div>
<div class="line">as well as: </div>
<div class="line-block">
<div class="line">- rgbcal, xyzcal, cieobs, avg, tr_type, nbit, cspace, verbosity</div>
<div class="line">- performance: dictionary with various color differences set to np.nan</div>
<div class="line">-    (run calobject.performance() to fill it with actual values)</div>
</div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration.check_performance">
<code class="sig-name descname">check_performance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rgb</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xyz</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">','</span></em>, <em class="sig-param"><span class="n">header</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rgb_is_xyz</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">is_verification_data</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration.check_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration.check_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check calibration performance (if rgbcal is None: use calibration data).</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">(or xyz values if argument rgb_to_xyz == True!)</div>
<div class="line">If None: use self.rgbcal</div>
</div>
</dd>
<dt class="field-even">xyz</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">ndarray [Nx3] or string with filename of target XYZ values corresponding </div>
<div class="line">to the RGB settings (or the measured XYZ values, if argument rgb_to_xyz == True).</div>
<div class="line">If None: use self.xyzcal</div>
</div>
</dd>
<dt class="field-odd">verbosity</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">if None: use self.verbosity</div>
<div class="line">if &gt; 0: print and plot optimization results</div>
</div>
</dd>
<dt class="field-even">sep</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgb and xyz data</div>
</div>
</dd>
<dt class="field-odd">header</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgb and xyz data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</dd>
<dt class="field-even">rgb_is_xyz</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">If True: the data in argument rgb are actually measured XYZ tristimulus values</div>
<div class="line-block">
<div class="line">and are directly compared to the target xyz.</div>
</div>
</div>
</dd>
<dt class="field-odd">is_verification_data</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">If False: the data is assumed to be corresponding to RGB value settings used </div>
<div class="line-block">
<div class="line">in the calibration (i.e. containing whites, blacks, grays, pure and binary mixtures)</div>
<div class="line">Performance results are stored in self.performance.</div>
</div>
<div class="line">If True: no assumptions on content of rgb, so use this settings when</div>
<div class="line-block">
<div class="line">checking the performance for a set of measured and target xyz data</div>
<div class="line">different than the ones used in the actual calibration measurements. </div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Return:</dt><dd><dl class="field-list">
<dt class="field-odd">performance</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dictionary with various color differences.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration.to_xyz">
<code class="sig-name descname">to_xyz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rgb</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration.to_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration.to_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert display rgb to xyz.</p>
</dd></dl>

<dl class="py method">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration.to_rgb">
<code class="sig-name descname">to_rgb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xyz</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration.to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration.to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert xyz to display rgb.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="rgb2spec">
<h2>rgb2spec/<a class="headerlink" href="#rgb2spec" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">py</dt>
<dd class="field-odd"><ul class="simple">
<li><p>__init__.py</p></li>
<li><p>smits_mitsuba.py</p></li>
</ul>
</dd>
<dt class="field-even">namespace</dt>
<dd class="field-even"><p>luxpy.rgb2spec</p>
</dd>
</dl>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.rgb2spec"></span><p>Module for RGB to spectrum conversions</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">_BASESPEC_SMITS</dt>
<dd class="field-odd"><p>Default dict with base spectra for white, cyan, magenta, yellow, blue, green and red for each intent (‘rfl’ or ‘spd’)</p>
</dd>
<dt class="field-even">rgb_to_spec_smits()</dt>
<dd class="field-even"><p>Convert an array of RGB values to a spectrum using a smits like conversion as implemented in mitsuba (July 10, 2019)</p>
</dd>
<dt class="field-odd">convert()</dt>
<dd class="field-odd"><p>Convert an array of RGB values to a spectrum (wrapper around rgb_to_spec_smits(), future: implement other methods)</p>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt id="luxpy.toolboxes.rgb2spec.rgb_to_spec_smits">
<code class="sig-prename descclassname">luxpy.toolboxes.rgb2spec.</code><code class="sig-name descname">rgb_to_spec_smits</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rgb</span></em>, <em class="sig-param"><span class="n">intent</span><span class="o">=</span><span class="default_value">'rfl'</span></em>, <em class="sig-param"><span class="n">bitdepth</span><span class="o">=</span><span class="default_value">8</span></em>, <em class="sig-param"><span class="n">wlr</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">rgb2spec</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/rgb2spec/smits_mitsuba.html#rgb_to_spec_smits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.rgb2spec.rgb_to_spec_smits" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an array of RGB values to a spectrum using a Smits like conversion as implemented in Mitsuba.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray of list of rgb values</div>
</div>
</dd>
<dt class="field-even">intent</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘rfl’ (or ‘spd’), optional</div>
<div class="line">type of requested spectrum conversion .</div>
</div>
</dd>
<dt class="field-odd">bitdepth</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">8, optional</div>
<div class="line">bit depth of rgb values</div>
</div>
</dd>
<dt class="field-even">wlr</dt>
<dd class="field-even"><div class="line-block">
<div class="line">_WL3, optional</div>
<div class="line">desired wavelength (nm) range of spectrum.</div>
</div>
</dd>
<dt class="field-odd">rgb2spec</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Dict with base spectra for white, cyan, magenta, yellow, blue, green and red for each intent.</div>
<div class="line">If None: use _BASESPEC_SMITS.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">spec</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectrum or spectra (one for each rgb value, first row are the wavelengths)</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.rgb2spec.convert">
<code class="sig-prename descclassname">luxpy.toolboxes.rgb2spec.</code><code class="sig-name descname">convert</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rgb</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'smits_mtsb'</span></em>, <em class="sig-param"><span class="n">intent</span><span class="o">=</span><span class="default_value">'rfl'</span></em>, <em class="sig-param"><span class="n">bitdepth</span><span class="o">=</span><span class="default_value">8</span></em>, <em class="sig-param"><span class="n">wlr</span><span class="o">=</span><span class="default_value">[360.0, 830.0, 1.0]</span></em>, <em class="sig-param"><span class="n">rgb2spec</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/rgb2spec.html#convert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.rgb2spec.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an array of RGB values to a spectrum.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">rgb</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray of list of rgb values</div>
</div>
</dd>
<dt class="field-even">method</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘smits_mtsb’, optional</div>
<div class="line">Method to use for conversion:</div>
<div class="line-block">
<div class="line">- ‘smits_mtsb’: use a smits like conversion as implemented in mitsuba.</div>
</div>
</div>
</dd>
<dt class="field-odd">intent</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘rfl’ (or ‘spd’), optional</div>
<div class="line">type of requested spectrum conversion .</div>
</div>
</dd>
<dt class="field-even">bitdepth</dt>
<dd class="field-even"><div class="line-block">
<div class="line">8, optional</div>
<div class="line">bit depth of rgb values</div>
</div>
</dd>
<dt class="field-odd">wlr</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">_WL3, optional</div>
<div class="line">desired wavelength (nm) range of spectrum.</div>
</div>
</dd>
<dt class="field-even">rgb2spec</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Dict with base spectra for white, cyan, magenta, yellow, blue, green and red for each intent.</div>
<div class="line">If None: use _BASESPEC_SMITS.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">spec</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectrum or spectra (one for each rgb value, first row are the wavelengths)</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="iolidfiles">
<h2>iolidfiles/<a class="headerlink" href="#iolidfiles" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">py</dt>
<dd class="field-odd"><ul class="simple">
<li><p>__init__.py</p></li>
<li><p>io_lid_files.py</p></li>
</ul>
</dd>
<dt class="field-even">namespace</dt>
<dd class="field-even"><p>luxpy.iolidfiles</p>
</dd>
</dl>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.iolidfiles"></span><div class="section" id="module-for-reading-and-writing-ies-and-ldt-files">
<h3>Module for reading and writing IES and LDT files.<a class="headerlink" href="#module-for-reading-and-writing-ies-and-ldt-files" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">read_lamp_data</dt>
<dd class="field-odd"><p>Read in light intensity distribution and other lamp data from LDT or IES files.</p>
<dl class="simple">
<dt>Notes:</dt><dd><p>1.Only basic support. Writing is not yet implemented.
2.Reading IES files is based on Blender’s ies2cycles.py
3.This was implemented to build some uv-texture maps for rendering and only tested for a few files.
4. Use at own risk. No warranties.</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt id="luxpy.toolboxes.iolidfiles.read_lamp_data">
<code class="sig-prename descclassname">luxpy.toolboxes.iolidfiles.</code><code class="sig-name descname">read_lamp_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">datasource</span></em>, <em class="sig-param"><span class="n">multiplier</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">normalize</span><span class="o">=</span><span class="default_value">'I0'</span></em>, <em class="sig-param"><span class="n">only_common_keys</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#read_lamp_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.read_lamp_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in light intensity distribution and other lamp data from LDT or IES files.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">datasource</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Filename of LID file or StringIO object or string with LID data.</div>
</div>
</dd>
<dt class="field-even">multiplier</dt>
<dd class="field-even"><div class="line-block">
<div class="line">1.0, optional</div>
<div class="line">Scaler for candela values.</div>
</div>
</dd>
<dt class="field-odd">verbosity</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">Display messages while reading file.</div>
</div>
</dd>
<dt class="field-even">normalize</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘I0’, optional</div>
<div class="line">If ‘I0’: normalize LID to intensity at (theta,phi) = (0,0)</div>
<div class="line">If ‘max’: normalize to max = 1.</div>
</div>
</dd>
<dt class="field-odd">only_common_keys</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">If True, output only common dict keys related to angles, values</div>
<div class="line">and such of LID.</div>
<div class="line">read_lid_lamp_data(?) for print of common keys and return</div>
<div class="line-block">
<div class="line">empty dict with common keys.</div>
</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">lid</dt>
<dd class="field-odd"><p>dict with IES or LDT file data.
|
| If LIDtype == ‘ies’:
|    dict_keys(
| [‘datasource’, ‘version’, ‘lamps_num’, ‘lumens_per_lamp’,
| ‘candela_mult’, ‘v_angles_num’, ‘h_angles_num’, ‘photometric_type’,
| ‘units_type’, ‘width’, ‘length’, ‘height’, ‘ballast_factor’, 
| ‘future_use’, ‘input_watts’, ‘v_angs’, ‘h_angs’, ‘lamp_cone_type’,
| ‘lamp_h_type’, ‘candela_values’, ‘candela_2d’, ‘v_same’, ‘h_same’,
| ‘intensity’, ‘theta’, ‘values’, ‘phi’, ‘map’,’Iv0’]
| )
|
| If LIDtype == ‘ldt’:
|    dict_keys(
| [‘datasource’, ‘version’, ‘manufacturer’, ‘Ityp’,’Isym’,
| ‘Mc’, ‘Dc’, ‘Ng’, ‘name’, Dg’, ‘cct/cri’, ‘tflux’, ‘lumens_per_lamp’,
| ‘candela_mult’, ‘tilt’, lamps_num’,
| ‘cangles’, ‘tangles’,’candela_values’, ‘candela_2d’,
| ‘intensity’, ‘theta’, ‘values’, ‘phi’, ‘map’, ‘Iv0’]
| )</p>
</dd>
</dl>
</dd>
<dt>Notes:</dt><dd><ol class="arabic simple">
<li><p>if only_common_keys: output is dictionary with keys: [‘datasource’, ‘version’, ‘intensity’, ‘theta’, ‘phi’,         ‘values’, ‘map’, ‘Iv0’, ‘candela_values’, ‘candela_2d’]</p></li>
<li><p>‘theta’,’phi’, ‘values’ (=’candela_2d’) contain the original theta angles, phi angles and normalized candelas as specified in file.</p></li>
<li><p>‘map’ contains a dicionary with keys ‘thetas’, ‘phis’, ‘values’. This data has been complete to full angle ranges thetas: [0,180]; phis: [0,360]</p></li>
<li><p>LDT map completion only supported for Isymm == 4 (31/10/2018), Map will be filled with original ‘theta’, ‘phi’ and normalized ‘candela_2d’ values !</p></li>
<li><p>LIDtype is checked by looking for the presence of ‘TILT=’ in datasource content (if True-&gt;’IES’ else ‘LDT’)</p></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.iolidfiles.get_uv_texture">
<code class="sig-prename descclassname">luxpy.toolboxes.iolidfiles.</code><code class="sig-name descname">get_uv_texture</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em>, <em class="sig-param"><span class="n">phi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">values</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">input_types</span><span class="o">=</span><span class="default_value">('array', 'array')</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'linear'</span></em>, <em class="sig-param"><span class="n">theta_min</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">angle_res</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">close_phi</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">deg</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">r</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">show</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'values_map'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#get_uv_texture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.get_uv_texture" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a uv-texture map.
| with specified angular resolution (°) and with positive z-axis as normal.
|   u corresponds to phi [0° - 360°]
|   v corresponds to theta [0° - 180°], (or [-90° - 90°])</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">theta</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Float, int or ndarray</div>
<div class="line">Angle with positive z-axis.</div>
<div class="line">Values corresponding to 0 and 180° must be specified!</div>
</div>
</dd>
<dt class="field-even">phi</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">Float, int or ndarray</div>
<div class="line">Angle around positive z-axis starting from x-axis.</div>
<div class="line">If not None: values corresponding to 0 and 360° must be specified!</div>
</div>
</dd>
<dt class="field-odd">values</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None</div>
<div class="line">ndarray or mesh of values at (theta, phi) locations. </div>
</div>
</dd>
<dt class="field-even">input_types</dt>
<dd class="field-even"><div class="line-block">
<div class="line">(‘array’,’array’), optional</div>
<div class="line">Specification of type of input of (angles,values)</div>
</div>
</dd>
<dt class="field-odd">method</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Interpolation method.</div>
<div class="line">(supported scipy.interpolate.griddata methods: </div>
<div class="line-block">
<div class="line">‘nearest’, ‘linear’, ‘cubic’)</div>
</div>
</div>
</dd>
<dt class="field-even">theta_min</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If 0: [0, 180]; If -90: theta range = [-90,90]</div>
</div>
</dd>
<dt class="field-odd">close_phi</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">Make phi angles array closed (full circle).</div>
</div>
</dd>
<dt class="field-even">angle_res</dt>
<dd class="field-even"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Resolution in degrees.</div>
</div>
</dd>
<dt class="field-odd">deg</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Type of angle input (True: degrees, False: radians).</div>
</div>
</dd>
<dt class="field-even">r</dt>
<dd class="field-even"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Float, int or ndarray</div>
<div class="line">radius</div>
</div>
</dd>
<dt class="field-odd">show</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Plot results.</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘values_map’, optional</div>
<div class="line">Specifies output: “return eval(out)”</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><p>as specified by :out:.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.iolidfiles.save_texture">
<code class="sig-prename descclassname">luxpy.toolboxes.iolidfiles.</code><code class="sig-name descname">save_texture</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">tex</span></em>, <em class="sig-param"><span class="n">bits</span><span class="o">=</span><span class="default_value">16</span></em>, <em class="sig-param"><span class="n">transpose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#save_texture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.save_texture" title="Permalink to this definition">¶</a></dt>
<dd><p>Save 16 bit grayscale PNG image of uv-texture.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">filename</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Filename of output image.</div>
</div>
</dd>
<dt class="field-even">tex</dt>
<dd class="field-even"><div class="line-block">
<div class="line">ndarray float uv-texture.</div>
</div>
</dd>
<dt class="field-odd">transpose</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">If True: transpose tex (u,v) to set u as columns and v as rows </div>
<div class="line">in texture image.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">None</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</dd>
<dt>Note:</dt><dd><div class="line-block">
<div class="line">Texture is rescaled to max = 1 and saved as uint16.</div>
<div class="line">–&gt; Before using uv_map: rescale back to set ‘normal’ to 1.</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.iolidfiles.draw_lid">
<code class="sig-prename descclassname">luxpy.toolboxes.iolidfiles.</code><code class="sig-name descname">draw_lid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">LID</span></em>, <em class="sig-param"><span class="n">grid_interp_method</span><span class="o">=</span><span class="default_value">'linear'</span></em>, <em class="sig-param"><span class="n">theta_min</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">angle_res</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">ax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">projection</span><span class="o">=</span><span class="default_value">'2d'</span></em>, <em class="sig-param"><span class="n">polar_plot_Cx_planes</span><span class="o">=</span><span class="default_value">[0, 90]</span></em>, <em class="sig-param"><span class="n">use_scatter_plot</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">plot_colorbar</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">legend_on</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_luminaire_position</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'ax'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">plottingkwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#draw_lid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.draw_lid" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the light intensity distribution.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">LID</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dict with IES or LDT file data. </div>
<div class="line">(obtained with iolidfiles.read_lamp_data())</div>
</div>
</dd>
<dt class="field-even">grid_interp_method</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Interpolation method for (theta,phi)-grid of normalized luminous intensity values.</div>
<div class="line">(supported scipy.interpolate.griddata methods: </div>
<div class="line-block">
<div class="line">‘nearest’, ‘linear’, ‘cubic’)</div>
</div>
</div>
</dd>
<dt class="field-odd">theta_min</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If 0: [0, 180]; If -90: theta range = [-90,90]</div>
</div>
</dd>
<dt class="field-even">angle_res</dt>
<dd class="field-even"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Resolution in degrees.</div>
</div>
</dd>
<dt class="field-odd">ax</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If None: create new 3D-axes for plotting.</div>
</div>
</dd>
<dt class="field-even">projection</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘2d’, optional</div>
<div class="line">If ‘3d’ make 3 plot</div>
<div class="line">If ‘2d’: make polar plot(s). [not yet implemented (25/03/2021)]</div>
</div>
</dd>
<dt class="field-odd">polar_plot_Cx_planes</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0,90], optional</div>
<div class="line">Plot (Cx)-(Cx+180) planes; eg. [0,90] will plot C0-C180 and C90-C270 planes in 2D polar plot.</div>
</div>
</dd>
<dt class="field-even">use_scatter_plot</dt>
<dd class="field-even"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">If True: use plt.scatter for plotting intensity values in 3D plot.</div>
<div class="line">If False: use plt.plot_surface for plotting in 3D plot.</div>
</div>
</dd>
<dt class="field-odd">plot_colorbar</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Plot colorbar representing the normalized luminous intensity values in the LID 3D plot.</div>
</div>
</dd>
<dt class="field-even">legend_on</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">If True: plot legend on polar plot (no legend for 3D plot!).</div>
</div>
</dd>
<dt class="field-odd">plot_luminaire_position</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Plot the position of the luminaire (0,0,0) in the 3D graph as a red diamond.</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘ax’, optional</div>
<div class="line">string with variable to return</div>
<div class="line">default: ax handle to plot.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Whatever requested as determined by the string in :out:</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.iolidfiles.render_lid">
<code class="sig-prename descclassname">luxpy.toolboxes.iolidfiles.</code><code class="sig-name descname">render_lid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">LID</span><span class="o">=</span><span class="default_value">'./data/luxpy_test_lid_file.ies'</span></em>, <em class="sig-param"><span class="n">sensor_resolution</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">sensor_position</span><span class="o">=</span><span class="default_value">[0, - 1, 0.8]</span></em>, <em class="sig-param"><span class="n">sensor_n</span><span class="o">=</span><span class="default_value">[0, 1, - 0.2]</span></em>, <em class="sig-param"><span class="n">fov</span><span class="o">=</span><span class="default_value">(90, 90)</span></em>, <em class="sig-param"><span class="n">Fd</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">luminaire_position</span><span class="o">=</span><span class="default_value">[0, 1.3, 2]</span></em>, <em class="sig-param"><span class="n">luminaire_n</span><span class="o">=</span><span class="default_value">[0, 0, - 1]</span></em>, <em class="sig-param"><span class="n">wall_center</span><span class="o">=</span><span class="default_value">[0, 2, 1]</span></em>, <em class="sig-param"><span class="n">wall_n</span><span class="o">=</span><span class="default_value">[0, - 1, 0]</span></em>, <em class="sig-param"><span class="n">wall_width</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">wall_height</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">wall_rho</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">floor_center</span><span class="o">=</span><span class="default_value">[0, 1, 0]</span></em>, <em class="sig-param"><span class="n">floor_n</span><span class="o">=</span><span class="default_value">[0, 0, 1]</span></em>, <em class="sig-param"><span class="n">floor_width</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">floor_height</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">floor_rho</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">grid_interp_method</span><span class="o">=</span><span class="default_value">'linear'</span></em>, <em class="sig-param"><span class="n">angle_res</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">theta_min</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">ax3D</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ax2D</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">join_axes</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">legend_on</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_luminaire_position</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_lumiaire_rays</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">plot_luminaire_lid</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_sensor_position</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_sensor_pixels</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_sensor_rays</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">plot_wall_edges</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_wall_luminance</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_wall_intersections</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">plot_floor_edges</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_floor_luminance</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">plot_floor_intersections</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'Lv2D'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#render_lid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.render_lid" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a light intensity distribution.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">LID</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">dict with IES or LDT file data or string with path/filename;</div>
<div class="line">or String or StringIO object with IES or LDT data.</div>
<div class="line">(dict should be obtained with iolidfiles.read_lamp_data())</div>
</div>
</dd>
<dt class="field-even">sensor_resolution</dt>
<dd class="field-even"><div class="line-block">
<div class="line">100, optional</div>
<div class="line">Number of sensor ‘pixels’ along each dimension.</div>
</div>
</dd>
<dt class="field-odd">sensor_position</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0,-1,0.8], optional</div>
<div class="line">x,y,z position of the sensor ‘focal’ point (is located Fd meters behind actual sensor plane)</div>
</div>
</dd>
<dt class="field-even">sensor_n</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[0,1,-0.2], optional</div>
<div class="line">Sensor plane surface normal</div>
</div>
</dd>
<dt class="field-odd">fov</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">(90,90), optional</div>
<div class="line">Field of view of sensor image in degrees.</div>
</div>
</dd>
<dt class="field-even">Fd</dt>
<dd class="field-even"><div class="line-block">
<div class="line">2, optional</div>
<div class="line">‘Focal’ distance in meter. Sensor center is located Fd meter away from</div>
<div class="line">:sensor_position:</div>
</div>
</dd>
<dt class="field-odd">luminaire_position</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0,1.3,2], optional</div>
<div class="line">x,y,z position of the photometric equivalent point source</div>
</div>
</dd>
<dt class="field-even">luminaire_n</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[0,0,-1], optional</div>
<div class="line">Orientation of lumaire LID (default points downward along z-axis away from source)</div>
</div>
</dd>
<dt class="field-odd">wall_center</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0,2,1], optiona</div>
<div class="line">x,y,z position of the back wall</div>
</div>
</dd>
<dt class="field-even">wall_n</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[0,-1,0], optional</div>
<div class="line">surface normal of wall</div>
</div>
</dd>
<dt class="field-odd">wall_width</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">4, optional</div>
<div class="line">width of wall (m)</div>
</div>
</dd>
<dt class="field-even">wall_height</dt>
<dd class="field-even"><div class="line-block">
<div class="line">2, optional</div>
<div class="line">height of wall (m)</div>
</div>
</dd>
<dt class="field-odd">wall_rho</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Diffuse (Lambertian) reflectance of wall.</div>
</div>
</dd>
<dt class="field-even">floor_center</dt>
<dd class="field-even"><div class="line-block">
<div class="line">[0,1,0], optiona</div>
<div class="line">x,y,z position of the floor</div>
</div>
</dd>
<dt class="field-odd">floor_n</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">[0,0,1], optional</div>
<div class="line">surface normal of floor</div>
</div>
</dd>
<dt class="field-even">floor_width</dt>
<dd class="field-even"><div class="line-block">
<div class="line">4, optional</div>
<div class="line">width of floor (m)</div>
</div>
</dd>
<dt class="field-odd">floor_height</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">2, optional</div>
<div class="line">height of floor (m)</div>
</div>
</dd>
<dt class="field-even">floor_rho</dt>
<dd class="field-even"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Diffuse (Lambertian) reflectance of floor.</div>
</div>
</dd>
<dt class="field-odd">grid_interp_method</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Interpolation method for (theta,phi)-grid of normalized luminous intensity values.</div>
<div class="line">(supported scipy.interpolate.griddata methods: </div>
<div class="line-block">
<div class="line">‘nearest’, ‘linear’, ‘cubic’)</div>
</div>
</div>
</dd>
<dt class="field-even">theta_min</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0, optional</div>
<div class="line">If 0: [0, 180]; If -90: theta range = [-90,90]</div>
<div class="line">Only used when generating a plot of the LID in the 3D graphs.</div>
</div>
</dd>
<dt class="field-odd">angle_res</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">1, optional</div>
<div class="line">Angle resolution in degrees of LID sampling.</div>
<div class="line">Only used when generating a plot of the LID in the 3D graphs.</div>
</div>
</dd>
<dt class="field-even">ax3D,ax2D</dt>
<dd class="field-even"><div class="line-block">
<div class="line">None, optional</div>
<div class="line">If None: create new 3D- or 2D- axes for plotting.</div>
<div class="line">If join_axes == True: try and combine two axes on same figure.</div>
<div class="line">If False: don’t plot..</div>
</div>
</dd>
<dt class="field-odd">legend_on</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">False, optional</div>
<div class="line">plot legend.</div>
</div>
</dd>
<dt class="field-even">plot_luminaire_position</dt>
<dd class="field-even"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Plot the position of the luminaire (0,0,0) in the graph as a red diamond.</div>
</div>
</dd>
<dt class="field-odd"><a href="#id25"><span class="problematic" id="id26">plot_X_</span></a>…</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">VArious options to customize plotting. Mainly allows for plotting of</div>
<div class="line">additional info such as plane-ray intersection points, sensor pixels,</div>
<div class="line">sensor-to-plane rays, plane-to-luminaire rays, 3D plot of LID, etc.</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">‘Lv2D’, optional</div>
<div class="line">string with variable to return</div>
<div class="line">default: variable storing an grayscale image of the rendered LID.</div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">returns</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Whatever requested as determined by the string in :out:</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="spectro">
<h2>spectro/<a class="headerlink" href="#spectro" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">py</dt>
<dd class="field-odd"><ul class="simple">
<li><p>__init__.py</p></li>
<li><p>spectro.py</p></li>
</ul>
</dd>
<dt class="field-even">namespace</dt>
<dd class="field-even"><p>luxpy.spectro</p>
</dd>
</dl>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.spectro"></span><div class="section" id="package-for-spectral-measurements">
<h3>Package for spectral measurements<a class="headerlink" href="#package-for-spectral-measurements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="supported-devices">
<h4>Supported devices:<a class="headerlink" href="#supported-devices" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>JETI: specbos 1211, etc.</p></li>
<li><p>OceanOptics: QEPro, QE65Pro, QE65000, USB2000, USB650,etc.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">get_spd()</dt>
<dd class="field-odd"><p>wrapper function to measure a spectral power distribution using a spectrometer of one of the supported manufacturers.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id20">
<h4>Notes<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li><p>For info on the input arguments of get_spd(), see help for each identically named function in each of the subpackages.</p></li>
<li><p>The use of jeti spectrometers requires access to some dll files (delivered with this package).</p></li>
<li><p>The use of oceanoptics spectrometers requires the manual installation of pyseabreeze, as well as some other ‘manual’ settings. See help for oceanoptics sub-package.</p></li>
</ol>
</div></blockquote>
<dl class="py function">
<dt id="luxpy.toolboxes.spectro.init">
<code class="sig-prename descclassname">luxpy.toolboxes.spectro.</code><code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">manufacturer</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spectro/spectro.html#init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spectro.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Import module for specified manufacturer. Make sure everything (drivers, external packages, …) required is installed!</p>
</dd></dl>

<dl class="py function">
<dt id="luxpy.toolboxes.spectro.get_spd">
<code class="sig-prename descclassname">luxpy.toolboxes.spectro.</code><code class="sig-name descname">get_spd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">manufacturer</span><span class="o">=</span><span class="default_value">'jeti'</span></em>, <em class="sig-param"><span class="n">dvc</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">Tint</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">autoTint_max</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">close_device</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">'spd'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spectro/spectro.html#get_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spectro.get_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure a spectral power distribution using a spectrometer of one of the supported manufacturers.</p>
<dl>
<dt>Args:</dt><dd><dl class="field-list">
<dt class="field-odd">manufacturer</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">‘jeti’ or ‘oceanoptics’, optional</div>
<div class="line">Manufacturer of spectrometer (ensures the correct module is loaded).</div>
</div>
</dd>
<dt class="field-even">dvc</dt>
<dd class="field-even"><div class="line-block">
<div class="line">0 or int or spectrometer handle, optional</div>
<div class="line">If int: function will try to initialize the spectrometer to </div>
<div class="line-block">
<div class="line">obtain a handle. The int represents the device </div>
<div class="line">number in a list of all detected devices of the manufacturer.</div>
</div>
</div>
</dd>
<dt class="field-odd">Tint</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">0 or Float, optional</div>
<div class="line">Integration time in seconds. (if 0: find best integration time, but &lt; autoTint_max).</div>
</div>
</dd>
<dt class="field-even">autoTint_max</dt>
<dd class="field-even"><div class="line-block">
<div class="line">Limit Tint to this value when Tint = 0.</div>
</div>
</dd>
<dt class="field-odd">close_device</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">True, optional</div>
<div class="line">Close spectrometer after measurement.</div>
<div class="line">If ‘dvc’ not in out.split(‘,’): always close!!!</div>
</div>
</dd>
<dt class="field-even">out</dt>
<dd class="field-even"><div class="line-block">
<div class="line">“spd” or e.g. “spd,dvc,Errors”, optional</div>
<div class="line">Requested return.</div>
</div>
</dd>
<dt class="field-odd">kwargs</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">For info on additional input (keyword) arguments of get_spd(), </div>
<div class="line">see help for each identically named function in each of the subpackages. </div>
</div>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list">
<dt class="field-odd">spd</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">ndarray with spectrum. (row 0: wavelengths, row1: values)</div>
</div>
</dd>
<dt class="field-even">dvc</dt>
<dd class="field-even"><div class="line-block">
<div class="line">Device handle, if succesfull open (_ERROR: failure, nan: closed)</div>
</div>
</dd>
<dt class="field-odd">Errors</dt>
<dd class="field-odd"><div class="line-block">
<div class="line">Dict with error messages.</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="color.html" class="btn btn-neutral float-left" title="Color sub-package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Kevin A.G. Smet.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>