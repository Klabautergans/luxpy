

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Toolboxes &mdash; LuxPy 1.4.18 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Classes" href="classes.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> LuxPy
          

          
          </a>

          
            
            
              <div class="version">
                1.4.18
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="license.html">License: GPLv3</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="required_packages.html">Imported (required) packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="luxpy_structure.html">Luxpy package structure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="spectrum.html">Spectrum sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="color.html">Color sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Toolboxes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#photbiochem">photbiochem/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-calculating-cie-tn003-2015-photobiological-quantities">Module for calculating CIE (TN003:2015) photobiological quantities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-for-calculation-of-cyanosis-index-as-nzs-1680-2-5-1997">Module for calculation of cyanosis index (AS/NZS 1680.2.5:1997)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#indvcmf">indvcmf/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-individual-observer-lms-cmfs-asano-2016">Module for Individual Observer lms-CMFs (Asano, 2016)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#spdbuild">spdbuild/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-building-and-optimizing-spds">Module for building and optimizing SPDs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hypspcim">hypspcim/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-hyper-spectral-image-simulation">Module for hyper spectral image simulation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dispcal">dispcal/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-display-characterization">Module for display characterization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2spec">rgb2spec/</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iolidfiles">iolidfiles/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-reading-and-writing-ies-and-ldt-files">Module for reading and writing IES and LDT files.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#spectro">spectro/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#package-for-spectral-measurements">Package for spectral measurements</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LuxPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="luxpy_structure.html">Luxpy package structure</a> &raquo;</li>
        
      <li>Toolboxes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/toolboxes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="toolboxes">
<h1>Toolboxes<a class="headerlink" href="#toolboxes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="photbiochem">
<h2>photbiochem/<a class="headerlink" href="#photbiochem" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>cie_tn003_2015.py</li>
<li>ASNZS_1680_2_5_1997_COI.py</li>
<li>circadian_CS_CLa_lrc.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.photbiochem</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.photbiochem"></span><div class="section" id="module-for-calculating-cie-tn003-2015-photobiological-quantities">
<h3>Module for calculating CIE (TN003:2015) photobiological quantities<a class="headerlink" href="#module-for-calculating-cie-tn003-2015-photobiological-quantities" title="Permalink to this headline">¶</a></h3>
<p>(Eesc, Eemc, Eelc, Eez, Eer and Esc, Emc, Elc, Ez, Er)</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="17%" />
<col width="22%" />
<col width="22%" />
<col width="10%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Photoreceptor</th>
<th class="head">Photopigment
(label, α)</th>
<th class="head">Spectral efficiency
sα(λ)</th>
<th class="head">Quantity
(α-opic irradiance)</th>
<th class="head">Q-symbol
(Ee,α)</th>
<th class="head">Unit symbol</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>s-cone</td>
<td>photopsin (sc)</td>
<td>cyanolabe</td>
<td>cyanopic</td>
<td>Ee,sc</td>
<td>W.m−2</td>
</tr>
<tr class="row-odd"><td>m-cone</td>
<td>photopsin (mc)</td>
<td>chlorolabe</td>
<td>chloropic</td>
<td>Ee,mc</td>
<td>W.m−2</td>
</tr>
<tr class="row-even"><td>l-cone</td>
<td>photopsin (lc)</td>
<td>erythrolabe</td>
<td>erythropic</td>
<td>Ee,lc</td>
<td>W.m−2</td>
</tr>
<tr class="row-odd"><td>ipRGC</td>
<td>melanopsin (z)</td>
<td>melanopic</td>
<td>melanopic</td>
<td>Ee,z</td>
<td>W.m−2</td>
</tr>
<tr class="row-even"><td>rod</td>
<td>rhodopsin (r)</td>
<td>rhodopic</td>
<td>rhodopic</td>
<td>Ee,r</td>
<td>W.m−2</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">CIE recommends that the α-opic irradiance is determined by convolving the spectral</div>
<div class="line">irradiance, Ee,λ(λ) (W⋅m−2), for each wavelength, with the action spectrum, sα(λ), </div>
<div class="line">where sα(λ) is normalized to one at its peak:</div>
<div class="line"><br /></div>
<div class="line-block">
<div class="line">Ee,α = ∫ Ee,λ(λ) sα(λ) dλ </div>
<div class="line"><br /></div>
</div>
<div class="line">where the corresponding units are W⋅m−2 in each case. </div>
<div class="line"><br /></div>
<div class="line">The equivalent luminance is calculated as:</div>
<div class="line"><br /></div>
<div class="line-block">
<div class="line">E,α = Km ⋅ ∫ Ee,λ(λ) sα(λ) dλ ⋅ ∫ V(λ) dλ / ∫ sα(λ) dλ</div>
<div class="line"><br /></div>
</div>
<div class="line">To avoid ambiguity, the weighting function used must be stated, so, for example, </div>
<div class="line">cyanopic refers to the cyanopic irradiance weighted using </div>
<div class="line">the s-cone or ssc(λ) spectral efficiency function.</div>
</div>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">_PHOTORECEPTORS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">[‘l-cone’, ‘m-cone’,’s-cone’, ‘rod’, ‘iprgc’]</td>
</tr>
<tr class="field-even field"><th class="field-name">_Ee_SYMBOLS:</th><td class="field-body">[‘Ee,lc’,’Ee,mc’, ‘Ee,sc’,’Ee,r’,  ‘Ee,z’]</td>
</tr>
<tr class="field-odd field"><th class="field-name">_E_SYMBOLS:</th><td class="field-body">[‘E,lc’,’E,mc’, ‘E,sc’,’E,r’,  ‘E,z’]</td>
</tr>
<tr class="field-even field"><th class="field-name">_Q_SYMBOLS:</th><td class="field-body">[‘Q,lc’,’Q,mc’, ‘Q,sc’,’Q,r’,  ‘Q,z’]</td>
</tr>
<tr class="field-odd field"><th class="field-name">_Ee_UNITS:</th><td class="field-body">[‘W⋅m−2’] * 5</td>
</tr>
<tr class="field-even field"><th class="field-name">_E_UNITS:</th><td class="field-body">[‘lux’] * 5</td>
</tr>
<tr class="field-odd field"><th class="field-name">_Q_UNITS:</th><td class="field-body">[‘photons/m2/s’] * 5</td>
</tr>
<tr class="field-even field"><th class="field-name">_QUANTITIES:</th><td class="field-body"><div class="first last line-block">
<div class="line">list with actinic types of irradiance, illuminance</div>
<div class="line">[‘erythropic’, </div>
<div class="line-block">
<div class="line">‘chloropic’,</div>
<div class="line">‘cyanopic’,</div>
<div class="line">‘rhodopic’,</div>
<div class="line">‘melanopic’] </div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">_ACTIONSPECTRA:</th><td class="field-body">ndarray with alpha-actinic action spectra. (stored in file:
‘./data/cie_tn003_2015_SI_action_spectra.dat’)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_to_aopicE():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Calculate alpha-opic irradiance (Ee,α) and equivalent 
luminance (Eα) values for the l-cone, m-cone, s-cone, 
rod and iprgc (α) photoreceptor cells following 
CIE technical note TN 003:2015.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="docutils">
<dt>References:</dt>
<dd>1. <a class="reference external" href="http://www.cie.co.at/publications/report-first-international-workshop-circadian-and-neurophysiological-photometry-2013">CIE-TN003:2015 (2015). 
Report on the first international workshop on 
circadian and neurophysiological photometry, 2013 
(Vienna, Austria).</a>
(<a class="reference external" href="http://files.cie.co.at/785_CIE_TN_003-2015.pdf">http://files.cie.co.at/785_CIE_TN_003-2015.pdf</a>)</dd>
</dl>
</div>
<div class="section" id="module-for-calculation-of-cyanosis-index-as-nzs-1680-2-5-1997">
<h3>Module for calculation of cyanosis index (AS/NZS 1680.2.5:1997)<a class="headerlink" href="#module-for-calculation-of-cyanosis-index-as-nzs-1680-2-5-1997" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_COI_OBS:</th><td class="field-body">Default CMF set for calculations</td>
</tr>
<tr class="field-even field"><th class="field-name">_COI_CSPACE:</th><td class="field-body">Default color space (CIELAB)</td>
</tr>
<tr class="field-odd field"><th class="field-name">_COI_RFL_BLOOD:</th><td class="field-body">ndarray with reflectance spectra of 100% and 50% 
oxygenated blood</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_to_COI_ASNZS1680:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Calculate the Cyanosis Observartion Index (COI) 
[ASNZS 1680.2.5-1995]</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="docutils">
<dt>Reference:</dt>
<dd>AS/NZS1680.2.5 (1997). INTERIOR LIGHTING PART 2.5: HOSPITAL AND MEDICAL TASKS.</dd>
</dl>
<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_aopicE">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_aopicE</code><span class="sig-paren">(</span><em>sid</em>, <em>Ee=None</em>, <em>E=None</em>, <em>Q=None</em>, <em>cieobs='1931_2'</em>, <em>sid_units='W/m2'</em>, <em>out='Eeas</em>, <em>Eas'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/cie_tn003_2015.html#spd_to_aopicE"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_aopicE" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate alpha-opic irradiance (Ee,α) and equivalent luminance (Eα) values
for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells 
following CIE technical note TN 003:2015.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sid:</th><td class="field-body"><div class="first last line-block">
<div class="line">numpy.ndarray with retinal spectral irradiance in :sid_units: </div>
<div class="line">(if ‘uW/cm2’, sid will be converted to SI units ‘W/m2’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Ee:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an irradiance of :Ee:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">E:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an illuminance of :E:</div>
<div class="line">Note that E is calculate using a Km factor corrected to standard air.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Q:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: nNormalize :sid: to a quantal energy of :Q:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sid_units:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘W/m2’, optional</div>
<div class="line">Other option ‘uW/m2’, input units of :sid:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Eeas, Eas’ or str, optional</div>
<div class="line">Determines values to return.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first line-block">
<div class="line">(Eeas, Eas) with Eeas and Eas resp. numpy.ndarrays with the 
α-opic irradiance and equivalent illuminance values 
of all spectra in :sid: in SI-units. </div>
</div>
<div class="last line-block">
<div class="line">(other choice can be set using :out:)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_COI_ASNZS1680">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_COI_ASNZS1680</code><span class="sig-paren">(</span><em>S=None</em>, <em>tf='lab'</em>, <em>cieobs='1931_2'</em>, <em>out='COI</em>, <em>cct'</em>, <em>extrapolate_rfl=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/ASNZS_1680_2_5_1997_COI.html#spd_to_COI_ASNZS1680"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_COI_ASNZS1680" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Cyanosis Observation Index (COI) [ASNZS 1680.2.5-1995].</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">S:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with light source spectrum (first column are wavelengths).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tf:</th><td class="field-body"><div class="first last line-block">
<div class="line">_COI_CSPACE, optional</div>
<div class="line">Color space in which to calculate the COI.</div>
<div class="line">Default is CIELAB.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_COI_CIEOBS, optional</div>
<div class="line">CMF set to use. </div>
<div class="line">Default is ‘1931_2’.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘COI,cct’ or str, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">extrapolate_rfl:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: </div>
<div class="line-block">
<div class="line">limit the wavelength range of the source to that of the standard</div>
<div class="line">reflectance spectra for the 50% and 100% oxygenated blood.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">COI:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with cyanosis indices for input sources.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cct:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with correlated color temperatures.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><p class="first">Clause 7.2 of the ASNZS 1680.2.5-1995. standard mentions the properties
demanded of the light source used in region where visual conditions 
suitable to the detection of cyanosis should be provided:</p>
<blockquote class="last">
<div><p>1. The correlated color temperature (CCT) of the source should be from 
3300 to 5300 K.</p>
<ol class="arabic simple" start="2">
<li>The cyanosis observation index should not exceed 3.3</li>
</ol>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_CS_CLa_lrc">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_CS_CLa_lrc</code><span class="sig-paren">(</span><em>El=None</em>, <em>E=None</em>, <em>sum_sources=False</em>, <em>interpolate_sources=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/circadian_CS_CLa_lrc.html#spd_to_CS_CLa_lrc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_CS_CLa_lrc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Circadian Stimulus (CS) and Circadian Light [LRC: Rea et al 2012].</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">El:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray, optional</div>
<div class="line">Defaults to D65</div>
<div class="line">light source spectral irradiance distribution</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">E:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, float or ndarray, optional</div>
<div class="line">Illuminance of light sources.</div>
<div class="line">If None: El is used as is, otherwise El is renormalized to have
an illuminance equal to E.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">sum_sources:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line-block">
<div class="line">- False: calculate CS and CLa for all sources in El array.</div>
<div class="line">- True: sum sources in El to a single source and perform calc.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">interpolate_sources:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line-block">
<div class="line">- True: El is interpolated to wavelength range of efficiency </div>
<div class="line-block">
<div class="line">functions (as in LRC calculator). </div>
</div>
<div class="line">- False: interpolate efficiency functions to source range. </div>
<div class="line-block">
<div class="line">Source interpolation is not recommended due to possible</div>
<div class="line">errors for peaky spectra. </div>
<div class="line">(see CIE15-2004, “Colorimetry”).</div>
</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">CS:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Circadian stimulus values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">CLa:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Circadian Light values</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd><p class="first">1. The original 2012 (E.q. 1) had set the peak wavelength of the 
melanopsin at 480 nm. Rea et al. later published a corrigendum with 
updated model parameters for k, a_{b-y} and a_rod. The comparison table
between showing values calculated for a number of sources with the old
and updated parameters were very close (~1 unit voor CLa).</p>
<p>2. In that corrrection paper they did not mention a change in the
factor (1622) that multiplies the (sum of) the integral(s) in Eq. 1. 
HOWEVER, the excel calculator released in 2017 and the online 
calculator show that factor to have a value of 1547.9. The change in
values due to the new factor is much larger than their the updated 
mentioned in note 1!</p>
<p>3. For reasons of consistency the calculator uses the latest model 
parameters, as could be read from the excel calculator. They values 
adopted are: multiplier 1547.9, k = 0.2616, a_{b-y} = 0.7 and 
a_rod = 3.3.</p>
<p class="last">4. The parameter values to convert CLa to CS were also taken from the 
2017 excel calculator.</p>
</dd>
</dl>
<p>References:</p>
<blockquote>
<div><ol class="arabic simple">
<li><a class="reference external" href="http://www.lrc.rpi.edu/cscalculator/">LRC Online Circadian stimulus calculator</a></li>
<li><a class="reference external" href="http://www.lrc.rpi.edu/resources/CSCalculator_2017_10_03_Mac.xlsm">LRC Excel based Circadian stimulus calculator.</a></li>
</ol>
<p>3. <a class="reference external" href="https://doi.org/10.1177/1477153511430474">Rea MS, Figueiro MG, Bierman A, and Hamner R (2012). 
Modelling the spectral sensitivity of the human circadian system. 
Light. Res. Technol. 44, 386–396.</a></p>
<p>4. <a class="reference external" href="https://doi.org/10.1177/1477153512467607">Rea MS, Figueiro MG, Bierman A, and Hamner R (2012). 
Erratum: Modeling the spectral sensitivity of the human circadian system 
(Lighting Research and Technology (2012) 44:4 (386-396)). 
Light. Res. Technol. 44, 516.</a></p>
</div></blockquote>
</dd></dl>

</div>
</div>
<div class="section" id="indvcmf">
<h2>indvcmf/<a class="headerlink" href="#indvcmf" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>individual_observer_cmf_model.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.indvcmf</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.indvcmf"></span><div class="section" id="module-for-individual-observer-lms-cmfs-asano-2016">
<h3>Module for Individual Observer lms-CMFs (Asano, 2016)<a class="headerlink" href="#module-for-individual-observer-lms-cmfs-asano-2016" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">_INDVCMF_DATA_PATH:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">path to data files</td>
</tr>
<tr class="field-even field"><th class="field-name">_INDVCMF_DATA:</th><td class="field-body">Dict with required data</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">_INDVCMF_STD_DEV_ALL_PARAM:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Dict with std. dev. model parameters</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_INDVCMF_CATOBSPFCTR:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Categorical observer parameters.</td>
</tr>
<tr class="field-odd field"><th class="field-name">_INDVCMF_M_10d:</th><td class="field-body">xyz to 10° lms conversion matrix.</td>
</tr>
<tr class="field-even field"><th class="field-name">_WL_CRIT:</th><td class="field-body">critical wavelength above which interpolation of S-cone data fails.</td>
</tr>
<tr class="field-odd field"><th class="field-name">_WL:</th><td class="field-body">wavelengths of spectral data.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">cie2006cmfsEx():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and 
in physiological parameters.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">getMonteCarloParam():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Get dict with normally-distributed physiological 
factors for a population of observers.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">getUSCensusAgeDist():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Get US Census Age Distribution</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">genMonteCarloObs():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Monte-Carlo generation of individual observer 
color matching functions (cone fundamentals) for a
certain age and field size.</td>
</tr>
<tr class="field-even field"><th class="field-name">getCatObs():</th><td class="field-body">Generate cone fundamentals for categorical observers.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_lms_to_xyz_matrix():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Calculate lms to xyz conversion matrix for a 
specific field size.</td>
</tr>
<tr class="field-even field"><th class="field-name">lmsb_to_xyzb():</th><td class="field-body">Convert from LMS cone fundamentals to XYZ CMF.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">add_to_cmf_dict():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Add set of cmfs to _CMF dict.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="references">
<h4>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L (2016). 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE, and CIE (2006). 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
</div></blockquote>
</div>
<div class="section" id="note">
<h4>Note<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h4>
<p>Port of Matlab code from:
<a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php</a>
(Accessed April 20, 2018)</p>
<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.load_database">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">load_database</code><span class="sig-paren">(</span><em>wl=None</em>, <em>dsrc_std=None</em>, <em>dsrc_lms_odens=None</em>, <em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#load_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.load_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Load database required for Asano Individual Observer Model.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Wavelength range to interpolate data to.</div>
<div class="line">None defaults to the wavelength range associated with data in :dsrc_lms_odens:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">path:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Path where data files are stored (If None: look in ./data/ folder under toolbox path)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">dsrc_std:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘matlab’ code, or ‘germany’) for stdev data on physiological factors.</div>
<div class="line">None defaults to string in _DSRC_STD_DEF</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dsrc_lms_odens:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘asano’, ‘cietc197’) for LMS absorbance and optical density data.</div>
<div class="line">None defaults to string in _DSRC_LMS_ODENS_DEF</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with data for:</div>
<div class="line">- ‘LMSa’: LMS absorbances </div>
<div class="line">- ‘rmd’: relative macular pigment density </div>
<div class="line">- ‘docul’: ocular media optical density </div>
<div class="line">- ‘USCensus2010population’: data (age and numbers) on a 2010 US Census </div>
<div class="line">- ‘CatObsPfctr’: dict with iteratively derived Categorical Observer physiological stdevs.</div>
<div class="line">- ‘M2d’: Asano 2° lms to xyz conversion matrix </div>
<div class="line">- ‘M10d’: Asano 10° lms to xyz conversion matrix </div>
<div class="line">- standard deviations on physiological parameters: ‘od_lens’, ‘od_macula’, ‘od_L’, ‘od_M’, ‘od_S’, ‘shft_L’, ‘shft_M’, ‘shft_S’</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.init">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">init</code><span class="sig-paren">(</span><em>wl=None</em>, <em>dsrc_std=None</em>, <em>dsrc_lms_odens=None</em>, <em>lms_to_xyz_method=None</em>, <em>use_sign_figs=True</em>, <em>use_my_round=True</em>, <em>use_chop=True</em>, <em>path=None</em>, <em>out=None</em>, <em>verbosity=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize: load database required for Asano Individual Observer Model 
into the default _DATA dict and set some options for rounding, 
sign. figs and chopping small value to zero; for source data to use for 
spectral data for LMS absorp. and optical desnities, …</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Wavelength range to interpolate data to.</div>
<div class="line">None defaults to the wavelength range associated with data in :dsrc_lms_odens:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dsrc_std:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘matlab’ code, or ‘germany’) for stdev data on physiological factors.</div>
<div class="line">None defaults to string in _DSRC_STD_DEF</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">dsrc_lms_odens:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘asano’, ‘cietc197’) for LMS absorbance and optical density data.</div>
<div class="line">None defaults to string in _DSRC_LMS_ODENS_DEF</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">use_my_round:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: use my_rounding() conform CIE TC1-91 Python code ‘ciefunctions’. (slows down code)</div>
<div class="line">by setting _USE_MY_ROUND.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">use_sign_figs:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: use sign_figs() conform CIE TC1-91 Python code ‘ciefunctions’. (slows down code)</div>
<div class="line">by setting _USE_SIGN_FIGS.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">use_chop:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: use chop() conform CIE TC1-91 Python code ‘ciefunctions’. (slows down code)</div>
<div class="line">by setting _USE_CHOP.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">path:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Path where data files are stored (If None: look in ./data/ folder under toolbox path)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If None: only set global variables, do not output _DATA.copy()</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Print new state of global settings.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">if out is not None: return a dict with dict with data for:</div>
<div class="line">- ‘LMSa’: LMS absorbances </div>
<div class="line">- ‘rmd’: relative macular pigment density </div>
<div class="line">- ‘docul’: ocular media optical density </div>
<div class="line">- ‘USCensus2010population’: data (age and numbers) on a 2010 US Census </div>
<div class="line">- ‘CatObsPfctr’: dict with iteratively derived Categorical Observer physiological stdevs.</div>
<div class="line">- ‘M2d’: Asano 2° lms to xyz conversion matrix </div>
<div class="line">- ‘M10d’: Asano 10° lms to xyz conversion matrix </div>
<div class="line">- standard deviations on physiological parameters: ‘od_lens’, ‘od_macula’, ‘od_L’, ‘od_M’, ‘od_S’, ‘shft_L’, ‘shft_M’, ‘shft_S’</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.query_state">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">query_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#query_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.query_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Print current settings for ‘global variables’.</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.cie2006cmfsEx">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">cie2006cmfsEx</code><span class="sig-paren">(</span><em>age=32</em>, <em>fieldsize=10</em>, <em>wl=None</em>, <em>var_od_lens=0</em>, <em>var_od_macula=0</em>, <em>var_od_L=0</em>, <em>var_od_M=0</em>, <em>var_od_S=0</em>, <em>var_shft_L=0</em>, <em>var_shft_M=0</em>, <em>var_shft_S=0</em>, <em>norm_type=None</em>, <em>out='lms'</em>, <em>base=False</em>, <em>strategy_2=True</em>, <em>odata0=None</em>, <em>lms_to_xyz_method=None</em>, <em>allow_negative_values=False</em>, <em>normalize_lms_to_xyz_matrix=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#cie2006cmfsEx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.cie2006cmfsEx" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and in physiological parameters.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">age:</th><td class="field-body"><div class="first last line-block">
<div class="line">32 or float or int, optional</div>
<div class="line">Observer age</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fieldsize:</th><td class="field-body"><div class="first last line-block">
<div class="line">10, optional</div>
<div class="line">Field size of stimulus in degrees (between 2° and 10°).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line">None: output original _WL </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_od_lens:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of lens.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_od_macula:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of macula.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_od_L:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of L-cone.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_od_M:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of M-cone.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_od_S:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of S-cone.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_shft_L:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak wavelength shift [nm] of L-cone. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_shft_L:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak wavelength shift [nm] of M-cone.  </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_shft_S:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak wavelength shift [nm] of S-cone. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">base:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strategy_2:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">odata0:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">allow_negative_values:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">normalize_lms_to_xyz_matrix:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Normalize that EEW is always at [100,100,100] in XYZ and LMS system.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first line-block">
<div class="line">- ‘LMS’ [or ‘XYZ’]: ndarray with individual observer equal area-normalized </div>
<div class="line-block">
<div class="line">cone fundamentals. Wavelength have been added.</div>
</div>
</div>
<div class="last line-block">
<div class="line">[- ‘M’: lms to xyz conversion matrix</div>
<div class="line-block">
<div class="line">-  ‘trans_lens’: ndarray with lens transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘trans_macula’: ndarray with macula transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘sens_photopig’ : ndarray with photopigment sens. </div>
<div class="line-block">
<div class="line">(no interpolation)]</div>
</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L (2016). 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE, and CIE (2006). 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
<p class="last">5. <a class="reference external" href="http://github.com/ifarup/ciefunctions">CIE TC1-97 Python code for cone fundamentals and XYZ cmf calculations 
(by Ivar Farup and Jan Henrik Wold, (c) 2012-2017)</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.getMonteCarloParam">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">getMonteCarloParam</code><span class="sig-paren">(</span><em>n_obs=1</em>, <em>stdDevAllParam={'dsrc': 'matlab'</em>, <em>'od_L': 17.9</em>, <em>'od_M': 17.9</em>, <em>'od_S': 14.7</em>, <em>'od_lens': 19.1</em>, <em>'od_macula': 37.2</em>, <em>'shft_L': 4.0</em>, <em>'shft_M': 3.0</em>, <em>'shft_S': 2.5}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#getMonteCarloParam"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.getMonteCarloParam" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dict with normally-distributed physiological factors 
for a population of observers.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">n_obs:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Number of individual observers in population.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">stdDevAllParam:</th><td class="field-body"><div class="first last line-block">
<div class="line">_DATA[‘stdev’], optional</div>
<div class="line">Dict with parameters for:</div>
<div class="line-block">
<div class="line">[‘od_lens’, ‘od_macula’, </div>
<div class="line-block">
<div class="line">‘od_L’, ‘od_M’, ‘od_S’, </div>
<div class="line">‘shft_L’, ‘shft_M’, ‘shft_S’]</div>
</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with n_obs randomly drawn parameters.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.genMonteCarloObs">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">genMonteCarloObs</code><span class="sig-paren">(</span><em>n_obs=1, fieldsize=10, list_Age=[32], wl=None, norm_type=None, out='lms', base=False, strategy_2=True, odata0=None, lms_to_xyz_method=None, allow_negative_values=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#genMonteCarloObs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.genMonteCarloObs" title="Permalink to this definition">¶</a></dt>
<dd><p>Monte-Carlo generation of individual observer cone fundamentals.</p>
<dl class="docutils">
<dt>Args: </dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">n_obs:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Number of observer CMFs to generate.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">list_Age:</th><td class="field-body"><div class="first last line-block">
<div class="line">list of observer ages or str, optional</div>
<div class="line">Defaults to 32 (cfr. CIE2006 CMFs)</div>
<div class="line">If ‘us_census’: use US population census of 2010 
to generate list_Age.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fieldsize:</th><td class="field-body"><div class="first last line-block">
<div class="line">fieldsize in degrees (between 2° and 10°), optional</div>
<div class="line">Defaults to 10°.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line">None: output original _WL </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">base:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strategy_2:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">odata0:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">allow_negative_values:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">LMS [,var_age, vAll] </div>
<div class="line-block">
<div class="line">- LMS: ndarray with population LMS functions.</div>
<div class="line">- var_age: ndarray with population observer ages.</div>
<div class="line">- vAll: dict with population physiological factors (see .keys()) </div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L (2016). 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE, and CIE (2006). 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p class="last">4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.getCatObs">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">getCatObs</code><span class="sig-paren">(</span><em>n_cat=10</em>, <em>fieldsize=2</em>, <em>wl=None</em>, <em>norm_type=None</em>, <em>out='lms'</em>, <em>base=False</em>, <em>strategy_2=True</em>, <em>odata0=None</em>, <em>lms_to_xyz_method=None</em>, <em>allow_negative_values=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#getCatObs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.getCatObs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate cone fundamentals for categorical observers.</p>
<dl class="docutils">
<dt>Args: </dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">n_cat:</th><td class="field-body"><div class="first last line-block">
<div class="line">10, optional</div>
<div class="line">Number of observer CMFs to generate.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fieldsize:</th><td class="field-body"><div class="first last line-block">
<div class="line">fieldsize in degrees (between 2° and 10°), optional</div>
<div class="line">Defaults to 10°.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘LMS’ or str, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line-block">
<div class="line">None: output original _WL </div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">base:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strategy_2:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">odata0:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">allow_negative_values:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">LMS [,var_age, vAll] </div>
<div class="line-block">
<div class="line">- LMS: ndarray with population LMS functions.</div>
<div class="line">- var_age: ndarray with population observer ages.</div>
<div class="line">- vAll: dict with population physiological factors (see .keys()) </div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd><p class="first">1. Categorical observers are observer functions that would represent 
color-normal populations. They are finite and discrete as opposed to 
observer functions generated from the individual colorimetric observer 
model. Thus, they would offer more convenient and practical approaches
for the personalized color imaging workflow and color matching analyses.
Categorical observers were derived in two steps. 
At the first step, 10000 observer functions were generated from the 
individual colorimetric observer model using Monte Carlo simulation. 
At the second step, the cluster analysis, a modified k-medoids 
algorithm, was applied to the 10000 observers minimizing the squared 
Euclidean distance in cone fundamentals space, and categorical 
observers were derived iteratively. Since the proposed categorical 
observers are defined by their physiological parameters and ages, their
CMFs can be derived for any target field size.
2. Categorical observers were ordered by the importance; 
the first categorical observer vas the average observer equivalent to 
CIEPO06 with 38 year-old for a given field size, followed by the second
most important categorical observer, the third, and so on.</p>
<ol class="last arabic simple" start="3">
<li>see: <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php</a></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.compute_cmfs">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">compute_cmfs</code><span class="sig-paren">(</span><em>fieldsize=10, age=32, wl=None, var_od_lens=0, var_od_macula=0, var_shft_LMS=[0, 0, 0], var_od_LMS=[0, 0, 0], norm_type=None, out='lms', base=False, strategy_2=True, odata0=None, lms_to_xyz_method=None, allow_negative_values=False, normalize_lms_to_xyz_matrix=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#compute_cmfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.compute_cmfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and in physiological parameters.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">age:</th><td class="field-body"><div class="first last line-block">
<div class="line">32 or float or int, optional</div>
<div class="line">Observer age</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fieldsize:</th><td class="field-body"><div class="first last line-block">
<div class="line">10, optional</div>
<div class="line">Field size of stimulus in degrees (between 2° and 10°).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line">None: output original _WL</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_od_lens:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Variation of optical density of lens.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_od_macula:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Variation of optical density of macula.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_shft_LMS:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0, 0, 0] optional</div>
<div class="line">Variation (shift) of LMS peak absorptance.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_od_LMS:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0, 0, 0] optional</div>
<div class="line">Variation of LMS optical densities.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">base:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strategy_2:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">odata0:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">allow_negative_values:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">normalize_lms_to_xyz_matrix:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Normalize that EEW is always at [100,100,100] in XYZ and LMS system.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first line-block">
<div class="line">- ‘LMS’ [or ‘XYZ’]: ndarray with individual observer equal area-normalized </div>
<div class="line-block">
<div class="line">cone fundamentals. Wavelength have been added.</div>
</div>
</div>
<div class="last line-block">
<div class="line">[- ‘M’: lms to xyz conversion matrix</div>
<div class="line-block">
<div class="line">-  ‘trans_lens’: ndarray with lens transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘trans_macula’: ndarray with macula transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘sens_photopig’ : ndarray with photopigment sens. </div>
<div class="line-block">
<div class="line">(no interpolation)]</div>
</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L (2016). 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE, and CIE (2006). 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
<p class="last">5. <a class="reference external" href="http://github.com/ifarup/ciefunctions">CIE TC1-97 Python code for cone fundamentals and XYZ cmf calculations 
(by Ivar Farup and Jan Henrik Wold, (c) 2012-2017)</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.plot_cmfs">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">plot_cmfs</code><span class="sig-paren">(</span><em>cmf</em>, <em>axh=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#plot_cmfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.plot_cmfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot cmf set.</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.add_to_cmf_dict">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">add_to_cmf_dict</code><span class="sig-paren">(</span><em>bar=None, cieobs='indv', K=683, M=array([[1.0000e+00, 0.0000e+00, 0.0000e+00],        [0.0000e+00, 1.0000e+00, 0.0000e+00],        [0.0000e+00, 0.0000e+00, 1.0000e+00]])</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#add_to_cmf_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.add_to_cmf_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Add set of cmfs to _CMF dict.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">bar:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Set of CMFs. None: initializes to empty ndarray.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘indv’ or str, optional</div>
<div class="line">Name of CMF set.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">K:</th><td class="field-body"><div class="first last line-block">
<div class="line">683 (lm/W), optional</div>
<div class="line">Conversion factor from radiometric to photometric quantity.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">np.eye, optional</div>
<div class="line">Matrix for lms to xyz conversion.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">plot_cmfs</code><span class="sig-paren">(</span><em>cmf</em>, <em>axh=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#plot_cmfs"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Plot cmf set.</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="spdbuild">
<h2>spdbuild/<a class="headerlink" href="#spdbuild" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>spdbuilder.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.spdbuild/</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.spdbuild"></span><div class="section" id="module-for-building-and-optimizing-spds">
<h3>Module for building and optimizing SPDs<a class="headerlink" href="#module-for-building-and-optimizing-spds" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">gaussian_spd():</th><td class="field-body">Generate Gaussian spectrum.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">butterworth_spd():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Generate Butterworth based spectrum.</td>
</tr>
<tr class="field-odd field"><th class="field-name">mono_led_spd():</th><td class="field-body">Generate monochromatic LED spectrum based on a Gaussian 
or butterworth profile or according to Ohno (Opt. Eng. 2005).</td>
</tr>
<tr class="field-even field"><th class="field-name">spd_builder():</th><td class="field-body">Build spectrum based on Gaussians, monochromatic 
and/or phophor LED spectra.</td>
</tr>
<tr class="field-odd field"><th class="field-name">color3mixer():</th><td class="field-body">Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing 3 light sources.</td>
</tr>
<tr class="field-even field"><th class="field-name">colormixer():</th><td class="field-body">Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing N light sources.</td>
</tr>
<tr class="field-odd field"><th class="field-name">spd_builder():</th><td class="field-body">Build spectrum based on Gaussians, monochromatic 
and/or phophor LED-type spectra.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_w_summed_spd():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Calculate weighted sum of spds.</td>
</tr>
<tr class="field-odd field"><th class="field-name">fitnessfcn():</th><td class="field-body">Fitness function that calculates closeness of solution x to 
target values for specified objective functions.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_constructor_2():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Construct spd from spectral model parameters 
using pairs of intermediate sources.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_constructor_3():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Construct spd from spectral model parameters 
using trio’s of intermediate sources.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_optimizer_2_3():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Optimizes the weights (fluxes) of a set of component 
spectra by combining pairs (2) or trio’s (3) of 
components to intermediate sources until only 3 remain.
Color3mixer can then be called to calculate required 
fluxes to obtain target chromaticity and fluxes are 
then back-calculated.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_optim_pars_dict():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Setup dict with optimization parameters.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">initialize_spd_model_pars():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Initialize spd_model_pars (for spd_constructor)
based on type of component_data.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">initialize_spd_optim_pars():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Initialize spd_optim_pars (x0, lb, ub for use
with math.minimizebnd) based on type 
of component_data.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_optimizer():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Generate a spectrum with specified white point and optimized
for certain objective functions from a set of component 
spectra or component spectrum model parameters.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.gaussian_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">gaussian_spd</code><span class="sig-paren">(</span><em>peakwl=530, fwhm=20, wl=[360.0, 830.0, 1.0], with_wl=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#gaussian_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.gaussian_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Gaussian spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><div class="first last line-block">
<div class="line">Gaussian:</div>
<div class="line-block">
<div class="line">g = exp(-0.5*((wl - peakwl)/fwhm)**2)</div>
</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.butterworth_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">butterworth_spd</code><span class="sig-paren">(</span><em>peakwl=530, fwhm=20, bw_order=1, wl=[360.0, 830.0, 1.0], with_wl=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#butterworth_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.butterworth_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Butterworth based spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of butterworth.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">bw_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Order of the butterworth function.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra.    </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><div class="first last line-block">
<div class="line">Butterworth :</div>
<div class="line-block">
<div class="line">bw = 1 / (1 + ((2*(wl - peakwl)/fwhm)**2))</div>
</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.lorentzian2_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">lorentzian2_spd</code><span class="sig-paren">(</span><em>peakwl=530, fwhm=20, wl=[360.0, 830.0, 1.0], with_wl=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#lorentzian2_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.lorentzian2_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 2nd order Lorentzian spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of lorentzian.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><div class="first last line-block">
<div class="line">Lorentzian (2nd order):</div>
<div class="line-block">
<div class="line">lz = (1 + ((n*(wl - peakwl)/fwhm)**2))**(-2)</div>
<div class="line-block">
<div class="line">with n = 2*(2**0.5-1)**0.5</div>
</div>
</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.mono_led_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">mono_led_spd</code><span class="sig-paren">(</span><em>peakwl=530, fwhm=20, wl=[360.0, 830.0, 1.0], with_wl=True, strength_shoulder=2, bw_order=-1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#mono_led_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.mono_led_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate monochromatic LED spectrum based on a Gaussian or or Lorentzian or butterworth
profile or according to Ohno (Opt. Eng. 2005).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate led.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line-block">
<div class="line">Wavelength range.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">strength_shoulder:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">2, optional</div>
<div class="line">Determines the strength of the spectrum shoulders of the mono led.</div>
<div class="line">A value of 0 reduces to a pure Gaussian model (if bw_order &gt;= -1).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">bw_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">-1, optional</div>
<div class="line">Order of Butterworth function.</div>
<div class="line">If -1 or 0: spd profile is Ohno’s gaussian based</div>
<div class="line-block">
<div class="line">(to obtain pure Gaussian: set strength_shoulder = 0).</div>
</div>
<div class="line">If -2: spd profile is Lorentzian,</div>
<div class="line">else (&gt;0): Butterworth.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra.   </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><div class="first last line-block">
<div class="line">Gaussian:</div>
<div class="line-block">
<div class="line">g = exp(-0.5*((wl - peakwl)/fwhm)**2)</div>
<div class="line"><br /></div>
</div>
<div class="line">Lorentzian (2nd order):</div>
<div class="line-block">
<div class="line">lz = (1 + ((n*(wl - peakwl)/fwhm)**2))**(-2)</div>
<div class="line-block">
<div class="line">with n = 2*(2**0.5-1)**0.5</div>
<div class="line"><br /></div>
</div>
</div>
<div class="line">Butterworth :</div>
<div class="line-block">
<div class="line">bw = 1 / (1 + ((2*(wl - peakwl)/fwhm)**2))</div>
<div class="line"><br /></div>
</div>
<div class="line">Ohno’s model:</div>
<div class="line-block">
<div class="line">ohno = (g + strength_shoulder*g**5)/(1+strength_shoulder)</div>
<div class="line"><br /></div>
<div class="line">mono_led_spd = ohno*((bw_order &gt;= -1) &amp; (bw_order &lt;= 0)).T + bw*(bw_order &gt; 0).T + lz*((bw_order &gt;=-2) &amp; (bw_order &lt; -1)).T</div>
</div>
</div>
</dd>
<dt>Reference:</dt>
<dd>1. <a class="reference external" href="https://ws680.nist.gov/publication/get_pdf.cfm?pub_id=841839">Ohno Y (2005). 
Spectral design considerations for white LED color rendering. 
Opt. Eng. 44, 111302.</a></dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.phosphor_led_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">phosphor_led_spd</code><span class="sig-paren">(</span><em>peakwl=450, fwhm=20, wl=[360.0, 830.0, 1.0], bw_order=-1, with_wl=True, strength_shoulder=2, strength_ph=0, peakwl_ph1=530, fwhm_ph1=80, strength_ph1=1, peakwl_ph2=560, fwhm_ph2=80, strength_ph2=None, use_piecewise_fcn=False, verbosity=0, out='spd'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#phosphor_led_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.phosphor_led_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate phosphor LED spectrum with up to 2 phosphors based on Smet (Opt. Expr. 2011).</p>
<div class="line-block">
<div class="line">Model:</div>
<div class="line-block">
<div class="line">1) If strength_ph2 is not None:</div>
<div class="line-block">
<div class="line-block">
<div class="line">phosphor_spd = (strength_ph1*mono_led_spd(peakwl_ph1, …, strength_shoulder = 1) </div>
<div class="line-block">
<div class="line">+ strength_ph2)*mono_led_spd(peakwl_ph2, …, strength_shoulder = 1)) </div>
<div class="line-block">
<div class="line">/ (strength_ph1 + strength_ph2)</div>
</div>
</div>
</div>
<div class="line">else:</div>
<div class="line-block">
<div class="line">phosphor_spd = (strength_ph1*mono_led_spd(peakwl_ph1, …, strength_shoulder = 1) </div>
<div class="line-block">
<div class="line">+ (1-strength_ph1)*mono_led_spd(peakwl_ph2, …, strength_shoulder = 1)) </div>
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="line">2) S = (mono_led_spd() + strength_ph*(phosphor_spd/phosphor_spd.max()))/(1 + strength_ph)</div>
<div class="line"><br /></div>
<div class="line">3) piecewise_fcn = S for wl &lt; peakwl and 1 for wl &gt;= peakwl</div>
<div class="line"><br /></div>
<div class="line">4) phosphor_led_spd = S*piecewise_fcn </div>
</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelengths of the monochromatic led.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of mono_led spectrum.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">bw_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">-1, optional</div>
<div class="line">Order of Butterworth function.</div>
<div class="line">If -1 or 0: spd profile is Ohno’s gaussian based</div>
<div class="line-block">
<div class="line">(to obtain pure Gaussian: set strength_shoulder = 0).</div>
</div>
<div class="line">If -2: spd profile is Lorentzian,</div>
<div class="line">else (&gt;0): Butterworth.</div>
<div class="line">Note that this only applies to the monochromatic led  spds and not </div>
<div class="line">the phosphors spds (these are always gaussian based).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">strength_shoulder:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">2, optiona l</div>
<div class="line">Determines the strength of the spectrum shoulders of the mono led.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strength_ph:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Total contribution of phosphors in mixture.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">peakwl_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the first phosphor.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fwhm_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate first phosphor.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strength_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Strength of first phosphor in phosphor mixture. </div>
<div class="line">If :strength_ph2: is None: value should be in the [0,1] range.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">peakwl_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the second phosphor.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate second phosphor.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strength_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Strength of second phosphor in phosphor mixture. </div>
<div class="line">If None: strength is calculated as (1-:strength_ph1:)</div>
<div class="line-block">
<div class="line-block">
<div class="line">:target: np2d([100,1/3,1/3]), optional</div>
</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: plots spectrum components (mono_led, ph1, ph2, …)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘spd’, optional</div>
<div class="line">Specifies output.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">use_piecewise_fcn:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">True: uses piece-wise function as in Smet et al. 2011. Can give 
non_smooth spectra optimized from components to which it is
applied. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">spd, component_spds</div>
<div class="line">ndarrays with spectra (and component spds used to build the 
final spectra) </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="https://ws680.nist.gov/publication/get_pdf.cfm?pub_id=841839">Ohno Y (2005). 
Spectral design considerations for white LED color rendering. 
Opt. Eng. 44, 111302.</a></p>
<p class="last">2. <a class="reference external" href="https://www.osapublishing.org/vjbo/fulltext.cfm?uri=oe-19-7-6903&amp;id=211315">Smet K, Ryckaert WR, Pointer MR, Deconinck G, and Hanselaer P (2011). 
Optimal colour quality of LED clusters based on memory colours. 
Opt. Express 19, 6903–6912.</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_builder">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_builder</code><span class="sig-paren">(</span><em>flux=None, component_spds=None, peakwl=450, fwhm=20, bw_order=-1, pair_strengths=None, wl=[360.0, 830.0, 1.0], with_wl=True, strength_shoulder=2, strength_ph=0, peakwl_ph1=530, fwhm_ph1=80, strength_ph1=1, peakwl_ph2=560, fwhm_ph2=80, strength_ph2=None, target=None, tar_type='Yuv', cspace_bwtf={}, cieobs='1931_2', use_piecewise_fcn=False, verbosity=0, out='spd', **kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Build spectrum based on Gaussian, monochromatic and/or phophor type spectra.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">flux:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Fluxes of each of the component spectra.</div>
<div class="line">None outputs the individual component spectra.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">component_spds:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or ndarray, optional</div>
<div class="line">If None: calculate component spds from input args.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelengths of the monochromatic led.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional (but must be same shape as peakw!)</div>
<div class="line">Full-Width-Half-Maximum of gaussian.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">bw_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">-1, optional</div>
<div class="line">Order of Butterworth function.</div>
<div class="line">If -1 or 0: spd profile is Ohno’s gaussian based</div>
<div class="line-block">
<div class="line">(to obtain pure Gaussian: set strength_shoulder = 0).</div>
</div>
<div class="line">If -2: spd profile is Lorentzian,</div>
<div class="line">else (&gt;0): Butterworth.</div>
<div class="line">Note that this only applies to the monochromatic led  spds and not </div>
<div class="line">the phosphors spds (these are always gaussian based).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">pair_strengths:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with pair_strengths of mono_led spds, optional</div>
<div class="line">If None: will be randomly selected, possibly resulting in 
unphysical (out-of-gamut) solution.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">strength_shoulder:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">2, optiona l</div>
<div class="line">Determines the strength of the spectrum shoulders of the mono led.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strength_ph:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Total contribution of phosphors in mixture.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">peakwl_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the first phosphor.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate first phosphor.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strength_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Strength of first phosphor in phosphor mixture. </div>
<div class="line">If :strength_ph2: is None: value should be in the [0,1] range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">peakwl_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the second phosphor.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fwhm_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate second phosphor.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strength_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Strength of second phosphor in phosphor mixture. </div>
<div class="line">If None: strength is calculated as (1-:strength_ph1:)</div>
<div class="line-block">
<div class="line-block">
<div class="line">:target: np2d([100,1/3,1/3]), optional</div>
</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: plots spectrum components (mono_led, ph1, ph2, …)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘spd’, optional</div>
<div class="line">Specifies output.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">use_piecewise_fcn:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">True: uses piece-wise function as in Smet et al. 2011. Can give 
non_smooth spectra optimized from components to which it is
applied. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">target:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
<div class="line">If None: don’t override phosphor strengths, else calculate strength</div>
<div class="line-block">
<div class="line">to obtain :target: using color3mixer().</div>
</div>
<div class="line">If not None AND strength_ph is None or 0: components are 
monochromatic and colormixer is used to optimize fluxes to 
obtain target chromaticity (N can be &gt; 3 components)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tar_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Yxy’ or str, optional</div>
<div class="line">Specifies the input type in :target: (e.g. ‘Yxy’ or ‘cct’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace_bwtf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Backward (…_to_xyz) transform parameters </div>
<div class="line">(see colortf()) to go from :tar_type: to ‘Yxy’)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra.  </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd>1. Target-optimization is only for phophor_leds with three components 
(blue pump, ph1 and ph2) spanning a sufficiently large gamut.</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="https://ws680.nist.gov/publication/get_pdf.cfm?pub_id=841839">Ohno Y (2005). 
Spectral design considerations for white LED color rendering. 
Opt. Eng. 44, 111302.</a></p>
<p class="last">2. <a class="reference external" href="https://www.osapublishing.org/vjbo/fulltext.cfm?uri=oe-19-7-6903&amp;id=211315">Smet K, Ryckaert WR, Pointer MR, Deconinck G, and Hanselaer P (2011). 
Optimal colour quality of LED clusters based on memory colours. 
Opt. Express 19, 6903–6912.</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.get_w_summed_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">get_w_summed_spd</code><span class="sig-paren">(</span><em>w</em>, <em>spds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#get_w_summed_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.get_w_summed_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate weighted sum of spds.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">w:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with weigths (e.g. fluxes)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spds:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with component spds.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with weighted sum.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.fitnessfcn">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">fitnessfcn</code><span class="sig-paren">(</span><em>x, spd_constructor, spd_constructor_pars=None, F_rss=True, decimals=[3], obj_fcn=[None], obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], verbosity=0, out='F'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#fitnessfcn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.fitnessfcn" title="Permalink to this definition">¶</a></dt>
<dd><p>Fitness function that calculates closeness of solution x to target values 
for specified objective functions.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with parameter values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_constructor:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">function handle to a function that constructs the spd
from parameter values in :x:.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_constructor_pars:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional,</div>
<div class="line">Parameters required by :spd_constructor:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">F_rss:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Take Root-Sum-of-Squares of ‘closeness’ values between target and 
objective function values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">decimals:</th><td class="field-body"><div class="first last line-block">
<div class="line">3, optional</div>
<div class="line">List of rounding decimals of objective function values.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">List of function handles to objective function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">obj_fcn_weights:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">List of weigths for each obj. fcn</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">List of parameter dicts for each obj. fcn.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">obj_tar_vals:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0] or list, optional</div>
<div class="line">List of target values for each objective function.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘F’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">F:</th><td class="field-body"><div class="first last line-block">
<div class="line">float or ndarray with fitness value for current solution :x:.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_constructor_2">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_constructor_2</code><span class="sig-paren">(</span><em>x</em>, <em>constructor_pars={}</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_constructor_2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_constructor_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct spd from model parameters using pairs of intermediate sources.</p>
<div class="line-block">
<div class="line">Pairs (odd,even) of components are selected and combined using 
‘pair_strength’. This process is continued until only 3 intermediate 
(combined) sources remain. Color3mixer is then used to calculate the 
fluxes for the remaining 3 sources, after which the fluxes of all 
components are back-calculated.</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body"><div class="first last line-block">
<div class="line">vector of optimization parameters.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">constructor_pars:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">dict with model parameters. </div>
<div class="line">Key ‘list’ determines which parameters are in :x: and key ‘len’
(Specifies the number of variables representing each parameter).</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">spd, M, spds</div>
<div class="line">ndarrays with spectrum corresponding to x, M the fluxes of 
the spectral components of spd and spds the spectral components 
themselves.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.color3mixer">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">color3mixer</code><span class="sig-paren">(</span><em>Yxyt</em>, <em>Yxy1</em>, <em>Yxy2</em>, <em>Yxy3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#color3mixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.color3mixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing 3 light sources.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yxyt:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with target Yxy chromaticities.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxy1:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 1.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Yxy2:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 2.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxy3:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 3.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with fluxes.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd>Yxyt, Yxy1, … can contain multiple rows, referring to single mixture.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.colormixer">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">colormixer</code><span class="sig-paren">(</span><em>Yxyt=None</em>, <em>Yxyi=None</em>, <em>n=4</em>, <em>pair_strengths=None</em>, <em>source_order=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#colormixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.colormixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing N light sources.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yxyt:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with target Yxy chromaticities.</div>
<div class="line">Defaults to equi-energy white.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxyi:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources i = 1 to n.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">n:</th><td class="field-body"><div class="first last line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of source components to randomly generate when Yxyi is None.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">pair_strengths:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with light source pair strengths.  </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">source_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with order of source components.</div>
<div class="line">If None: use np.arange(n)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with fluxes.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Algorithm:</th><td class="field-body"><div class="first last line-block">
<div class="line">1. Loop over all source components and create intermediate sources</div>
<div class="line-block">
<div class="line">from all (even,odd)-pairs using the relative strengths </div>
<div class="line-block">
<div class="line">of the pair (specified in pair_strengths). </div>
</div>
</div>
<div class="line">2. Collect any remaining sources.</div>
<div class="line">3. Combine with new intermediate source components</div>
<div class="line">4. Repeat 1-3 until there are only 3 source components left. </div>
<div class="line">5. Use color3mixer to calculate the required fluxes of the 3 final</div>
<div class="line-block">
<div class="line">intermediate components to obtain the target chromaticity. </div>
</div>
<div class="line">6. Backward calculate the fluxes of all original source components</div>
<div class="line-block">
<div class="line">from the 3 final intermediate fluxes.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_constructor_3">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_constructor_3</code><span class="sig-paren">(</span><em>x</em>, <em>constructor_pars={}</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_constructor_3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_constructor_3" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct spd from model parameters using trio’s of intermediate sources.</p>
<div class="line-block">
<div class="line">The triangle/trio method creates for all possible combinations of 3 primary
component spectra a spectrum that results in the target chromaticity 
using color3mixer() and then optimizes the weights of each of the latter 
spectra such that adding them (additive mixing) results in obj_vals as 
close as possible to the target values.</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body"><div class="first last line-block">
<div class="line">vector of optimization parameters.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">constructor_pars:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">dict with model parameters. </div>
<div class="line">Key ‘list’ determines which parameters are in :x: and key ‘len’
(specifies the number of variables representing each parameter).</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">spd, M, spds</div>
<div class="line">ndarrays with spectrum corresponding to x, M the fluxes of 
the spectral components of spd and spds the spectral components 
themselves.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_optimizer_2_3">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_optimizer_2_3</code><span class="sig-paren">(</span><em>optimizer_type='2mixer', spd_constructor=None, spd_model_pars=None, component_data=4, N_components=None, wl=[360.0, 830.0, 1.0], allow_nongaussianbased_mono_spds=False, Yxy_target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), cieobs='1931_2', obj_fcn=[None], obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], decimals=[5], minimize_method='nelder-mead', minimize_opts=None, F_rss=True, verbosity=0, **kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_optimizer_2_3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_optimizer_2_3" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimizes the weights (fluxes) of a set of component spectra by combining 
pairs (2) or trio’s (3) of components to intermediate sources until only 3
remain. Color3mixer can then be called to calculate required fluxes to
obtain target chromaticity and fluxes are then back-calculated.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">optimizer_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘2mixer’ or ‘3mixer’ or ‘user’, optional</div>
<div class="line">Specifies whether to optimize spectral model parameters by 
combining pairs or trio’s of comonponents.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_constructor:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Function handle to user defined spd_constructor function.</div>
<div class="line-block">
<div class="line">Input: fcn(x, constructor_pars = {}, kwargs)</div>
<div class="line">Output: spd,M,spds</div>
<div class="line-block">
<div class="line">nd array with:</div>
<div class="line-block">
<div class="line-block">
<div class="line">- spd: spectrum resulting from x</div>
</div>
<div class="line">- M: fluxes of all component spds</div>
<div class="line-block">
<div class="line">- spds: component spds (in [N+1,wl] format)</div>
</div>
</div>
</div>
</div>
<div class="line">(See e.g. spd_constructor_2 or spd_constructor_3)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">spd_model_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with model parameters required by spd_constructor
and with optimization parameters required by minimize (x0, lb, ub).                .</div>
<div class="line">Only used when :optimizer_type: == ‘user’.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">component_data:</th><td class="field-body"><div class="first last line-block">
<div class="line">4, optional</div>
<div class="line">Component spectra data: </div>
<div class="line">If int: specifies number of components used in optimization </div>
<div class="line-block">
<div class="line">(peakwl, fwhm and pair_strengths will be optimized).</div>
</div>
<div class="line">If dict: generate components based on parameters (peakwl, fwhm, </div>
<div class="line-block">
<div class="line-block">
<div class="line">pair_strengths, etc.) in dict. </div>
</div>
<div class="line">(keys with None values will be optimized)</div>
</div>
<div class="line">If ndarray: optimize pair_strengths of component spectra.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">N_components:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used 
when :component_data: is dict and user wants to override dict. </div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">allow_nongaussianbased_mono_spds:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">False: use pure Gaussian based monochrom. spds.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not </div>
<div class="line">ndarray with spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxy_target:</th><td class="field-body"><div class="first last line-block">
<div class="line">np2d([100,1/3,1/3]), optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values if not provided 
in :Yxyi:.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">F_rss:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Take Root-Sum-of-Squares of ‘closeness’ values between target and 
objective function values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">decimals:</th><td class="field-body"><div class="first last line-block">
<div class="line">5, optional</div>
<div class="line">Rounding decimals of objective function values.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Function handles to objective function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">obj_fcn_weights:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">Weigths for each obj. fcn</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Parameter dicts for each obj. fcn.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">obj_tar_vals:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Target values for each objective function.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">minimize_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">‘nelder-mead’, optional</div>
<div class="line">Optimization method used by minimize function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">minimize_opts:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with minimization options. </div>
<div class="line">None defaults to: {‘xtol’: 1e-5, ‘disp’: True, ‘maxiter’: 1000*Nc,</div>
<div class="line-block">
<div class="line">‘maxfev’ : 1000*Nc,’fatol’: 0.01}</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">M, spd_opt, obj_vals</div>
<div class="line-block">
<div class="line">- ‘M’: ndarray with fluxes for each component spectrum.</div>
<div class="line">- ‘spd_opt’: optimized spectrum.</div>
<div class="line">- ‘obj_vals’: values of the obj. fcns for the optimized spectrum.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.get_optim_pars_dict">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">get_optim_pars_dict</code><span class="sig-paren">(</span><em>target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), tar_type='Yxy', cieobs='1931_2', optimizer_type='2mixer', spd_constructor=None, spd_model_pars=None, cspace='Yuv', cspace_bwtf={}, cspace_fwtf={}, component_spds=None, N_components=None, obj_fcn=[None], obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], decimals=[5], minimize_method='nelder-mead', minimize_opts=None, F_rss=True, peakwl=[450, 530, 610], fwhm=[20, 20, 20], allow_nongaussianbased_mono_spds=False, bw_order=[-1], wl=[360.0, 830.0, 1.0], with_wl=True, strength_shoulder=2, strength_ph=[0], use_piecewise_fcn=False, peakwl_ph1=[530], fwhm_ph1=[80], strength_ph1=[1], peakwl_ph2=[560], fwhm_ph2=[80], strength_ph2=None, verbosity=0, pair_strengths=None, triangle_strengths=None, peakwl_min=[400], peakwl_max=[700], fwhm_min=[5], fwhm_max=[300], bw_order_min=[-2], bw_order_max=[100]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#get_optim_pars_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.get_optim_pars_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup dict with optimization parameters.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>See  ?spd_optimizer for more info.</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">opts:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with keys and values of the function’s keywords and values.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.initialize_spd_model_pars">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">initialize_spd_model_pars</code><span class="sig-paren">(</span><em>component_data, N_components=None, allow_nongaussianbased_mono_spds=False, optimizer_type='2mixer', wl=[360.0, 830.0, 1.0]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#initialize_spd_model_pars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.initialize_spd_model_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize spd_model_pars dict (for spd_constructor) based on type 
of component_data.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">component_data:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Component spectra data: </div>
<div class="line">If int: specifies number of components used in optimization </div>
<div class="line-block">
<div class="line">(peakwl, fwhm and pair_strengths will be optimized).</div>
</div>
<div class="line">If dict: generate components based on parameters (peakwl, fwhm, </div>
<div class="line-block">
<div class="line-block">
<div class="line">pair_strengths, etc.) in dict. </div>
</div>
<div class="line">(keys with None values will be optimized)</div>
</div>
<div class="line">If ndarray: optimize pair_strengths of component spectra.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N_components:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used </div>
<div class="line">when :component_data: is dict and user wants to override dict. </div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">allow_nongaussianbased_mono_spds:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line-block">
<div class="line">- False: use Gaussian based monochrom. spds.</div>
<div class="line">- True: also allow butterworth and lorentzian type monochrom. spds while optimizing.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">optimizer_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘2mixer’, optional</div>
<div class="line">Type of spectral optimization routine.</div>
<div class="line">(other options: ‘3mixer’, ‘search’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not an
ndarray with spectral data.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd_model_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with spectrum-model parameters</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.initialize_spd_optim_pars">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">initialize_spd_optim_pars</code><span class="sig-paren">(</span><em>component_data, N_components=None, allow_nongaussianbased_mono_spds=False, optimizer_type='2mixer', wl=[360.0, 830.0, 1.0], spd_model_pars=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#initialize_spd_optim_pars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.initialize_spd_optim_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize spd_optim_pars dict based on type of component_data.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">component_data:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Component spectra data: </div>
<div class="line">If int: specifies number of components used in optimization </div>
<div class="line-block">
<div class="line">(peakwl, fwhm and pair_strengths will be optimized).</div>
</div>
<div class="line">If dict: generate components based on parameters (peakwl, fwhm, </div>
<div class="line-block">
<div class="line-block">
<div class="line">pair_strengths, etc.) in dict. </div>
</div>
<div class="line">(keys with None values will be optimized)</div>
</div>
<div class="line">If ndarray: optimize pair_strengths of component spectra.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N_components:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used 
when :component_data: is dict and user wants to override dict. </div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">allow_nongaussianbased_mono_spds:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">False: use Gaussian based monochrom. spds.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">optimizer_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘2mixer’, optional</div>
<div class="line">Type of spectral optimization routine.
(other options: ‘3mixer’, ‘search’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not an
ndarray with spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spd_model_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If None, initialize based on type of component_data.</div>
<div class="line">else: initialize on pre-defined spd_model_pars dict.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd_optim_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with optimization parameters (x0, ub, lb)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.get_primary_fluxratios">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">get_primary_fluxratios</code><span class="sig-paren">(</span><em>res</em>, <em>primaries</em>, <em>Ytarget=1</em>, <em>ptype='pu'</em>, <em>cieobs='1931_2'</em>, <em>out='M</em>, <em>Sopt'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#get_primary_fluxratios"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.get_primary_fluxratios" title="Permalink to this definition">¶</a></dt>
<dd><p>Get flux ratios of primaries.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">res:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict or ndarray with optimized fluxes for component spds normalized to max = 1.</div>
<div class="line">(output of spd_optimizer)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">primaries:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with primary spectra.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Ytarget:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">M will be scaled to result in a photo-/radio-metric power of Ytarget</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">ptype:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘pu’ or ‘ru’, optional</div>
<div class="line">Type of power:</div>
<div class="line">-‘pu’: photometric units</div>
<div class="line">-‘ru’: radiometric units</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set/Vlambda to use in calculation of power.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with flux ratios.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Sopt:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with optimized scaled spectrum.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_optimizer">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_optimizer</code><span class="sig-paren">(</span><em>target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), tar_type='Yxy', cieobs='1931_2', optimizer_type='2mixer', spd_constructor=None, spd_model_pars=None, cspace='Yuv', cspace_bwtf={}, cspace_fwtf={}, component_spds=None, N_components=None, obj_fcn=[None], obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], decimals=[5], minimize_method='nelder-mead', minimize_opts=None, F_rss=True, peakwl=[450, 530, 610], fwhm=[20, 20, 20], allow_nongaussianbased_mono_spds=False, bw_order=[-1], wl=[360.0, 830.0, 1.0], with_wl=True, strength_shoulder=2, strength_ph=[0], use_piecewise_fcn=False, peakwl_ph1=[530], fwhm_ph1=[80], strength_ph1=[1], peakwl_ph2=[560], fwhm_ph2=[80], strength_ph2=None, verbosity=0, pair_strengths=None, peakwl_min=[400], peakwl_max=[700], fwhm_min=[5], fwhm_max=[300], bw_order_min=-2, bw_order_max=100, out='spds,M'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_optimizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_optimizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a spectrum with specified white point and optimized for certain 
objective functions from a set of component spectra or component spectrum 
model parameters.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">target:</th><td class="field-body"><div class="first last line-block">
<div class="line">np2d([100,1/3,1/3]), optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tar_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Yxy’ or str, optional</div>
<div class="line">Specifies the input type in :target: (e.g. ‘Yxy’ or ‘cct’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values, if not provided 
in :Yxyi:.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">optimizer_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘2mixer’,  optional</div>
<div class="line">Specifies type of chromaticity optimization </div>
<div class="line">(‘3mixer’ or ‘2mixer’ or ‘search’)</div>
<div class="line">For help on ‘2mixer’ and ‘3mixer’ algorithms, see notes below.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_constructor:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Function handle to user defined spd_constructor function.</div>
<div class="line-block">
<div class="line">Input: fcn(x, constructor_pars = {}, kwargs)</div>
<div class="line">Output: spd,M,spds</div>
<div class="line-block">
<div class="line">nd array with:</div>
<div class="line-block">
<div class="line">- spd: spectrum resulting from x</div>
<div class="line">- M: fluxes of all component spds</div>
<div class="line">- spds: component spds (in [N+1,wl] format)</div>
</div>
</div>
</div>
<div class="line">(See e.g. spd_constructor_2 or spd_constructor_3)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spd_model_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with model parameters required by spd_constructor
and with optimization parameters required by minimize (x0, lb, ub).                .</div>
<div class="line">Only used when :optimizer_type: == ‘user’.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Yuv’, optional</div>
<div class="line">Color space for ‘search’-type optimization. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cspace_bwtf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Backward (cspace_to_xyz) transform parameters </div>
<div class="line">(see colortf()) to go from :tar_type: to ‘Yxy’).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace_fwtf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Forward (xyz_to_cspace) transform parameters </div>
<div class="line">(see colortf()) to go from xyz to :cspace:).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">component_spds:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of component spectra.</div>
<div class="line">If None: they are built from input args.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">N_components:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used 
when :component_data: is dict and user wants to override dict value</div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">allow_nongaussianbased_mono_spds:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">False: use Ohno monochromatic led spectra based on Gaussian spds.</div>
<div class="line">True: also use Butterworth and Lorentzian spds.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not an
ndarray with spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">F_rss:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Take Root-Sum-of-Squares of ‘closeness’ values between target and 
objective function values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">decimals:</th><td class="field-body"><div class="first last line-block">
<div class="line">5, optional</div>
<div class="line">Rounding decimals of objective function values.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Function handles to objective function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">obj_fcn_weights:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">Weigths for each obj. fcn</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Parameter dicts for each obj. fcn.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">obj_tar_vals:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Target values for each objective function.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">minimize_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">‘nelder-mead’, optional</div>
<div class="line">Optimization method used by minimize function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">minimize_opts:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with minimization options. </div>
<div class="line-block">
<div class="line">None defaults to: {‘xtol’: 1e-5, ‘disp’: True, ‘maxiter’: 1000*Nc,</div>
<div class="line-block">
<div class="line">‘maxfev’ : 1000*Nc,’fatol’: 0.01}</div>
</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘spds,M’, optional</div>
<div class="line">Determines output of function.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd>peakwl:, :fwhm:, … : see ?spd_builder for more info.</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">spds, M</div>
<div class="line-block">
<div class="line">- ‘spds’: optimized spectrum.</div>
<div class="line">- ‘M’: ndarray with fluxes for each component spectrum.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd><blockquote class="first">
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Optimization algorithms:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>1. ‘2mixer’:
Pairs (odd,even) of components are selected and combined using 
‘pair_strength’. This process is continued until only 3 (combined)
intermediate sources remain. Color3mixer is then used to calculate 
the fluxes for the remaining 3 sources, after which the fluxes of 
all components are back-calculated.</p>
</div></blockquote>
<p class="last">2. ‘3mixer’:
The triangle/trio method creates for all possible combinations of 
3 primary component spectra a spectrum that results in the target 
chromaticity using color3mixer() and then optimizes the weights of
each of the latter spectra such that adding them (additive mixing) 
results in obj_vals as close as possible to the target values.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="hypspcim">
<h2>hypspcim/<a class="headerlink" href="#hypspcim" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>hyperspectral_img_simulator.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.hypspcim</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.hypspcim"></span><div class="section" id="module-for-hyper-spectral-image-simulation">
<h3>Module for hyper spectral image simulation<a class="headerlink" href="#module-for-hyper-spectral-image-simulation" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_HYPSPCIM_PATH:</th><td class="field-body">path to module</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_HYPSPCIM_DEFAULT_IMAGE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">path + filename to default image</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyz_to_rfl():</th><td class="field-body">approximate spectral reflectance of xyz based on k nearest 
neighbour interpolation of samples from a standard reflectance 
set.</td>
</tr>
<tr class="field-even field"><th class="field-name">render_image():</th><td class="field-body">Render image under specified light source spd.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.hypspcim.render_image">
<code class="descclassname">luxpy.toolboxes.hypspcim.</code><code class="descname">render_image</code><span class="sig-paren">(</span><em>img=None</em>, <em>spd=None</em>, <em>rfl=None</em>, <em>out='img_hyp'</em>, <em>refspd=None</em>, <em>D=None</em>, <em>cieobs='1931_2'</em>, <em>cspace='xyz'</em>, <em>cspace_tf={}</em>, <em>interp_type='nd'</em>, <em>k_neighbours=4</em>, <em>show=True</em>, <em>verbosity=0</em>, <em>show_ref_img=True</em>, <em>stack_test_ref=12</em>, <em>write_to_file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#render_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.render_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Render image under specified light source spd.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">img:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or str or ndarray with uint8 rgb image.</div>
<div class="line">None load a default image.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray, optional</div>
<div class="line">Light source spectrum for rendering</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rfl:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray, optional</div>
<div class="line">Reflectance set for color coordinate to rfl mapping.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘img_hyp’ or str, optional</div>
<div class="line-block">
<div class="line">(other option: ‘img_ren’: rendered image under :spd:)</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">refspd:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Reference spectrum for color coordinate to rfl mapping.</div>
<div class="line">None defaults to D65 (srgb has a D65 white point)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">D:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Degree of (von Kries) adaptation from spd to refspd. </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set for calculation of xyz from spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘xyz’,  optional</div>
<div class="line">Color space for color coordinate to rfl mapping.</div>
<div class="line">Tip: Use linear space (e.g. ‘xyz’, ‘Yuv’,…) for (interp_type == ‘nd’),</div>
<div class="line-block">
<div class="line">and perceptually uniform space (e.g. ‘ipt’) for (interp_type == ‘nearest’)</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace_tf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Dict with parameters for xyz_to_cspace and cspace_to_xyz transform.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">interp_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘nd’, optional</div>
<div class="line">Options:</div>
<div class="line">- ‘nd’: perform n-dimensional linear interpolation using Delaunay triangulation.</div>
<div class="line">- ‘nearest’: perform nearest neighbour interpolation. </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">k_neighbours:</th><td class="field-body"><div class="first last line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of nearest neighbours for reflectance spectrum interpolation.</div>
<div class="line">Neighbours are found using scipy.cKDTree</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">show:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line-block">
<div class="line">Show images.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: make a plot of the color coordinates of original and 
rendered image pixels.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">show_ref_img:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True: shows rendered image under reference spd. False: shows
original image.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">write_to_file:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">None: do nothing, else: write to filename(+path) in :write_to_file:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">stack_test_ref:</th><td class="field-body"><div class="first last line-block">
<div class="line">12, optional</div>
<div class="line-block">
<div class="line">- 12: left (test), right (ref) format for show and imwrite</div>
<div class="line">- 21: top (test), bottom (ref)</div>
<div class="line">- 1: only show/write test</div>
<div class="line">- 2: only show/write ref</div>
<div class="line">- 0: show both, write test</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">img_hyp, img_ren, </div>
<div class="line">ndarrays with hyperspectral image and rendered images </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.hypspcim.xyz_to_rfl">
<code class="descclassname">luxpy.toolboxes.hypspcim.</code><code class="descname">xyz_to_rfl</code><span class="sig-paren">(</span><em>xyz</em>, <em>rfl=None</em>, <em>out='rfl_est'</em>, <em>refspd=None</em>, <em>D=None</em>, <em>cieobs='1931_2'</em>, <em>cspace='xyz'</em>, <em>cspace_tf={}</em>, <em>interp_type='nd'</em>, <em>k_neighbours=4</em>, <em>verbosity=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#xyz_to_rfl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.xyz_to_rfl" title="Permalink to this definition">¶</a></dt>
<dd><p>Approximate spectral reflectance of xyz based on nd-dimensional linear interpolation 
or k nearest neighbour interpolation of samples from a standard reflectance set.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with tristimulus values of target points.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">rfl:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray, optional</div>
<div class="line">Reflectance set for color coordinate to rfl mapping.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘rfl_est’ or str, optional</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">refspd:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Refer ence spectrum for color coordinate to rfl mapping.</div>
<div class="line">None defaults to D65.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set used for calculation of xyz from spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘xyz’,  optional</div>
<div class="line">Color space for color coordinate to rfl mapping.</div>
<div class="line">Tip: Use linear space (e.g. ‘xyz’, ‘Yuv’,…) for (interp_type == ‘nd’),</div>
<div class="line-block">
<div class="line">and perceptually uniform space (e.g. ‘ipt’) for (interp_type == ‘nearest’)</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace_tf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Dict with parameters for xyz_to_cspace and cspace_to_xyz transform.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">interp_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘nd’, optional</div>
<div class="line">Options:</div>
<div class="line">- ‘nd’: perform n-dimensional linear interpolation using Delaunay triangulation.</div>
<div class="line">- ‘nearest’: perform nearest neighbour interpolation. </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">k_neighbours:</th><td class="field-body"><div class="first last line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of nearest neighbours for reflectance spectrum interpolation.</div>
<div class="line">Neighbours are found using scipy.cKDTree</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: make a plot of the color coordinates of original and 
rendered image pixels.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">:rfl_est:</div>
<div class="line">ndarrays with estimated reflectance spectra.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="dispcal">
<h2>dispcal/<a class="headerlink" href="#dispcal" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>displaycalibration.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.dispcal</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.dispcal"></span><div class="section" id="module-for-display-characterization">
<h3>Module for display characterization<a class="headerlink" href="#module-for-display-characterization" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="luxpy.toolboxes.dispcal.calibrate">
<code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">calibrate</code><span class="sig-paren">(</span><em>rgbcal</em>, <em>xyzcal</em>, <em>L_type='lms'</em>, <em>tr_type='lut'</em>, <em>cieobs='1931_2'</em>, <em>nbit=8</em>, <em>cspace='lab'</em>, <em>avg=&lt;function &lt;lambda&gt;&gt;</em>, <em>verbosity=1</em>, <em>sep='</em>, <em>'</em>, <em>header=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#calibrate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate TR parameters/lut and conversion matrices.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgbcal:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">rgcal must contain at least the following type of settings:</div>
<div class="line">- pure R,G,B: e.g. for pure R: (R != 0) &amp; (G==0) &amp; (B == 0)</div>
<div class="line">- white(s): R = G = B = 2**nbit-1</div>
<div class="line">- gray(s): R = G = B</div>
<div class="line">- black(s): R = G = B = 0</div>
<div class="line">- binary colors: cyan (G = B, R = 0), yellow (G = R, B = 0), magenta (R = B, G = 0)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyzcal:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of measured XYZ values for </div>
<div class="line">the RGB settings in rgbcal.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">L_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’, optional</div>
<div class="line">Type of response to use in the derivation of the Tone-Response curves.</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lms’: use cone fundamental responses: L vs R, M vs G and S vs B </div>
<div class="line-block">
<div class="line">(reduces noise and generally leads to more accurate characterization) </div>
</div>
<div class="line">- ‘Y’: use the luminance signal: Y vs R, Y vs G, Y vs B</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Derive/specify Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Derive/specify Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘1931_2’, optional</div>
<div class="line">CIE CMF set used to determine the XYZ tristimulus values</div>
<div class="line">(needed when L_type == ‘lms’: determines the conversion matrix to</div>
<div class="line">convert xyz to lms values)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">nbit:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">RGB values in nbit format (e.g. 8, 16, …)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">color space or chromaticity diagram to calculate color differences in</div>
<div class="line">when optimizing the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">avg:</th><td class="field-body"><div class="first last line-block">
<div class="line">lambda x: ((x**2).mean()**0.5), optional</div>
<div class="line">Function used to average the color differences of the individual RGB settings</div>
<div class="line">in the optimization of the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">&gt; 0: print and plot optimization results</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgbcal and xyzcal data</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgbcal and xyzcal data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body"><div class="first last line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyz_white:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with tristimlus values of white</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.dispcal.calibration_performance">
<code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">calibration_performance</code><span class="sig-paren">(</span><em>rgb</em>, <em>xyztarget</em>, <em>M</em>, <em>N</em>, <em>tr</em>, <em>xyz_black</em>, <em>xyz_white</em>, <em>tr_type='lut'</em>, <em>cspace='lab'</em>, <em>avg=&lt;function &lt;lambda&gt;&gt;</em>, <em>rgb_is_xyz=False</em>, <em>is_verification_data=False</em>, <em>nbit=8</em>, <em>verbosity=1</em>, <em>sep='</em>, <em>'</em>, <em>header=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#calibration_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.calibration_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check calibration performance. Calculate DE for each stimulus.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">(or xyz values if argument rgb_to_xyz == True!)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyztarget:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of target XYZ values corresponding </div>
<div class="line">to the RGB settings (or the measured XYZ values, if argument rgb_to_xyz == True).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body"><div class="first last line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyz_white:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with tristimlus values of white</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Derive/specify Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Derive/specify Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">color space or chromaticity diagram to calculate color differences in.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">avg:</th><td class="field-body"><div class="first last line-block">
<div class="line">lambda x: ((x**2).mean()**0.5), optional</div>
<div class="line">Function used to average the color differences of the individual RGB settings</div>
<div class="line">in the optimization of the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rgb_is_xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: the data in argument rgb are actually measured XYZ tristimulus values</div>
<div class="line-block">
<div class="line">and are directly compared to the target xyz.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">is_verification_data:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: the data is assumed to be corresponding to RGB value settings used </div>
<div class="line-block">
<div class="line">in the calibration (i.e. containing whites, blacks, grays, pure and binary mixtures)</div>
</div>
<div class="line">If True: no assumptions on content of rgb, so use this settings when</div>
<div class="line-block">
<div class="line">checking the performance for a set of measured and target xyz data</div>
<div class="line">different than the ones used in the actual calibration measurements. </div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">nbit:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">RGB values in nbit format (e.g. 8, 16, …)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">&gt; 0: print and plot optimization results</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgbcal and xyzcal data</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgbcal and xyzcal data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body"><div class="first last line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyz_white:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with tristimlus values of white</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.dispcal.rgb_to_xyz">
<code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">rgb_to_xyz</code><span class="sig-paren">(</span><em>rgb</em>, <em>M</em>, <em>tr</em>, <em>xyz_black</em>, <em>tr_type='lut'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#rgb_to_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.rgb_to_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert input rgb to xyz.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] with RGB values </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">Type of Tone Response in tr input argument</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] of XYZ tristimulus values</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.dispcal.xyz_to_rgb">
<code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">xyz_to_rgb</code><span class="sig-paren">(</span><em>xyz</em>, <em>N</em>, <em>tr</em>, <em>xyz_black</em>, <em>tr_type='lut'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#xyz_to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.xyz_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert xyz to input rgb.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] with XYZ tristimulus values </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body"><div class="first last line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">Type of Tone Response in tr input argument</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] of display RGB values</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration">
<em class="property">class </em><code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">DisplayCalibration</code><span class="sig-paren">(</span><em>rgbcal</em>, <em>xyzcal=None</em>, <em>L_type='lms'</em>, <em>cieobs='1931_2'</em>, <em>tr_type='lut'</em>, <em>nbit=8</em>, <em>cspace='lab'</em>, <em>avg=&lt;function DisplayCalibration.&lt;lambda&gt;&gt;</em>, <em>verbosity=1</em>, <em>sep='</em>, <em>'</em>, <em>header=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for display_calibration.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgbcal:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">rgcal must contain at least the following type of settings:</div>
<div class="line">- pure R,G,B: e.g. for pure R: (R != 0) &amp; (G==0) &amp; (B == 0)</div>
<div class="line">- white(s): R = G = B = 2**nbit-1</div>
<div class="line">- gray(s): R = G = B</div>
<div class="line">- black(s): R = G = B = 0</div>
<div class="line">- binary colors: cyan (G = B, R = 0), yellow (G = R, B = 0), magenta (R = B, G = 0)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyzcal:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray [Nx3] or string with filename of measured XYZ values for </div>
<div class="line">the RGB settings in rgbcal.</div>
<div class="line">if None: rgbcal is [Nx6] ndarray containing rgb (columns 0-2) and xyz data (columns 3-5)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">L_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’, optional</div>
<div class="line">Type of response to use in the derivation of the Tone-Response curves.</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lms’: use cone fundamental responses: L vs R, M vs G and S vs B </div>
<div class="line-block">
<div class="line">(reduces noise and generally leads to more accurate characterization) </div>
</div>
<div class="line">- ‘Y’: use the luminance signal: Y vs R, Y vs G, Y vs B</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Derive/specify Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Derive/specify Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘1931_2’, optional</div>
<div class="line">CIE CMF set used to determine the XYZ tristimulus values</div>
<div class="line">(needed when L_type == ‘lms’: determines the conversion matrix to</div>
<div class="line">convert xyz to lms values)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">nbit:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">RGB values in nbit format (e.g. 8, 16, …)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">color space or chromaticity diagram to calculate color differences in</div>
<div class="line">when optimizing the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">avg:</th><td class="field-body"><div class="first last line-block">
<div class="line">lambda x: ((x**2).mean()**0.5), optional</div>
<div class="line">Function used to average the color differences of the individual RGB settings</div>
<div class="line">in the optimization of the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">&gt; 0: print and plot optimization results</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgbcal and xyzcal data</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgbcal and xyzcal data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Return:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">calobject:</th><td class="field-body"><div class="first last line-block">
<div class="line">attributes are: </div>
<div class="line-block">
<div class="line">- M: linear rgb to xyz conversion matrix</div>
<div class="line">- N: xyz to linear rgb conversion matrix</div>
<div class="line">- TR: Tone Response function parameters or lut</div>
<div class="line">- xyz_black: ndarray with XYZ tristimulus values of black</div>
<div class="line">- xyz_white: ndarray with tristimlus values of white</div>
</div>
<div class="line">as well as: </div>
<div class="line-block">
<div class="line">- rgbcal, xyzcal, cieobs, avg, tr_type, nbit, cspace, verbosity</div>
<div class="line">- performance: dictionary with various color differences set to np.nan</div>
<div class="line">-    (run calobject.performance() to fill it with actual values)</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="method">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration.check_performance">
<code class="descname">check_performance</code><span class="sig-paren">(</span><em>rgb=None</em>, <em>xyz=None</em>, <em>verbosity=None</em>, <em>sep='</em>, <em>'</em>, <em>header=None</em>, <em>rgb_is_xyz=False</em>, <em>is_verification_data=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration.check_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration.check_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check calibration performance (if rgbcal is None: use calibration data).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">(or xyz values if argument rgb_to_xyz == True!)</div>
<div class="line">If None: use self.rgbcal</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray [Nx3] or string with filename of target XYZ values corresponding </div>
<div class="line">to the RGB settings (or the measured XYZ values, if argument rgb_to_xyz == True).</div>
<div class="line">If None: use self.xyzcal</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">if None: use self.verbosity</div>
<div class="line">if &gt; 0: print and plot optimization results</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgb and xyz data</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgb and xyz data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">rgb_is_xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: the data in argument rgb are actually measured XYZ tristimulus values</div>
<div class="line-block">
<div class="line">and are directly compared to the target xyz.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">is_verification_data:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: the data is assumed to be corresponding to RGB value settings used </div>
<div class="line-block">
<div class="line">in the calibration (i.e. containing whites, blacks, grays, pure and binary mixtures)</div>
<div class="line">Performance results are stored in self.performance.</div>
</div>
<div class="line">If True: no assumptions on content of rgb, so use this settings when</div>
<div class="line-block">
<div class="line">checking the performance for a set of measured and target xyz data</div>
<div class="line">different than the ones used in the actual calibration measurements. </div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Return:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">performance:</th><td class="field-body"><div class="first last line-block">
<div class="line">dictionary with various color differences.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration.to_xyz">
<code class="descname">to_xyz</code><span class="sig-paren">(</span><em>rgb</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration.to_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration.to_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert display rgb to xyz.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration.to_rgb">
<code class="descname">to_rgb</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration.to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration.to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert xyz to display rgb.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="rgb2spec">
<h2>rgb2spec/<a class="headerlink" href="#rgb2spec" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>smits_mitsuba.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.rgb2spec</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.rgb2spec"></span><p>Module for RGB to spectrum conversions</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">_BASESPEC_SMITS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Default dict with base spectra for white, cyan, magenta, yellow, blue, green and red for each intent (‘rfl’ or ‘spd’)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">rgb_to_spec_smits():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Convert an array of RGB values to a spectrum using a smits like conversion as implemented in mitsuba (July 10, 2019)</td>
</tr>
<tr class="field-odd field"><th class="field-name">convert():</th><td class="field-body">Convert an array of RGB values to a spectrum (wrapper around rgb_to_spec_smits(), future: implement other methods)</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.rgb2spec.convert">
<code class="descclassname">luxpy.toolboxes.rgb2spec.</code><code class="descname">convert</code><span class="sig-paren">(</span><em>rgb, method='smits_mtsb', intent='rfl', bitdepth=8, wlr=[360.0, 830.0, 1.0], rgb2spec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/rgb2spec.html#convert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.rgb2spec.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an array of RGB values to a spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of list of rgb values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">method:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘smits_mtsb’, optional</div>
<div class="line">Method to use for conversion:</div>
<div class="line-block">
<div class="line">- ‘smits_mtsb’: use a smits like conversion as implemented in mitsuba.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">intent:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘rfl’ (or ‘spd’), optional</div>
<div class="line">type of requested spectrum conversion .</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">bitdepth:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">bit depth of rgb values</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wlr:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">desired wavelength (nm) range of spectrum.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">rgb2spec:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with base spectra for white, cyan, magenta, yellow, blue, green and red for each intent.</div>
<div class="line">If None: use _BASESPEC_SMITS.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spec:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectrum or spectra (one for each rgb value, first row are the wavelengths)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.rgb2spec.rgb_to_spec_smits">
<code class="descclassname">luxpy.toolboxes.rgb2spec.</code><code class="descname">rgb_to_spec_smits</code><span class="sig-paren">(</span><em>rgb, intent='rfl', bitdepth=8, wlr=[360.0, 830.0, 1.0], rgb2spec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/rgb2spec/smits_mitsuba.html#rgb_to_spec_smits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.rgb2spec.rgb_to_spec_smits" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an array of RGB values to a spectrum using a Smits like conversion as implemented in Mitsuba.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of list of rgb values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">intent:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘rfl’ (or ‘spd’), optional</div>
<div class="line">type of requested spectrum conversion .</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">bitdepth:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">bit depth of rgb values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wlr:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">desired wavelength (nm) range of spectrum.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rgb2spec:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with base spectra for white, cyan, magenta, yellow, blue, green and red for each intent.</div>
<div class="line">If None: use _BASESPEC_SMITS.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spec:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectrum or spectra (one for each rgb value, first row are the wavelengths)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="iolidfiles">
<h2>iolidfiles/<a class="headerlink" href="#iolidfiles" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>io_lid_files.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.iolidfiles</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.iolidfiles"></span><div class="section" id="module-for-reading-and-writing-ies-and-ldt-files">
<h3>Module for reading and writing IES and LDT files.<a class="headerlink" href="#module-for-reading-and-writing-ies-and-ldt-files" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">read_lamp_data:</th><td class="field-body"><p class="first">Read in light intensity distribution and other lamp data from LDT or IES files.</p>
<dl class="last docutils">
<dt>Notes:</dt>
<dd><p class="first last">1.Only basic support. Writing is not yet implemented.
2.Reading IES files is based on Blender’s ies2cycles.py
3.This was implemented to build some uv-texture maps for rendering and only tested for a few files.
4. Use at own risk. No warranties.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.iolidfiles.read_lamp_data">
<code class="descclassname">luxpy.toolboxes.iolidfiles.</code><code class="descname">read_lamp_data</code><span class="sig-paren">(</span><em>filename</em>, <em>multiplier=1.0</em>, <em>verbosity=0</em>, <em>normalize='I0'</em>, <em>only_common_keys=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#read_lamp_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.read_lamp_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in light intensity distribution and other lamp data from LDT or IES files.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">filename:</th><td class="field-body"><div class="first last line-block">
<div class="line">Filename of IES file.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">multiplier:</th><td class="field-body"><div class="first last line-block">
<div class="line">1.0, optional</div>
<div class="line">Scaler for candela values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Display messages while reading file.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">normalize:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘I0’, optional</div>
<div class="line">If ‘I0’: normalize LID to intensity at (theta,phi) = (0,0)</div>
<div class="line">If ‘max’: normalize to max = 1.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">only_common_keys:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True, output only common dict keys related to angles, values</div>
<div class="line">and such of LID.</div>
<div class="line">read_lid_lamp_data(?) for print of common keys and return</div>
<div class="line-block">
<div class="line">empty dict with common keys.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">lid:</th><td class="field-body">dict with IES or LDT file data.
|
| If file_ext == ‘ies’:
|    dict_keys(
| [‘filename’, ‘version’, ‘lamps_num’, ‘lumens_per_lamp’,
| ‘candela_mult’, ‘v_angles_num’, ‘h_angles_num’, ‘photometric_type’,
| ‘units_type’, ‘width’, ‘length’, ‘height’, ‘ballast_factor’, 
| ‘future_use’, ‘input_watts’, ‘v_angs’, ‘h_angs’, ‘lamp_cone_type’,
| ‘lamp_h_type’, ‘candela_values’, ‘candela_2d’, ‘v_same’, ‘h_same’,
| ‘intensity’, ‘theta’, ‘values’, ‘phi’, ‘map’,’Iv0’]
|
| If file_ext == ‘ldt’:
|    dict_keys(
| [‘filename’, ‘version’, ‘manufacturer’, ‘Ityp’,’Isym’,
| ‘Mc’, ‘Dc’, ‘Ng’, ‘name’, Dg’, ‘cct/cri’, ‘tflux’, ‘lumens_per_lamp’,
| ‘candela_mult’, ‘tilt’, lamps_num’,
| ‘cangles’, ‘tangles’,’candela_values’, ‘candela_2d’,
| ‘intensity’, ‘theta’, ‘values’, ‘phi’, ‘map’, ‘Iv0’]
| )</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="spectro">
<h2>spectro/<a class="headerlink" href="#spectro" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>spectro.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.spectro</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.spectro"></span><div class="section" id="package-for-spectral-measurements">
<h3>Package for spectral measurements<a class="headerlink" href="#package-for-spectral-measurements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="supported-devices">
<h4>Supported devices:<a class="headerlink" href="#supported-devices" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>JETI: specbos 1211, etc.</li>
<li>OceanOptics: QEPro, QE65Pro, QE65000, USB2000, USB650,etc.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">get_spd():</th><td class="field-body">wrapper function to measure a spectral power distribution using a spectrometer of one of the supported manufacturers.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="notes">
<h4>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li>For info on the input arguments of get_spd(), see help for each identically named function in each of the subpackages.</li>
<li>The use of jeti spectrometers requires access to some dll files (delivered with this package).</li>
<li>The use of oceanoptics spectrometers requires the manual installation of pyseabreeze, as well as some other ‘manual’ settings. See help for oceanoptics sub-package.</li>
</ol>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.spectro.init">
<code class="descclassname">luxpy.toolboxes.spectro.</code><code class="descname">init</code><span class="sig-paren">(</span><em>manufacturer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spectro/spectro.html#init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spectro.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Import module for specified manufacturer. Make sure everything (drivers, external packages, …) required is installed!</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spectro.get_spd">
<code class="descclassname">luxpy.toolboxes.spectro.</code><code class="descname">get_spd</code><span class="sig-paren">(</span><em>manufacturer='jeti'</em>, <em>dvc=0</em>, <em>Tint=0</em>, <em>autoTint_max=None</em>, <em>close_device=True</em>, <em>out='spd'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spectro/spectro.html#get_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spectro.get_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure a spectral power distribution using a spectrometer of one of the supported manufacturers.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">manufacturer:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘jeti’ or ‘oceanoptics’, optional</div>
<div class="line">Manufacturer of spectrometer (ensures the correct module is loaded).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dvc:</th><td class="field-body"><div class="first last line-block">
<div class="line">0 or int or spectrometer handle, optional</div>
<div class="line">If int: function will try to initialize the spectrometer to </div>
<div class="line-block">
<div class="line">obtain a handle. The int represents the device </div>
<div class="line">number in a list of all detected devices of the manufacturer.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Tint:</th><td class="field-body"><div class="first last line-block">
<div class="line">0 or Float, optional</div>
<div class="line">Integration time in seconds. (if 0: find best integration time, but &lt; autoTint_max).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">autoTint_max:</th><td class="field-body"><div class="first last line-block">
<div class="line">Limit Tint to this value when Tint = 0.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">close_device:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Close spectrometer after measurement.</div>
<div class="line">If ‘dvc’ not in out.split(‘,’): always close!!!</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">“spd” or e.g. “spd,dvc,Errors”, optional</div>
<div class="line">Requested return.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">kwargs:</th><td class="field-body"><div class="first last line-block">
<div class="line">For info on additional input (keyword) arguments of get_spd(), </div>
<div class="line">see help for each identically named function in each of the subpackages. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectrum. (row 0: wavelengths, row1: values)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dvc:</th><td class="field-body"><div class="first last line-block">
<div class="line">Device handle, if succesfull open (_ERROR: failure, nan: closed)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Errors:</th><td class="field-body"><div class="first last line-block">
<div class="line">Dict with error messages.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="classes.html" class="btn btn-neutral" title="Classes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Kevin A.G. Smet

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>